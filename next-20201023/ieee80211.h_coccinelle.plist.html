<!DOCTYPE html>
<html>
  <head>
    <title>Plist HTML Viewer</title>

    <meta charset="UTF-8">

    <style type="text/css">
      .CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@-moz-keyframes blink{50%{background-color:transparent}}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-type,.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta{color:#555}.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-s-default .cm-error{color:red}.cm-invalidchar{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0f0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#f22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:0;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:0 0!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:0 0;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;overflow:auto}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:0}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-focused div.CodeMirror-cursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:''}span.CodeMirror-selectedtext{background:0 0}
/*# sourceMappingURL=codemirror.min.css.map */

      .severity-low {
  background-color: #669603;
}

.severity-low:after {
  content : 'L';
}

.severity-unspecified {
  background-color: #666666;
}

.severity-unspecified:after {
  content : 'U';
}

.severity-style {
  background-color: #9932cc;
}

.severity-style:after {
  content : 'S';
}

.severity-medium {
  background-color: #a9d323;
  color: black;
}

.severity-medium:after {
  content : 'M';
}

.severity-high {
  background-color: #ffa800;
}

.severity-high:after {
  content : 'H';
}

.severity-critical {
  background-color: #e92625;
}

.severity-critical:after {
  content : 'C';
}

i[class*="severity-"] {
  line-height: normal;
  text-transform: capitalize;
  font-size: 0.8em;
  font-weight: bold;
  color: white;
  display: inline-block;
  width: 16px;
  height: 16px;
  text-align: center;
  font-family: sans-serif;
}

      html, body {
  width: 100%;
  height: 100%;
  padding: 0px;
  margin: 0px;
}

div.container {
  padding: 10px;
}

#content {
  height: 100%;
  display: block;
  overflow: hidden;
}

#content > div {
  margin: 10px;
  overflow: hidden;
  border: 1px solid #ddd;
  border-radius: 3px;
  overflow: hidden;
  height: 97%;
}

.button {
  background-color: #f1f1f1;
  text-decoration: none;
  display: inline-block;
  padding: 8px 16px;
  color: black;
  cursor: pointer;
}

.button:hover {
  background-color: #ddd;
  color: black;
}

.review-status {
  color: white;
  text-align: center;
}

.review-status-confirmed {
  background-color: #e92625;
}

.review-status-false-positive {
  background-color: grey;
}

.review-status-intentional {
  background-color: #669603;
}

      div.container {
  width: 100%;
  height: 100%;
  padding: 0px;
}

#editor-wrapper {
  margin: 10px;
}

#side-bar {
  float: left;
  width: 260px;
  margin: 0px;
}

#report-nav ul {
  list-style-type: none;
  padding: 0;
  margin: 0;
  overflow-y: auto;
  height: 100%;
}

#report-nav ul > li {
  padding: .4em;
  background-color: #fff;
  border-bottom: 1px solid rgba(0,0,0,.125);
  text-align: left;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

#report-nav ul > li.active {
  background-color: #427ea9;
  color: white;
}

#report-nav ul > li:hover {
  background-color: #427ea9;
  color: white;
  cursor: pointer;
}

#report-nav ul a {
  text-decoration: none;
}

#report-nav i[class*="severity-"] {
  margin-right: 5px;
}

.header {
  border-bottom: 1px solid lightgrey;
  font-family: monospace;
  padding: 10px;
  background-color: #fafbfc;
  border-bottom: 1px solid #e1e4e8;
  border-top-left-radius: 2px;
  border-top-right-radius: 2px;
}

#report-nav .header {
  font-weight: bold;
}

#editor-wrapper .header > div {
  padding-top: 2px;
}

#file-path,
#checker-name {
  color: #195ea2;
}

#review-status {
  padding: 0px 5px;
}

#file-path {
  font-family: monospace;
}

.check-msg {
  display: inline-block;
  padding: 3px 6px;
  margin: 1px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
}

.check-msg.info {
  color: #00546f;
  background-color: #bfdfe9;
  border: 1px solid #87a8b3;
}

.check-msg.error {
  background-color: #f2dede;
  color: #a94442;
  border: 1px solid #ebcccc;
}

.check-msg.macro {
  background-color: #d7dac2;
  color: #4f5c6d;
  border: 1px solid #d7dac2;
}

.check-msg.note {
  background-color: #d7d7d7;
  color: #4f5c6d;
  border: 1px solid #bfbfbf;
}

.check-msg.current {
  border: 2px dashed #3692ff;
}

.check-msg .tag {
  padding: 1px 5px;
  text-align: center;
  border-radius: 2px;
  margin-right: 5px;
  text-decoration: inherit;
}

.check-msg .tag.macro {
  background-color: #83876a;
  color: white;
  text-transform: capitalize;
}

.check-msg .tag.note {
  background-color: #9299a1;
  color: white;
  text-transform: capitalize;
}

.checker-enum {
  color: white;
  padding: 1px 5px;
  text-align: center;
  border-radius: 25px;
  margin-right: 5px;
  text-decoration: inherit;
}

.checker-enum.info {
  background-color: #427ea9;
}

.checker-enum.error {
  background-color: #a94442;
}

.arrow {
  border: solid black;
  border-width: 0 3px 3px 0;
  display: inline-block;
  padding: 3px;
  cursor: pointer;
  margin: 0px 5px;
}

.arrow:hover {
  border: solid #437ea8;
  border-width: 0 3px 3px 0;
}

.left-arrow {
  transform: rotate(135deg);
  -webkit-transform: rotate(135deg);
}

.right-arrow {
  transform: rotate(-45deg);
  -webkit-transform: rotate(-45deg);
}

    </style>

    <script type="text/javascript">
      function setNonCompatibleBrowserMessage() {
  document.body.innerHTML =
    '<h2 style="margin-left: 20px;">Your browser is not compatible with CodeChecker Viewer!</h2> \
     <p style="margin-left: 20px;">The version required for the following browsers are:</p> \
     <ul style="margin-left: 20px;"> \
     <li>Internet Explorer: version 9 or newer</li> \
     <li>Firefox: version 22.0 or newer</li> \
     </ul>';
}

// http://stackoverflow.com/questions/5916900/how-can-you-detect-the-version-of-a-browser
var browserVersion = (function(){
  var ua = navigator.userAgent, tem,
    M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];

  if (/trident/i.test(M[1])) {
    tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
    return 'IE ' + (tem[1] || '');
  }

  if (M[1] === 'Chrome') {
    tem = ua.match(/\b(OPR|Edge)\/(\d+)/);
    if (tem != null) return tem.slice(1).join(' ').replace('OPR', 'Opera');
  }

  M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
  if ((tem = ua.match(/version\/(\d+)/i)) != null) M.splice(1, 1, tem[1]);
    return M.join(' ');
})();

var pos = browserVersion.indexOf(' ');
var browser = browserVersion.substr(0, pos);
var version = parseInt(browserVersion.substr(pos + 1));

var browserCompatible
  = browser === 'Firefox'
  ? version >= 22
  : browser === 'IE'
  ? version >= 9
  : true;


      /* MIT License

Copyright (C) 2017 by Marijn Haverbeke <marijnh@gmail.com> and others

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
 */
      !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(this,function(){"use strict";function e(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function t(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function r(e,r){return t(e).appendChild(r)}function n(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function i(e,t,r,i){var o=n(e,t,r,i);return o.setAttribute("role","presentation"),o}function o(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function l(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function s(t,r){var n=t.className;e(r).test(n)||(t.className+=(n?" ":"")+r)}function a(t,r){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!e(n[i]).test(r)&&(r+=" "+n[i]);return r}function u(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function c(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function f(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,l=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}}function h(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function d(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=t)return n}}function p(e){for(;Kl.length<=e;)Kl.push(g(Kl)+" ");return Kl[e]}function g(e){return e[e.length-1]}function v(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function m(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}function y(){}function b(e,t){var r;return Object.create?r=Object.create(e):(y.prototype=e,r=new y),t&&c(t,r),r}function w(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||jl.test(e))}function x(e,t){return t?!!(t.source.indexOf("\\w")>-1&&w(e))||t.test(e):w(e)}function C(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function S(e){return e.charCodeAt(0)>=768&&Xl.test(e)}function L(e,t,r){for(;(r<0?t>0:t<e.length)&&S(e.charAt(t));)t+=r;return t}function k(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var i=(t+r)/2,o=n<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:r;e(o)?r=o:t=o+n}}function T(e,t,r){var o=this;this.input=r,o.scrollbarFiller=n("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=n("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=i("div",null,"CodeMirror-code"),o.selectionDiv=n("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=n("div",null,"CodeMirror-cursors"),o.measure=n("div",null,"CodeMirror-measure"),o.lineMeasure=n("div",null,"CodeMirror-measure"),o.lineSpace=i("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=i("div",[o.lineSpace],"CodeMirror-lines");o.mover=n("div",[l],null,"position: relative"),o.sizer=n("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=n("div",null,null,"position: absolute; height: "+Rl+"px; width: 1px;"),o.gutters=n("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=n("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=n("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),gl&&vl<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),ml||fl&&Tl||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,r.init(o)}function M(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function N(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function O(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function A(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function W(e){if(null==e.parent)return null;for(var t=e.parent,r=h(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function D(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var l=0;l<e.lines.length;++l){var s=e.lines[l].height;if(t<s)break;t-=s}return r+l}function H(e,t){return t>=e.first&&t<e.first+e.size}function F(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function E(e,t,r){if(void 0===r&&(r=null),!(this instanceof E))return new E(e,t,r);this.line=e,this.ch=t,this.sticky=r}function P(e,t){return e.line-t.line||e.ch-t.ch}function I(e,t){return e.sticky==t.sticky&&0==P(e,t)}function z(e){return E(e.line,e.ch)}function R(e,t){return P(e,t)<0?t:e}function B(e,t){return P(e,t)<0?e:t}function G(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function U(e,t){if(t.line<e.first)return E(e.first,0);var r=e.first+e.size-1;return t.line>r?E(r,M(e,r).text.length):V(t,M(e,t.line).text.length)}function V(e,t){var r=e.ch;return null==r||r>t?E(e.line,t):r<0?E(e.line,0):e}function K(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=U(e,t[n]);return r}function j(){Yl=!0}function X(){_l=!0}function Y(e,t,r){this.marker=e,this.from=t,this.to=r}function _(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function $(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function q(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Z(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==l.type&&(!r||!o.marker.insertLeft)){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Y(l,o.from,s?null:o.to))}}return n}function Q(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker;if(null==o.to||(l.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==l.type&&(!r||o.marker.insertLeft)){var s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Y(l,s?null:o.from-t,null==o.to?null:o.to-t))}}return n}function J(e,t){if(t.full)return null;var r=H(e,t.from.line)&&M(e,t.from.line).markedSpans,n=H(e,t.to.line)&&M(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==P(t.from,t.to),s=Z(r,i,l),a=Q(n,o,l),u=1==t.text.length,c=g(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var h=s[f];if(null==h.to){var d=_(a,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(a)for(var p=0;p<a.length;++p){var v=a[p];null!=v.to&&(v.to+=c),null==v.from?_(s,v.marker)||(v.from=c,u&&(s||(s=[])).push(v)):(v.from+=c,u&&(s||(s=[])).push(v))}s&&(s=ee(s)),a&&a!=s&&(a=ee(a));var m=[s];if(!u){var y,b=t.text.length-2;if(b>0&&s)for(var w=0;w<s.length;++w)null==s[w].to&&(y||(y=[])).push(new Y(s[w].marker,null,null));for(var x=0;x<b;++x)m.push(y);m.push(a)}return m}function ee(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function te(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=h(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(P(u.to,s.from)<0||P(u.from,s.to)>0)){var c=[a,1],f=P(u.from,s.from),d=P(u.to,s.to);(f<0||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(d>0||!l.inclusiveRight&&!d)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-3}}return i}function re(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function ne(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function ie(e){return e.inclusiveLeft?-1:0}function oe(e){return e.inclusiveRight?1:0}function le(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=P(n.from,i.from)||ie(e)-ie(t);if(o)return-o;var l=P(n.to,i.to)||oe(e)-oe(t);return l||t.id-e.id}function se(e,t){var r,n=_l&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||le(r,i.marker)<0)&&(r=i.marker);return r}function ae(e){return se(e,!0)}function ue(e){return se(e,!1)}function ce(e,t,r,n,i){var o=M(e,t),l=_l&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=P(u.from,r)||ie(a.marker)-ie(i),f=P(u.to,n)||oe(a.marker)-oe(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?P(u.to,r)>=0:P(u.to,r)>0)||c>=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?P(u.from,n)<=0:P(u.from,n)<0)))return!0}}}function fe(e){for(var t;t=ae(e);)e=t.find(-1,!0).line;return e}function he(e){for(var t;t=ue(e);)e=t.find(1,!0).line;return e}function de(e){for(var t,r;t=ue(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function pe(e,t){var r=M(e,t),n=fe(r);return r==n?t:W(n)}function ge(e,t){if(t>e.lastLine())return t;var r,n=M(e,t);if(!ve(e,n))return t;for(;r=ue(n);)n=r.find(1,!0).line;return W(n)+1}function ve(e,t){var r=_l&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&me(e,t,n))return!0}}function me(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return me(e,n.line,_(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&me(e,t,i))return!0}function ye(e){for(var t=0,r=(e=fe(e)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var l=0;l<o.children.length;++l){var s=o.children[l];if(s==r)break;t+=s.height}return t}function be(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=ae(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=ue(n);){var o=t.find(0,!0);r-=n.text.length-o.from.ch,r+=(n=o.to.line).text.length-o.to.ch}return r}function we(e){var t=e.display,r=e.doc;t.maxLine=M(r,r.first),t.maxLineLength=be(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=be(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function xe(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?"rtl":"ltr",o),i=!0)}i||n(t,r,"ltr")}function Ce(e,t,r){var n;$l=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==r?n=i:$l=i),o.from==t&&(o.from!=o.to&&"before"!=r?n=i:$l=i)}return null!=n?n:$l}function Se(e,t){var r=e.order;return null==r&&(r=e.order=ql(e.text,t)),r}function Le(e,t){return e._handlers&&e._handlers[t]||Zl}function ke(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var o=h(i,r);o>-1&&(n[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function Te(e,t){var r=Le(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function Me(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Te(e,r||t.type,e,t),He(t)||t.codemirrorIgnore}function Ne(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==h(r,t[n])&&r.push(t[n])}function Oe(e,t){return Le(e,t).length>0}function Ae(e){e.prototype.on=function(e,t){Ql(this,e,t)},e.prototype.off=function(e,t){ke(this,e,t)}}function We(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function De(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function He(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Fe(e){We(e),De(e)}function Ee(e){return e.target||e.srcElement}function Pe(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Ml&&e.ctrlKey&&1==t&&(t=3),t}function Ie(e){if(null==Il){var t=n("span","​");r(e,n("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Il=t.offsetWidth<=1&&t.offsetHeight>2&&!(gl&&vl<8))}var i=Il?n("span","​"):n("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function ze(e){if(null!=zl)return zl;var n=r(e,document.createTextNode("AخA")),i=Wl(n,0,1).getBoundingClientRect(),o=Wl(n,1,2).getBoundingClientRect();return t(e),!(!i||i.left==i.right)&&(zl=o.right-i.right<3)}function Re(e){if(null!=ns)return ns;var t=r(e,n("span","x")),i=t.getBoundingClientRect(),o=Wl(t,0,1).getBoundingClientRect();return ns=Math.abs(i.left-o.left)>1}function Be(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),is[e]=t}function Ge(e){if("string"==typeof e&&os.hasOwnProperty(e))e=os[e];else if(e&&"string"==typeof e.name&&os.hasOwnProperty(e.name)){var t=os[e.name];"string"==typeof t&&(t={name:t}),(e=b(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ge("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ge("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ue(e,t){t=Ge(t);var r=is[t.name];if(!r)return Ue(e,"text/plain");var n=r(e,t);if(ls.hasOwnProperty(t.name)){var i=ls[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var l in t.modeProps)n[l]=t.modeProps[l];return n}function Ve(e,t){c(t,ls.hasOwnProperty(e)?ls[e]:ls[e]={})}function Ke(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function je(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Xe(e,t,r){return!e.startState||e.startState(t,r)}function Ye(e,t,r,n){var i=[e.state.modeGen],o={};tt(e,t.text,e.doc.mode,r,function(e,t){return i.push(e,t)},o,n);for(var l=r.state,s=0;s<e.state.overlays.length;++s)!function(n){var l=e.state.overlays[n],s=1,a=0;r.state=!0,tt(e,t.text,l.mode,r,function(e,t){for(var r=s;a<e;){var n=i[s];n>e&&i.splice(s,1,e,i[s+1],n),s+=2,a=Math.min(e,n)}if(t)if(l.opaque)i.splice(r,s-r,e,"overlay "+t),s=r+2;else for(;r<s;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"overlay "+t}},o)}(s);return r.state=l,{styles:i,classes:o.bgClass||o.textClass?o:null}}function _e(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=$e(e,W(t)),i=t.text.length>e.options.maxHighlightLength&&Ke(e.doc.mode,n.state),o=Ye(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function $e(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new us(n,!0,t);var o=rt(e,t,r),l=o>n.first&&M(n,o-1).stateAfter,s=l?us.fromSaved(n,l,o):new us(n,Xe(n.mode),o);return n.iter(o,t,function(r){qe(e,r.text,s);var n=s.line;r.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?s.save():null,s.nextLine()}),r&&(n.modeFrontier=s.line),s}function qe(e,t,r,n){var i=e.doc.mode,o=new ss(t,e.options.tabSize,r);for(o.start=o.pos=n||0,""==t&&Ze(i,r.state);!o.eol();)Qe(i,o,r.state),o.start=o.pos}function Ze(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=je(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function Qe(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=je(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function Je(e,t,r,n){var i,o,l=e.doc,s=l.mode,a=M(l,(t=U(l,t)).line),u=$e(e,t.line,r),c=new ss(a.text,e.options.tabSize,u);for(n&&(o=[]);(n||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=Qe(s,c,u.state),n&&o.push(new cs(c,i,Ke(l.mode,u.state)));return n?o:new cs(c,i,u.state)}function et(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function tt(e,t,r,n,i,o,l){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var a,u=0,c=null,f=new ss(t,e.options.tabSize,n),h=e.options.addModeClass&&[null];for(""==t&&et(Ze(r,n.state),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(s=!1,l&&qe(e,t,n,f.pos),f.pos=t.length,a=null):a=et(Qe(r,f,n.state,h),o),h){var d=h[0].name;d&&(a="m-"+(a?d+" "+a:d))}if(!s||c!=a){for(;u<f.start;)i(u=Math.min(f.start,u+5e3),c);c=a}f.start=f.pos}for(;u<f.pos;){var p=Math.min(f.pos,u+5e3);i(p,c),u=p}}function rt(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=M(o,s-1),u=a.stateAfter;if(u&&(!r||s+(u instanceof as?u.lookAhead:0)<=o.modeFrontier))return s;var c=f(a.text,null,e.options.tabSize);(null==i||n>c)&&(i=s-1,n=c)}return i}function nt(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var i=M(e,n).stateAfter;if(i&&(!(i instanceof as)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}function it(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),re(e),ne(e,r);var i=n?n(e):1;i!=e.height&&A(e,i)}function ot(e){e.parent=null,re(e)}function lt(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?ps:ds;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function st(e,t){var r=i("span",null,null,ml?"padding-right: .1px":null),n={pre:i("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(gl||ml)&&e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var l=o?t.rest[o-1]:t.line,s=void 0;n.pos=0,n.addToken=ut,ze(e.display.measure)&&(s=Se(l,e.doc.direction))&&(n.addToken=ft(n.addToken,s)),n.map=[],dt(l,n,_e(e,l,t!=e.display.externalMeasured&&W(l))),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=a(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=a(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ie(e.display.measure))),0==o?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(ml){var u=n.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return Te(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=a(n.pre.className,n.textClass||"")),n}function at(e){var t=n("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ut(e,t,r,i,o,l,s){if(t){var a,u=e.splitSpaces?ct(t,e.trailingSpace):t,c=e.cm.state.specialChars,f=!1;if(c.test(t)){a=document.createDocumentFragment();for(var h=0;;){c.lastIndex=h;var d=c.exec(t),g=d?d.index-h:t.length-h;if(g){var v=document.createTextNode(u.slice(h,h+g));gl&&vl<9?a.appendChild(n("span",[v])):a.appendChild(v),e.map.push(e.pos,e.pos+g,v),e.col+=g,e.pos+=g}if(!d)break;h+=g+1;var m=void 0;if("\t"==d[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(m=a.appendChild(n("span",p(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),e.col+=b}else"\r"==d[0]||"\n"==d[0]?((m=a.appendChild(n("span","\r"==d[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",d[0]),e.col+=1):((m=e.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),gl&&vl<9?a.appendChild(n("span",[m])):a.appendChild(m),e.col+=1);e.map.push(e.pos,e.pos+1,m),e.pos++}}else e.col+=t.length,a=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,a),gl&&vl<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),r||i||o||f||s){var w=r||"";i&&(w+=i),o&&(w+=o);var x=n("span",[a],w,s);return l&&(x.title=l),e.content.appendChild(x)}e.content.appendChild(a)}}function ct(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),n+=o,r=" "==o}return n}function ft(e,t){return function(r,n,i,o,l,s,a){i=i?i+" cm-force-border":"cm-force-border";for(var u=r.pos,c=u+n.length;;){for(var f=void 0,h=0;h<t.length&&!((f=t[h]).to>u&&f.from<=u);h++);if(f.to>=c)return e(r,n,i,o,l,s,a);e(r,n.slice(0,f.to-u),i,o,null,s,a),o=null,n=n.slice(f.to-u),u=f.to}}}function ht(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function dt(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,f,h,d=i.length,p=0,g=1,v="",m=0;;){if(m==p){a=u=c=f=s="",h=null,m=1/0;for(var y=[],b=void 0,w=0;w<n.length;++w){var x=n[w],C=x.marker;"bookmark"==C.type&&x.from==p&&C.widgetNode?y.push(C):x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&m>x.to&&(m=x.to,u=""),C.className&&(a+=" "+C.className),C.css&&(s=(s?s+";":"")+C.css),C.startStyle&&x.from==p&&(c+=" "+C.startStyle),C.endStyle&&x.to==m&&(b||(b=[])).push(C.endStyle,x.to),C.title&&!f&&(f=C.title),C.collapsed&&(!h||le(h.marker,C)<0)&&(h=x)):x.from>p&&m>x.from&&(m=x.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==m&&(u+=" "+b[S]);if(!h||h.from==p)for(var L=0;L<y.length;++L)ht(t,0,y[L]);if(h&&(h.from||0)==p){if(ht(t,(null==h.to?d+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}}if(p>=d)break;for(var k=Math.min(d,m);;){if(v){var T=p+v.length;if(!h){var M=T>k?v.slice(0,k-p):v;t.addToken(t,M,l?l+a:a,c,p+M.length==m?u:"",f,s)}if(T>=k){v=v.slice(k-p),p=k;break}p=T,c=""}v=i.slice(o,o=r[g++]),l=lt(r[g++],t.cm.options)}}else for(var N=1;N<r.length;N+=2)t.addToken(t,i.slice(o,o=r[N]),lt(r[N+1],t.cm.options))}function pt(e,t,r){this.line=t,this.rest=de(t),this.size=this.rest?W(g(this.rest))-r+1:1,this.node=this.text=null,this.hidden=ve(e,t)}function gt(e,t,r){for(var n,i=[],o=t;o<r;o=n){var l=new pt(e.doc,M(e.doc,o),o);n=o+l.size,i.push(l)}return i}function vt(e){gs?gs.ops.push(e):e.ownsGroup=gs={ops:[e],delayedCallbacks:[]}}function mt(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}function yt(e,t){var r=e.ownsGroup;if(r)try{mt(r)}finally{gs=null,t(r)}}function bt(e,t){var r=Le(e,t);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);gs?n=gs.delayedCallbacks:vs?n=vs:(n=vs=[],setTimeout(wt,0));for(var o=0;o<r.length;++o)!function(e){n.push(function(){return r[e].apply(null,i)})}(o)}}function wt(){var e=vs;vs=null;for(var t=0;t<e.length;++t)e[t]()}function xt(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?kt(e,t):"gutter"==o?Mt(e,t,r,n):"class"==o?Tt(e,t):"widget"==o&&Nt(e,t,n)}t.changes=null}function Ct(e){return e.node==e.text&&(e.node=n("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),gl&&vl<8&&(e.node.style.zIndex=2)),e.node}function St(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var i=Ct(t);t.background=i.insertBefore(n("div",null,r),i.firstChild),e.display.input.setUneditable(t.background)}}function Lt(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):st(e,t)}function kt(e,t){var r=t.text.className,n=Lt(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,Tt(e,t)):r&&(t.text.className=r)}function Tt(e,t){St(e,t),t.line.wrapClass?Ct(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function Mt(e,t,r,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=Ct(t);t.gutterBackground=n("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var l=t.line.gutterMarkers;if(e.options.lineNumbers||l){var s=Ct(t),a=t.gutter=n("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(n("div",F(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),l)for(var u=0;u<e.options.gutters.length;++u){var c=e.options.gutters[u],f=l.hasOwnProperty(c)&&l[c];f&&a.appendChild(n("div",[f],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function Nt(e,t,r){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,"CodeMirror-linewidget"==n.className&&t.node.removeChild(n);At(e,t,r)}function Ot(e,t,r,n){var i=Lt(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),Tt(e,t),Mt(e,t,r,n),At(e,t,n),t.node}function At(e,t,r){if(Wt(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)Wt(e,t.rest[n],t,r,!1)}function Wt(e,t,r,i,o){if(t.widgets)for(var l=Ct(r),s=0,a=t.widgets;s<a.length;++s){var u=a[s],c=n("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Dt(u,c,r,i),e.display.input.setUneditable(c),o&&u.above?l.insertBefore(c,r.gutter||r.text):l.appendChild(c),bt(u,"redraw")}}function Dt(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function Ht(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!o(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),r(t.display.measure,n("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Ft(e,t){for(var r=Ee(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function Et(e){return e.lineSpace.offsetTop}function Pt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function It(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=r(e.measure,n("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(e.cachedPaddingH=o),o}function zt(e){return Rl-e.display.nativeBarWidth}function Rt(e){return e.display.scroller.clientWidth-zt(e)-e.display.barWidth}function Bt(e){return e.display.scroller.clientHeight-zt(e)-e.display.barHeight}function Gt(e,t,r){var n=e.options.lineWrapping,i=n&&Rt(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function Ut(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(W(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Vt(e,t){var n=W(t=fe(t)),i=e.display.externalMeasured=new pt(e.doc,t,n);i.lineN=n;var o=i.built=st(e,i);return i.text=o.pre,r(e.display.lineMeasure,o.pre),i}function Kt(e,t,r,n){return Yt(e,Xt(e,t),r,n)}function jt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Lr(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Xt(e,t){var r=W(t),n=jt(e,r);n&&!n.text?n=null:n&&n.changes&&(xt(e,n,r,br(e)),e.curOp.forceUpdate=!0),n||(n=Vt(e,t));var i=Ut(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Yt(e,t,r,n,i){t.before&&(r=-1);var o,l=r+(n||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Gt(e,t.view,t.rect),t.hasHeights=!0),(o=qt(e,t,r,n)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function _t(e,t,r){for(var n,i,o,l,s,a,u=0;u<e.length;u+=3)if(s=e[u],a=e[u+1],t<s?(i=0,o=1,l="left"):t<a?o=(i=t-s)+1:(u==e.length-3||t==a&&e[u+3]>t)&&(i=(o=a-s)-1,t>=a&&(l="right")),null!=i){if(n=e[u+2],s==a&&r==(n.insertLeft?"left":"right")&&(l=r),"left"==r&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)n=e[2+(u-=3)],l="left";if("right"==r&&i==a-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)n=e[(u+=3)+2],l="right";break}return{node:n,start:i,end:o,collapse:l,coverStart:s,coverEnd:a}}function $t(e,t){var r=ms;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function qt(e,t,r,n){var i,o=_t(t.map,r,n),l=o.node,s=o.start,a=o.end,u=o.collapse;if(3==l.nodeType){for(var c=0;c<4;c++){for(;s&&S(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+a<o.coverEnd&&S(t.line.text.charAt(o.coverStart+a));)++a;if((i=gl&&vl<9&&0==s&&a==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():$t(Wl(l,s,a).getClientRects(),n)).left||i.right||0==s)break;a=s,s-=1,u="right"}gl&&vl<11&&(i=Zt(e.display.measure,i))}else{s>0&&(u=n="right");var f;i=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==n?f.length-1:0]:l.getBoundingClientRect()}if(gl&&vl<9&&!s&&(!i||!i.left&&!i.right)){var h=l.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+yr(e.display),top:h.top,bottom:h.bottom}:ms}for(var d=i.top-t.rect.top,p=i.bottom-t.rect.top,g=(d+p)/2,v=t.view.measure.heights,m=0;m<v.length-1&&!(g<v[m]);m++);var y=m?v[m-1]:0,b=v[m],w={left:("right"==u?i.right:i.left)-t.rect.left,right:("left"==u?i.left:i.right)-t.rect.left,top:y,bottom:b};return i.left||i.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=d,w.rbottom=p),w}function Zt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Re(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function Qt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Jt(e){e.display.externalMeasure=null,t(e.display.lineMeasure);for(var r=0;r<e.display.view.length;r++)Qt(e.display.view[r])}function er(e){Jt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function tr(){return bl&&kl?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function rr(){return bl&&kl?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function nr(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=Ht(e.widgets[r]));return t}function ir(e,t,r,n,i){if(!i){var o=nr(t);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=ye(t);if("local"==n?l+=Et(e.display):l-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:rr());var a=s.left+("window"==n?0:tr());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function or(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=tr(),i-=rr();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function lr(e,t,r,n,i){return n||(n=M(e.doc,t.line)),ir(e,n,Kt(e,n,t.ch,i),r)}function sr(e,t,r,n,i,o){function l(t,l){var s=Yt(e,i,t,l?"right":"left",o);return l?s.left=s.right:s.right=s.left,ir(e,n,s,r)}function s(e,t,r){var n=1==a[t].level;return l(r?e-1:e,n!=r)}n=n||M(e.doc,t.line),i||(i=Xt(e,n));var a=Se(n,e.doc.direction),u=t.ch,c=t.sticky;if(u>=n.text.length?(u=n.text.length,c="before"):u<=0&&(u=0,c="after"),!a)return l("before"==c?u-1:u,"before"==c);var f=Ce(a,u,c),h=$l,d=s(u,f,"before"==c);return null!=h&&(d.other=s(u,h,"before"!=c)),d}function ar(e,t){var r=0;t=U(e.doc,t),e.options.lineWrapping||(r=yr(e.display)*t.ch);var n=M(e.doc,t.line),i=ye(n)+Et(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function ur(e,t,r,n,i){var o=E(e,t,r);return o.xRel=i,n&&(o.outside=!0),o}function cr(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return ur(n.first,0,null,!0,-1);var i=D(n,r),o=n.first+n.size-1;if(i>o)return ur(n.first+n.size-1,M(n,o).text.length,null,!0,1);t<0&&(t=0);for(var l=M(n,i);;){var s=pr(e,l,i,t,r),a=ue(l),u=a&&a.find(0,!0);if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=W(l=u.to.line)}}function fr(e,t,r,n){n-=nr(t);var i=t.text.length,o=k(function(t){return Yt(e,r,t-1).bottom<=n},i,0);return i=k(function(t){return Yt(e,r,t).top>n},o,i),{begin:o,end:i}}function hr(e,t,r,n){return r||(r=Xt(e,t)),fr(e,t,r,ir(e,t,Yt(e,r,n),"line").top)}function dr(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function pr(e,t,r,n,i){i-=ye(t);var o=Xt(e,t),l=nr(t),s=0,a=t.text.length,u=!0,c=Se(t,e.doc.direction);if(c){var f=(e.options.lineWrapping?vr:gr)(e,t,r,o,c,n,i);s=(u=1!=f.level)?f.from:f.to-1,a=u?f.to:f.from-1}var h,d,p=null,g=null,v=k(function(t){var r=Yt(e,o,t);return r.top+=l,r.bottom+=l,!!dr(r,n,i,!1)&&(r.top<=i&&r.left<=n&&(p=t,g=r),!0)},s,a),m=!1;if(g){var y=n-g.left<g.right-n,b=y==u;v=p+(b?0:1),d=b?"after":"before",h=y?g.left:g.right}else{u||v!=a&&v!=s||v++,d=0==v?"after":v==t.text.length?"before":Yt(e,o,v-(u?1:0)).bottom+l<=i==u?"after":"before";var w=sr(e,E(r,v,d),"line",t,o);h=w.left,m=i<w.top||i>=w.bottom}return v=L(t.text,v,1),ur(r,v,d,m,n-h)}function gr(e,t,r,n,i,o,l){var s=k(function(s){var a=i[s],u=1!=a.level;return dr(sr(e,E(r,u?a.to:a.from,u?"before":"after"),"line",t,n),o,l,!0)},0,i.length-1),a=i[s];if(s>0){var u=1!=a.level,c=sr(e,E(r,u?a.from:a.to,u?"after":"before"),"line",t,n);dr(c,o,l,!0)&&c.top>l&&(a=i[s-1])}return a}function vr(e,t,r,n,i,o,l){for(var s=fr(e,t,n,l),a=s.begin,u=s.end,c=null,f=null,h=0;h<i.length;h++){var d=i[h];if(!(d.from>=u||d.to<=a)){var p=Yt(e,n,1!=d.level?Math.min(u,d.to)-1:Math.max(a,d.from)).right,g=p<o?o-p+1e9:p-o;(!c||f>g)&&(c=d,f=g)}}return c||(c=i[i.length-1]),c.from<a&&(c={from:a,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function mr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==hs){hs=n("pre");for(var i=0;i<49;++i)hs.appendChild(document.createTextNode("x")),hs.appendChild(n("br"));hs.appendChild(document.createTextNode("x"))}r(e.measure,hs);var o=hs.offsetHeight/50;return o>3&&(e.cachedTextHeight=o),t(e.measure),o||1}function yr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=n("span","xxxxxxxxxx"),i=n("pre",[t]);r(e.measure,i);var o=t.getBoundingClientRect(),l=(o.right-o.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function br(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)r[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[l]]=o.clientWidth;return{fixedPos:wr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function wr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function xr(e){var t=mr(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/yr(e.display)-3);return function(i){if(ve(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function Cr(e){var t=e.doc,r=xr(e);t.iter(function(e){var t=r(e);t!=e.height&&A(e,t)})}function Sr(e,t,r,n){var i=e.display;if(!r&&"true"==Ee(t).getAttribute("cm-not-content"))return null;var o,l,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,l=t.clientY-s.top}catch(t){return null}var a,u=cr(e,o,l);if(n&&1==u.xRel&&(a=M(e.doc,u.line).text).length==u.ch){var c=f(a,a.length,e.options.tabSize)-a.length;u=E(u.line,Math.max(0,Math.round((o-It(e.display).left)/yr(e.display))-c))}return u}function Lr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function kr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Tr(e,t){void 0===t&&(t=!0);for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++)if(t||l!=r.sel.primIndex){var s=r.sel.ranges[l];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var a=s.empty();(a||e.options.showCursorWhenSelecting)&&Mr(e,s.head,i),a||Or(e,s,o)}}return n}function Mr(e,t,r){var i=sr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=r.appendChild(n("div"," ","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var l=r.appendChild(n("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));l.style.display="",l.style.left=i.other.left+"px",l.style.top=i.other.top+"px",l.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Nr(e,t){return e.top-t.top||e.left-t.left}function Or(e,t,r){function i(e,t,r,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),a.appendChild(n("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?f-e:r)+"px;\n                             height: "+(i-t)+"px"))}function o(t,r,n){function o(r,n){return lr(e,E(t,r),"div",u,n)}var l,a,u=M(s,t),h=u.text.length,d=Se(u,s.direction);return xe(d,r||0,null==n?h:n,function(t,s,p,g){var v=o(t,"ltr"==p?"left":"right"),m=o(s-1,"ltr"==p?"right":"left");if("ltr"==p){var y=null==r&&0==t?c:v.left,b=null==n&&s==h?f:m.right;m.top-v.top<=3?i(y,m.top,b-y,m.bottom):(i(y,v.top,null,v.bottom),v.bottom<m.top&&i(c,v.bottom,null,m.top),i(c,m.top,m.right,m.bottom))}else if(t<s){var w=null==r&&0==t?f:v.right,x=null==n&&s==h?c:m.left;if(m.top-v.top<=3)i(x,m.top,w-x,m.bottom);else{var C=c;if(g){var S=hr(e,u,null,t).end;C=o(S-(/\s/.test(u.text.charAt(S-1))?2:1),"left").left}i(C,v.top,w-C,v.bottom),v.bottom<m.top&&i(c,v.bottom,null,m.top);var L=null;d.length,L=o(hr(e,u,null,s).begin,"right").right-x,i(x,m.top,L,m.bottom)}}(!l||Nr(v,l)<0)&&(l=v),Nr(m,l)<0&&(l=m),(!a||Nr(v,a)<0)&&(a=v),Nr(m,a)<0&&(a=m)}),{start:l,end:a}}var l=e.display,s=e.doc,a=document.createDocumentFragment(),u=It(e.display),c=u.left,f=Math.max(l.sizerWidth,Rt(e)-l.sizer.offsetLeft)-u.right,h=t.from(),d=t.to();if(h.line==d.line)o(h.line,h.ch,d.ch);else{var p=M(s,h.line),g=M(s,d.line),v=fe(p)==fe(g),m=o(h.line,h.ch,v?p.text.length+1:null).end,y=o(d.line,v?0:null,d.ch).start;v&&(m.top<y.top-2?(i(m.right,m.top,null,m.bottom),i(c,y.top,y.left,y.bottom)):i(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&i(c,m.bottom,null,y.top)}r.appendChild(a)}function Ar(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Wr(e){e.state.focused||(e.display.input.focus(),Hr(e))}function Dr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Fr(e))},100)}function Hr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Te(e,"focus",e,t),e.state.focused=!0,s(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),ml&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ar(e))}function Fr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Te(e,"blur",e,t),e.state.focused=!1,Fl(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Er(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i=t.view[n],o=void 0;if(!i.hidden){if(gl&&vl<8){var l=i.node.offsetTop+i.node.offsetHeight;o=l-r,r=l}else{var s=i.node.getBoundingClientRect();o=s.bottom-s.top}var a=i.line.height-o;if(o<2&&(o=mr(t)),(a>.005||a<-.005)&&(A(i.line,o),Pr(i.line),i.rest))for(var u=0;u<i.rest.length;u++)Pr(i.rest[u])}}}function Pr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function Ir(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Et(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=D(t,n),l=D(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;s<o?(o=s,l=D(t,ye(M(t,s))+e.wrapper.clientHeight)):Math.min(a,t.lastLine())>=l&&(o=D(t,ye(M(t,a))-e.wrapper.clientHeight),l=a)}return{from:o,to:Math.max(l,o+1)}}function zr(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=wr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&(r[l].gutter&&(r[l].gutter.style.left=o),r[l].gutterBackground&&(r[l].gutterBackground.style.left=o));var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function Rr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=F(e.options,t.first+t.size-1),i=e.display;if(r.length!=i.lineNumChars){var o=i.measure.appendChild(n("div",[n("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),l=o.firstChild.offsetWidth,s=o.offsetWidth-l;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(l,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?r.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",Wn(e),!0}return!1}function Br(e,t){if(!Me(e,"scrollCursorIntoView")){var r=e.display,i=r.sizer.getBoundingClientRect(),o=null;if(t.top+i.top<0?o=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Sl){var l=n("div","​",null,"position: absolute;\n                         top: "+(t.top-r.viewOffset-Et(e.display))+"px;\n                         height: "+(t.bottom-t.top+zt(e)+r.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(l),l.scrollIntoView(o),e.display.lineSpace.removeChild(l)}}}function Gr(e,t,r,n){null==n&&(n=0);var i;e.options.lineWrapping||t!=r||(r="before"==(t=t.ch?E(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?E(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var l=!1,s=sr(e,t),a=r&&r!=t?sr(e,r):s,u=Vr(e,i={left:Math.min(s.left,a.left),top:Math.min(s.top,a.top)-n,right:Math.max(s.left,a.left),bottom:Math.max(s.bottom,a.bottom)+n}),c=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=u.scrollTop&&(qr(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(l=!0)),null!=u.scrollLeft&&(Qr(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(l=!0)),!l)break}return i}function Ur(e,t){var r=Vr(e,t);null!=r.scrollTop&&qr(e,r.scrollTop),null!=r.scrollLeft&&Qr(e,r.scrollLeft)}function Vr(e,t){var r=e.display,n=mr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,o=Bt(e),l={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Pt(r),a=t.top<n,u=t.bottom>s-n;if(t.top<i)l.scrollTop=a?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?s:t.bottom)-o);c!=i&&(l.scrollTop=c)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,h=Rt(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),d=t.right-t.left>h;return d&&(t.right=t.left+h),t.left<10?l.scrollLeft=0:t.left<f?l.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>h+f-3&&(l.scrollLeft=t.right+(d?0:10)-h),l}function Kr(e,t){null!=t&&(_r(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function jr(e){_r(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Xr(e,t,r){null==t&&null==r||_r(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function Yr(e,t){_r(e),e.curOp.scrollToPos=t}function _r(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,$r(e,ar(e,t.from),ar(e,t.to),t.margin))}function $r(e,t,r,n){var i=Vr(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});Xr(e,i.scrollLeft,i.scrollTop)}function qr(e,t){Math.abs(e.doc.scrollTop-t)<2||(fl||On(e,{top:t}),Zr(e,t,!0),fl&&On(e),Cn(e,100))}function Zr(e,t,r){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Qr(e,t,r,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,zr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Jr(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Pt(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+zt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function en(e,t){t||(t=Jr(e));var r=e.display.barWidth,n=e.display.barHeight;tn(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&Er(e),tn(e,Jr(e)),r=e.display.barWidth,n=e.display.barHeight}function tn(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function rn(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Fl(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ws[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ql(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){"horizontal"==r?Qr(e,t):qr(e,t)},e),e.display.scrollbars.addClass&&s(e.display.wrapper,e.display.scrollbars.addClass)}function nn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++xs},vt(e.curOp)}function on(e){yt(e.curOp,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;ln(e)})}function ln(e){for(var t=e.ops,r=0;r<t.length;r++)sn(t[r]);for(var n=0;n<t.length;n++)an(t[n]);for(var i=0;i<t.length;i++)un(t[i]);for(var o=0;o<t.length;o++)cn(t[o]);for(var l=0;l<t.length;l++)fn(t[l])}function sn(e){var t=e.cm,r=t.display;Ln(t),e.updateMaxLine&&we(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Cs(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function an(e){e.updatedDisplay=e.mustUpdate&&Mn(e.cm,e.update)}function un(e){var t=e.cm,r=t.display;e.updatedDisplay&&Er(t),e.barMeasure=Jr(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Kt(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+zt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Rt(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function cn(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Qr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==l();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&en(t,e.barMeasure),e.updatedDisplay&&Dn(t,e.barMeasure),e.selectionChanged&&Ar(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&Wr(e.cm)}function fn(e){var t=e.cm,r=t.display,n=t.doc;e.updatedDisplay&&Nn(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&Zr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Qr(t,e.scrollLeft,!0,!0),e.scrollToPos&&Br(t,Gr(t,U(n,e.scrollToPos.from),U(n,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var l=0;l<i.length;++l)i[l].lines.length||Te(i[l],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&Te(o[s],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Te(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function hn(e,t){if(e.curOp)return t();nn(e);try{return t()}finally{on(e)}}function dn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);nn(e);try{return t.apply(e,arguments)}finally{on(e)}}}function pn(e){return function(){if(this.curOp)return e.apply(this,arguments);nn(this);try{return e.apply(this,arguments)}finally{on(this)}}}function gn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);nn(t);try{return e.apply(this,arguments)}finally{on(t)}}}function vn(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)_l&&pe(e.doc,t)<i.viewTo&&yn(e);else if(r<=i.viewFrom)_l&&ge(e.doc,r+n)>i.viewFrom?yn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)yn(e);else if(t<=i.viewFrom){var o=bn(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):yn(e)}else if(r>=i.viewTo){var l=bn(e,t,t,-1);l?(i.view=i.view.slice(0,l.index),i.viewTo=l.lineN):yn(e)}else{var s=bn(e,t,t,-1),a=bn(e,r,r+n,1);s&&a?(i.view=i.view.slice(0,s.index).concat(gt(e,s.lineN,a.lineN)).concat(i.view.slice(a.index)),i.viewTo+=n):yn(e)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:t<u.lineN+u.size&&(i.externalMeasured=null))}function mn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[Lr(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==h(l,r)&&l.push(r)}}}function yn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function bn(e,t,r,n){var i,o=Lr(e,t),l=e.display.view;if(!_l||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=e.display.viewFrom,a=0;a<o;a++)s+=l[a].size;if(s!=t){if(n>0){if(o==l.length-1)return null;i=s+l[o].size-t,o++}else i=s-t;t+=i,r+=i}for(;pe(e.doc,r)!=r;){if(o==(n<0?0:l.length-1))return null;r+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function wn(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=gt(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=gt(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Lr(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(gt(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,Lr(e,r)))),n.viewTo=r}function xn(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function Cn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,u(Sn,e))}function Sn(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=$e(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(n.line>=e.display.viewFrom){var l=o.styles,s=o.text.length>e.options.maxHighlightLength?Ke(t.mode,n.state):null,a=Ye(e,o,n,!0);s&&(n.state=s),o.styles=a.styles;var u=o.styleClasses,c=a.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var f=!l||l.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),h=0;!f&&h<l.length;++h)f=l[h]!=o.styles[h];f&&i.push(n.line),o.stateAfter=n.save(),n.nextLine()}else o.text.length<=e.options.maxHighlightLength&&qe(e,o.text,n),o.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return Cn(e,e.options.workDelay),!0}),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&hn(e,function(){for(var t=0;t<i.length;t++)mn(e,i[t],"text")})}}function Ln(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=zt(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=zt(e)+"px",t.scrollbarsClipped=!0)}function kn(e){if(e.hasFocus())return null;var t=l();if(!t||!o(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&o(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}function Tn(e){if(e&&e.activeElt&&e.activeElt!=l()&&(e.activeElt.focus(),e.anchorNode&&o(document.body,e.anchorNode)&&o(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}function Mn(e,r){var n=e.display,i=e.doc;if(r.editorIsHidden)return yn(e),!1;if(!r.force&&r.visible.from>=n.viewFrom&&r.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==xn(e))return!1;Rr(e)&&(yn(e),r.dims=br(e));var o=i.first+i.size,l=Math.max(r.visible.from-e.options.viewportMargin,i.first),s=Math.min(o,r.visible.to+e.options.viewportMargin);n.viewFrom<l&&l-n.viewFrom<20&&(l=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(o,n.viewTo)),_l&&(l=pe(e.doc,l),s=ge(e.doc,s));var a=l!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=r.wrapperHeight||n.lastWrapWidth!=r.wrapperWidth;wn(e,l,s),n.viewOffset=ye(M(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var u=xn(e);if(!a&&0==u&&!r.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=kn(e);return u>4&&(n.lineDiv.style.display="none"),An(e,n.updateLineNumbers,r.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Tn(c),t(n.cursorDiv),t(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=r.wrapperHeight,n.lastWrapWidth=r.wrapperWidth,Cn(e,400)),n.updateLineNumbers=null,!0}function Nn(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Rt(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Pt(e.display)-Bt(e),r.top)}),t.visible=Ir(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Mn(e,t);n=!1){Er(e);var i=Jr(e);kr(e),en(e,i),Dn(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function On(e,t){var r=new Cs(e,t);if(Mn(e,r)){Er(e),Nn(e,r);var n=Jr(e);kr(e),en(e,n),Dn(e,n),r.finish()}}function An(e,r,n){function i(t){var r=t.nextSibling;return ml&&Ml&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var o=e.display,l=e.options.lineNumbers,s=o.lineDiv,a=s.firstChild,u=o.view,c=o.viewFrom,f=0;f<u.length;f++){var d=u[f];if(d.hidden);else if(d.node&&d.node.parentNode==s){for(;a!=d.node;)a=i(a);var p=l&&null!=r&&r<=c&&d.lineNumber;d.changes&&(h(d.changes,"gutter")>-1&&(p=!1),xt(e,d,c,n)),p&&(t(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(F(e.options,c)))),a=d.node.nextSibling}else{var g=Ot(e,d,c,n);s.insertBefore(g,a)}c+=d.size}for(;a;)a=i(a)}function Wn(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function Dn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+zt(e)+"px"}function Hn(e){var r=e.display.gutters,i=e.options.gutters;t(r);for(var o=0;o<i.length;++o){var l=i[o],s=r.appendChild(n("div",null,"CodeMirror-gutter "+l));"CodeMirror-linenumbers"==l&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}r.style.display=o?"":"none",Wn(e)}function Fn(e){var t=h(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function En(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function Pn(e){var t=En(e);return t.x*=Ls,t.y*=Ls,t}function In(e,t){var r=En(t),n=r.x,i=r.y,o=e.display,l=o.scroller,s=l.scrollWidth>l.clientWidth,a=l.scrollHeight>l.clientHeight;if(n&&s||i&&a){if(i&&Ml&&ml)e:for(var u=t.target,c=o.view;u!=l;u=u.parentNode)for(var f=0;f<c.length;f++)if(c[f].node==u){e.display.currentWheelTarget=u;break e}if(n&&!fl&&!wl&&null!=Ls)return i&&a&&qr(e,Math.max(0,l.scrollTop+i*Ls)),Qr(e,Math.max(0,l.scrollLeft+n*Ls)),(!i||i&&a)&&We(t),void(o.wheelStartX=null);if(i&&null!=Ls){var h=i*Ls,d=e.doc.scrollTop,p=d+o.wrapper.clientHeight;h<0?d=Math.max(0,d+h-50):p=Math.min(e.doc.height,p+h+50),On(e,{top:d,bottom:p})}Ss<20&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=n,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var e=l.scrollLeft-o.wheelStartX,t=l.scrollTop-o.wheelStartY,r=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(Ls=(Ls*Ss+r)/(Ss+1),++Ss)}},200)):(o.wheelDX+=n,o.wheelDY+=i))}}function zn(e,t){var r=e[t];e.sort(function(e,t){return P(e.from(),t.from())}),t=h(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(P(o.to(),i.from())>=0){var l=B(o.from(),i.from()),s=R(o.to(),i.to()),a=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new Ts(a?s:l,a?l:s))}}return new ks(e,t)}function Rn(e,t){return new ks([new Ts(e,t||e)],0)}function Bn(e){return e.text?E(e.from.line+e.text.length-1,g(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Gn(e,t){if(P(e,t.from)<0)return e;if(P(e,t.to)<=0)return Bn(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Bn(t).ch-t.to.ch),E(r,n)}function Un(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new Ts(Gn(i.anchor,t),Gn(i.head,t)))}return zn(r,e.sel.primIndex)}function Vn(e,t,r){return e.line==t.line?E(r.line,e.ch-t.ch+r.ch):E(r.line+(e.line-t.line),e.ch)}function Kn(e,t,r){for(var n=[],i=E(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=Vn(s.from,i,o),u=Vn(Bn(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[l],f=P(c.head,c.anchor)<0;n[l]=new Ts(f?u:a,f?a:u)}else n[l]=new Ts(a,a)}return new ks(n,e.sel.primIndex)}function jn(e){e.doc.mode=Ue(e.options,e.doc.modeOption),Xn(e)}function Xn(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Cn(e,100),e.state.modeGen++,e.curOp&&vn(e)}function Yn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==g(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function _n(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){it(e,r,i,n),bt(e,"change",e,t)}function l(e,t){for(var r=[],o=e;o<t;++o)r.push(new fs(u[o],i(o),n));return r}var s=t.from,a=t.to,u=t.text,c=M(e,s.line),f=M(e,a.line),h=g(u),d=i(u.length-1),p=a.line-s.line;if(t.full)e.insert(0,l(0,u.length)),e.remove(u.length,e.size-u.length);else if(Yn(e,t)){var v=l(0,u.length-1);o(f,f.text,d),p&&e.remove(s.line,p),v.length&&e.insert(s.line,v)}else if(c==f)if(1==u.length)o(c,c.text.slice(0,s.ch)+h+c.text.slice(a.ch),d);else{var m=l(1,u.length-1);m.push(new fs(h+c.text.slice(a.ch),d,n)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+f.text.slice(a.ch),i(0)),e.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(f,h+f.text.slice(a.ch),d);var y=l(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,y)}bt(e,"change",e,t)}function $n(e,t,r){function n(e,i,o){if(e.linked)for(var l=0;l<e.linked.length;++l){var s=e.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;r&&!a||(t(s.doc,a),n(s.doc,e,a))}}}n(e,null,!0)}function qn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Cr(e),jn(e),Zn(e),e.options.lineWrapping||we(e),e.options.mode=t.modeOption,vn(e)}function Zn(e){("rtl"==e.doc.direction?s:Fl)(e.display.lineDiv,"CodeMirror-rtl")}function Qn(e){hn(e,function(){Zn(e),vn(e)})}function Jn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ei(e,t){var r={from:z(t.from),to:Bn(t),text:N(e,t.from,t.to)};return si(e,r,t.from.line,t.to.line+1),$n(e,function(e){return si(e,r,t.from.line,t.to.line+1)},!0),r}function ti(e){for(;e.length&&g(e).ranges;)e.pop()}function ri(e,t){return t?(ti(e.done),g(e.done)):e.done.length&&!g(e.done).ranges?g(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),g(e.done)):void 0}function ni(e,t,r,n){var i=e.history;i.undone.length=0;var o,l,s=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=ri(i,i.lastOp==n)))l=g(o.changes),0==P(t.from,t.to)&&0==P(t.from,l.to)?l.to=Bn(t):o.changes.push(ei(e,t));else{var a=g(i.done);for(a&&a.ranges||li(e.sel,i.done),o={changes:[ei(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,l||Te(e,"historyAdded")}function ii(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function oi(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||ii(e,o,g(i.done),t))?i.done[i.done.length-1]=t:li(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&!1!==n.clearRedo&&ti(i.undone)}function li(e,t){var r=g(t);r&&r.ranges&&r.equals(e)||t.push(e)}function si(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function ai(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function ui(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(ai(r[i]));return n}function ci(e,t){var r=ui(e,t),n=J(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function fi(e,t,r){for(var n=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)n.push(r?ks.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];n.push({changes:s});for(var a=0;a<l.length;++a){var u=l[a],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var f in u)(c=f.match(/^spans_(\d+)$/))&&h(t,Number(c[1]))>-1&&(g(s)[f]=u[f],delete u[f])}}}return n}function hi(e,t,r,n){if(n){var i=e.anchor;if(r){var o=P(t,i)<0;o!=P(r,i)<0?(i=t,t=r):o!=P(t,r)<0&&(t=r)}return new Ts(i,t)}return new Ts(r||t,t)}function di(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),bi(e,new ks([hi(e.sel.primary(),t,r,i)],0),n)}function pi(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)n[o]=hi(e.sel.ranges[o],t[o],null,i);bi(e,zn(n,e.sel.primIndex),r)}function gi(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,bi(e,zn(i,e.sel.primIndex),n)}function vi(e,t,r,n){bi(e,Rn(t,r),n)}function mi(e,t,r){var n={ranges:t.ranges,update:function(t){var r=this;this.ranges=[];for(var n=0;n<t.length;n++)r.ranges[n]=new Ts(U(e,t[n].anchor),U(e,t[n].head))},origin:r&&r.origin};return Te(e,"beforeSelectionChange",e,n),e.cm&&Te(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?zn(n.ranges,n.ranges.length-1):t}function yi(e,t,r){var n=e.history.done,i=g(n);i&&i.ranges?(n[n.length-1]=t,wi(e,t,r)):bi(e,t,r)}function bi(e,t,r){wi(e,t,r),oi(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function wi(e,t,r){(Oe(e,"beforeSelectionChange")||e.cm&&Oe(e.cm,"beforeSelectionChange"))&&(t=mi(e,t,r)),xi(e,Si(e,t,r&&r.bias||(P(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),r&&!1===r.scroll||!e.cm||jr(e.cm)}function xi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Ne(e.cm)),bt(e,"cursorActivity",e))}function Ci(e){xi(e,Si(e,e.sel,null,!1))}function Si(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],a=ki(e,l.anchor,s&&s.anchor,r,n),u=ki(e,l.head,s&&s.head,r,n);(i||a!=l.anchor||u!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Ts(a,u))}return i?zn(i,t.primIndex):t}function Li(e,t,r,n,i){var o=M(e,t.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var s=o.markedSpans[l],a=s.marker;if((null==s.from||(a.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(a.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(Te(a,"beforeCursorEnter"),a.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(!a.atomic)continue;if(r){var u=a.find(n<0?1:-1),c=void 0;if((n<0?a.inclusiveRight:a.inclusiveLeft)&&(u=Ti(e,u,-n,u&&u.line==t.line?o:null)),u&&u.line==t.line&&(c=P(u,r))&&(n<0?c<0:c>0))return Li(e,u,t,n,i)}var f=a.find(n<0?-1:1);return(n<0?a.inclusiveLeft:a.inclusiveRight)&&(f=Ti(e,f,n,f.line==t.line?o:null)),f?Li(e,f,t,n,i):null}}return t}function ki(e,t,r,n,i){var o=n||1,l=Li(e,t,r,o,i)||!i&&Li(e,t,r,o,!0)||Li(e,t,r,-o,i)||!i&&Li(e,t,r,-o,!0);return l||(e.cantEdit=!0,E(e.first,0))}function Ti(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?U(e,E(t.line-1)):null:r>0&&t.ch==(n||M(e,t.line)).text.length?t.line<e.first+e.size-1?E(t.line+1,0):null:new E(t.line,t.ch+r)}function Mi(e){e.setSelection(E(e.firstLine(),0),E(e.lastLine()),Gl)}function Ni(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(t,r,i,o){t&&(n.from=U(e,t)),r&&(n.to=U(e,r)),i&&(n.text=i),void 0!==o&&(n.origin=o)}),Te(e,"beforeChange",e,n),e.cm&&Te(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Oi(e,t,r){if(e.cm){if(!e.cm.curOp)return dn(e.cm,Oi)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(Oe(e,"beforeChange")||e.cm&&Oe(e.cm,"beforeChange"))||(t=Ni(e,t,!0))){var n=Yl&&!r&&te(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)Ai(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else Ai(e,t)}}function Ai(e,t){if(1!=t.text.length||""!=t.text[0]||0!=P(t.from,t.to)){var r=Un(e,t);ni(e,t,r,e.cm?e.cm.curOp.id:NaN),Hi(e,t,r,J(e,t));var n=[];$n(e,function(e,r){r||-1!=h(n,e.history)||(zi(e.history,t),n.push(e.history)),Hi(e,t,null,J(e,t))})}}function Wi(e,t,r){if(!e.cm||!e.cm.state.suppressEdits||r){for(var n,i=e.history,o=e.sel,l="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,a=0;a<l.length&&(n=l[a],r?!n.ranges||n.equals(e.sel):n.ranges);a++);if(a!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;(n=l.pop()).ranges;){if(li(n,s),r&&!n.equals(e.sel))return void bi(e,n,{clearRedo:!1});o=n}var u=[];li(o,s),s.push({changes:u,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var c=Oe(e,"beforeChange")||e.cm&&Oe(e.cm,"beforeChange"),f=n.changes.length-1;f>=0;--f){var d=function(r){var i=n.changes[r];if(i.origin=t,c&&!Ni(e,i,!1))return l.length=0,{};u.push(ei(e,i));var o=r?Un(e,i):g(l);Hi(e,i,o,ci(e,i)),!r&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Bn(i)});var s=[];$n(e,function(e,t){t||-1!=h(s,e.history)||(zi(e.history,i),s.push(e.history)),Hi(e,i,null,ci(e,i))})}(f);if(d)return d.v}}}}function Di(e,t){if(0!=t&&(e.first+=t,e.sel=new ks(v(e.sel.ranges,function(e){return new Ts(E(e.anchor.line+t,e.anchor.ch),E(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){vn(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)mn(e.cm,n,"gutter")}}function Hi(e,t,r,n){if(e.cm&&!e.cm.curOp)return dn(e.cm,Hi)(e,t,r,n);if(t.to.line<e.first)Di(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Di(e,i),t={from:E(e.first,0),to:E(t.to.line+i,t.to.ch),text:[g(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:E(o,M(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=N(e,t.from,t.to),r||(r=Un(e,t)),e.cm?Fi(e.cm,t,n):_n(e,t,n),wi(e,r,Gl)}}function Fi(e,t,r){var n=e.doc,i=e.display,o=t.from,l=t.to,s=!1,a=o.line;e.options.lineWrapping||(a=W(fe(M(n,o.line))),n.iter(a,l.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),n.sel.contains(t.from,t.to)>-1&&Ne(e),_n(n,t,r,xr(e)),e.options.lineWrapping||(n.iter(a,o.line+t.text.length,function(e){var t=be(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),nt(n,o.line),Cn(e,400);var u=t.text.length-(l.line-o.line)-1;t.full?vn(e):o.line!=l.line||1!=t.text.length||Yn(e.doc,t)?vn(e,o.line,l.line+1,u):mn(e,o.line,"text");var c=Oe(e,"changes"),f=Oe(e,"change");if(f||c){var h={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin};f&&bt(e,"change",e,h),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function Ei(e,t,r,n,i){if(n||(n=r),P(n,r)<0){var o;r=(o=[n,r])[0],n=o[1]}"string"==typeof t&&(t=e.splitLines(t)),Oi(e,{from:r,to:n,text:t,origin:i})}function Pi(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Ii(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)Pi(o.ranges[s].anchor,t,r,n),Pi(o.ranges[s].head,t,r,n)}else{for(var a=0;a<o.changes.length;++a){var u=o.changes[a];if(r<u.from.line)u.from=E(u.from.line+n,u.from.ch),u.to=E(u.to.line+n,u.to.ch);else if(t<=u.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function zi(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;Ii(e.done,r,n,i),Ii(e.undone,r,n,i)}function Ri(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=M(e,G(e,t)):i=W(t),null==i?null:(n(o,i)&&e.cm&&mn(e.cm,i,r),o)}function Bi(e){var t=this;this.lines=e,this.parent=null;for(var r=0,n=0;n<e.length;++n)e[n].parent=t,r+=e[n].height;this.height=r}function Gi(e){var t=this;this.children=e;for(var r=0,n=0,i=0;i<e.length;++i){var o=e[i];r+=o.chunkSize(),n+=o.height,o.parent=t}this.size=r,this.height=n,this.parent=null}function Ui(e,t,r){ye(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Kr(e,r)}function Vi(e,t,r,n){var i=new Ms(e,r,n),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),Ri(e,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!ve(e,t)){var n=ye(t)<e.scrollTop;A(t,t.height+Ht(i)),n&&Kr(o,i.height),o.curOp.forceUpdate=!0}return!0}),bt(o,"lineWidgetAdded",o,i,"number"==typeof t?t:W(t)),i}function Ki(e,t,r,n,o){if(n&&n.shared)return ji(e,t,r,n,o);if(e.cm&&!e.cm.curOp)return dn(e.cm,Ki)(e,t,r,n,o);var l=new Os(e,o),s=P(t,r);if(n&&c(n,l,!1),s>0||0==s&&!1!==l.clearWhenEmpty)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=i("span",[l.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(ce(e,t.line,t,r,l)||t.line!=r.line&&ce(e,r.line,t,r,l))throw new Error("Inserting collapsed marker partially overlapping an existing one");X()}l.addToHistory&&ni(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var a,u=t.line,f=e.cm;if(e.iter(u,r.line+1,function(e){f&&l.collapsed&&!f.options.lineWrapping&&fe(e)==f.display.maxLine&&(a=!0),l.collapsed&&u!=t.line&&A(e,0),q(e,new Y(l,u==t.line?t.ch:null,u==r.line?r.ch:null)),++u}),l.collapsed&&e.iter(t.line,r.line+1,function(t){ve(e,t)&&A(t,0)}),l.clearOnEnter&&Ql(l,"beforeCursorEnter",function(){return l.clear()}),l.readOnly&&(j(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++Ns,l.atomic=!0),f){if(a&&(f.curOp.updateMaxLine=!0),l.collapsed)vn(f,t.line,r.line+1);else if(l.className||l.title||l.startStyle||l.endStyle||l.css)for(var h=t.line;h<=r.line;h++)mn(f,h,"text");l.atomic&&Ci(f.doc),bt(f,"markerAdded",f,l)}return l}function ji(e,t,r,n,i){(n=c(n)).shared=!1;var o=[Ki(e,t,r,n,i)],l=o[0],s=n.widgetNode;return $n(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(Ki(e,U(e,t),U(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=g(o)}),new As(o,l)}function Xi(e){return e.findMarks(E(e.first,0),e.clipPos(E(e.lastLine())),function(e){return e.parent})}function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(P(o,l)){var s=Ki(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function _i(e){for(var t=0;t<e.length;t++)!function(t){var r=e[t],n=[r.primary.doc];$n(r.primary.doc,function(e){return n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==h(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}}(t)}function $i(e){var t=this;if(Qi(t),!Me(t,e)&&!Ft(t.display,e)){We(e),gl&&(Hs=+new Date);var r=Sr(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=0;s<i;++s)!function(e,n){if(!t.options.allowDropFileTypes||-1!=h(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=dn(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[n]=e,++l==i){var a={from:r=U(t.doc,r),to:r,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Oi(t.doc,a),yi(t.doc,Rn(r,Bn(a)))}}),s.readAsText(e)}}(n[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var a=e.dataTransfer.getData("Text");if(a){var u;if(t.state.draggingText&&!t.state.draggingText.copy&&(u=t.listSelections()),wi(t.doc,Rn(r,r)),u)for(var c=0;c<u.length;++c)Ei(t.doc,"",u[c].anchor,u[c].head,"drag");t.replaceSelection(a,"around","paste"),t.display.input.focus()}}catch(e){}}}}function qi(e,t){if(gl&&(!e.state.draggingText||+new Date-Hs<100))Fe(t);else if(!Me(e,t)&&!Ft(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!xl)){var r=n("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",wl&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),wl&&r.parentNode.removeChild(r)}}function Zi(e,t){var i=Sr(e,t);if(i){var o=document.createDocumentFragment();Mr(e,i,o),e.display.dragCursor||(e.display.dragCursor=n("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),r(e.display.dragCursor,o)}}function Qi(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ji(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}function eo(){Fs||(to(),Fs=!0)}function to(){var e;Ql(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ji(ro)},100))}),Ql(window,"blur",function(){return Ji(Fr)})}function ro(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function no(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var r,n,i,o,l=0;l<t.length-1;l++){var s=t[l];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))r=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return r&&(e="Alt-"+e),n&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function io(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=v(r.split(" "),no),o=0;o<i.length;o++){var l=void 0,s=void 0;o==i.length-1?(s=i.join(" "),l=n):(s=i.slice(0,o+1).join(" "),l="...");var a=t[s];if(a){if(a!=l)throw new Error("Inconsistent bindings for "+s)}else t[s]=l}delete e[r]}for(var u in t)e[u]=t[u];return e}function oo(e,t,r,n){var i=(t=uo(t)).call?t.call(e,n):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return oo(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var l=oo(e,t.fallthrough[o],r,n);if(l)return l}}}function lo(e){var t="string"==typeof e?e:Es[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function so(e,t,r){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(Dl?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(Dl?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(e="Cmd-"+e),!r&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function ao(e,t){if(wl&&34==e.keyCode&&e.char)return!1;var r=Es[e.keyCode];return null!=r&&!e.altGraphKey&&so(r,e,t)}function uo(e){return"string"==typeof e?Rs[e]:e}function co(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&P(o.from,g(n).to)<=0;){var l=n.pop();if(P(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}hn(e,function(){for(var t=n.length-1;t>=0;t--)Ei(e.doc,"",n[t].from,n[t].to,"+delete");jr(e)})}function fo(e,t,r){var n=L(e.text,t+r,r);return n<0||n>e.text.length?null:n}function ho(e,t,r){var n=fo(e,t.ch,r);return null==n?null:new E(t.line,n,r<0?"after":"before")}function po(e,t,r,n,i){if(e){var o=Se(r,t.doc.direction);if(o){var l,s=i<0?g(o):o[0],a=i<0==(1==s.level)?"after":"before";if(s.level>0){var u=Xt(t,r);l=i<0?r.text.length-1:0;var c=Yt(t,u,l).top;l=k(function(e){return Yt(t,u,e).top==c},i<0==(1==s.level)?s.from:s.to-1,l),"before"==a&&(l=fo(r,l,1))}else l=i<0?s.to:s.from;return new E(n,l,a)}}return new E(n,i<0?r.text.length:0,i<0?"before":"after")}function go(e,t,r,n){var i=Se(t,e.doc.direction);if(!i)return ho(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var o=Ce(i,r.ch,r.sticky),l=i[o];if("ltr"==e.doc.direction&&l.level%2==0&&(n>0?l.to>r.ch:l.from<r.ch))return ho(t,r,n);var s,a=function(e,r){return fo(t,e instanceof E?e.ch:e,r)},u=function(r){return e.options.lineWrapping?(s=s||Xt(e,t),hr(e,t,s,r)):{begin:0,end:t.text.length}},c=u("before"==r.sticky?a(r,-1):r.ch);if("rtl"==e.doc.direction||1==l.level){var f=1==l.level==n<0,h=a(r,f?1:-1);if(null!=h&&(f?h<=l.to&&h<=c.end:h>=l.from&&h>=c.begin)){var d=f?"before":"after";return new E(r.line,h,d)}}var p=function(e,t,n){for(var o=function(e,t){return t?new E(r.line,a(e,1),"before"):new E(r.line,e,"after")};e>=0&&e<i.length;e+=t){var l=i[e],s=t>0==(1!=l.level),u=s?n.begin:a(n.end,-1);if(l.from<=u&&u<l.to)return o(u,s);if(u=s?l.from:a(l.to,-1),n.begin<=u&&u<n.end)return o(u,s)}},g=p(o+n,n,c);if(g)return g;var v=n>0?c.end:a(c.begin,-1);return null==v||n>0&&v==t.text.length||!(g=p(n>0?0:i.length-1,n,u(v)))?null:g}function vo(e,t){var r=M(e.doc,t),n=fe(r);return n!=r&&(t=W(n)),po(!0,e,n,t,1)}function mo(e,t){var r=M(e.doc,t),n=he(r);return n!=r&&(t=W(n)),po(!0,e,r,t,-1)}function yo(e,t){var r=vo(e,t.line),n=M(e.doc,r.line),i=Se(n,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return E(r.line,l?0:o,r.sticky)}return r}function bo(e,t,r){if("string"==typeof t&&!(t=Bs[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=Bl}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function wo(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=oo(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&oo(t,e.options.extraKeys,r,e)||oo(t,e.options.keyMap,r,e)}function xo(e,t,r,n){var i=e.state.keySeq;if(i){if(lo(t))return"handled";Gs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var o=wo(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&bt(e,"keyHandled",e,t,r),"handled"!=o&&"multi"!=o||(We(r),Ar(e)),i&&!o&&/\'$/.test(t)?(We(r),!0):!!o}function Co(e,t){var r=ao(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?xo(e,"Shift-"+r,t,function(t){return bo(e,t,!0)})||xo(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return bo(e,t)}):xo(e,r,t,function(t){return bo(e,t)}))}function So(e,t,r){return xo(e,"'"+r+"'",t,function(t){return bo(e,t,!0)})}function Lo(e){var t=this;if(t.curOp.focus=l(),!Me(t,e)){gl&&vl<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=Co(t,e);wl&&(Us=n?r:null,!n&&88==r&&!rs&&(Ml?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||ko(t)}}function ko(e){function t(e){18!=e.keyCode&&e.altKey||(Fl(r,"CodeMirror-crosshair"),ke(document,"keyup",t),ke(document,"mouseover",t))}var r=e.display.lineDiv;s(r,"CodeMirror-crosshair"),Ql(document,"keyup",t),Ql(document,"mouseover",t)}function To(e){16==e.keyCode&&(this.doc.sel.shift=!1),Me(this,e)}function Mo(e){var t=this;if(!(Ft(t.display,e)||Me(t,e)||e.ctrlKey&&!e.altKey||Ml&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(wl&&r==Us)return Us=null,void We(e);if(!wl||e.which&&!(e.which<10)||!Co(t,e)){var i=String.fromCharCode(null==n?r:n);"\b"!=i&&(So(t,e,i)||t.display.input.onKeyPress(e))}}}function No(e,t){var r=+new Date;return js&&js.compare(r,e,t)?(Ks=js=null,"triple"):Ks&&Ks.compare(r,e,t)?(js=new Vs(r,e,t),Ks=null,"double"):(Ks=new Vs(r,e,t),js=null,"single")}function Oo(e){var t=this,r=t.display;if(!(Me(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=e.shiftKey,Ft(r,e))ml||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));else if(!zo(t,e)){var n=Sr(t,e),i=Pe(e),o=n?No(n,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),n&&Ao(t,i,n,o,e)||(1==i?n?Do(t,n,o,e):Ee(e)==r.scroller&&We(e):2==i?(n&&di(t.doc,n),setTimeout(function(){return r.input.focus()},20)):3==i&&(Hl?Ro(t,e):Dr(t)))}}function Ao(e,t,r,n,i){var o="Click";return"double"==n?o="Double"+o:"triple"==n&&(o="Triple"+o),o=(1==t?"Left":2==t?"Middle":"Right")+o,xo(e,so(o,i),i,function(t){if("string"==typeof t&&(t=Bs[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,r)!=Bl}finally{e.state.suppressEdits=!1}return n})}function Wo(e,t,r){var n=e.getOption("configureMouse"),i=n?n(e,t,r):{};if(null==i.unit){var o=Nl?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey),null==i.addNew&&(i.addNew=Ml?r.metaKey:r.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(Ml?r.altKey:r.ctrlKey)),i}function Do(e,t,r,n){gl?setTimeout(u(Wr,e),0):e.curOp.focus=l();var i,o=Wo(e,r,n),s=e.doc.sel;e.options.dragDrop&&Jl&&!e.isReadOnly()&&"single"==r&&(i=s.contains(t))>-1&&(P((i=s.ranges[i]).from(),t)<0||t.xRel>0)&&(P(i.to(),t)>0||t.xRel<0)?Ho(e,n,t,o):Eo(e,n,t,o)}function Ho(e,t,r,n){var i=e.display,o=!1,l=dn(e,function(t){ml&&(i.scroller.draggable=!1),e.state.draggingText=!1,ke(document,"mouseup",l),ke(document,"mousemove",s),ke(i.scroller,"dragstart",a),ke(i.scroller,"drop",l),o||(We(t),n.addNew||di(e.doc,r,null,null,n.extend),ml||gl&&9==vl?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())}),s=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},a=function(){return o=!0};ml&&(i.scroller.draggable=!0),e.state.draggingText=l,l.copy=!n.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),Ql(document,"mouseup",l),Ql(document,"mousemove",s),Ql(i.scroller,"dragstart",a),Ql(i.scroller,"drop",l),Dr(e),setTimeout(function(){return i.input.focus()},20)}function Fo(e,t,r){if("char"==r)return new Ts(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new Ts(E(t.line,0),U(e.doc,E(t.line+1,0)));var n=r(e,t);return new Ts(n.from,n.to)}function Eo(e,t,r,n){function i(t){if(0!=P(m,t))if(m=t,"rectangle"==n.unit){for(var i=[],o=e.options.tabSize,l=f(M(u,r.line).text,r.ch,o),s=f(M(u,t.line).text,t.ch,o),a=Math.min(l,s),g=Math.max(l,s),v=Math.min(r.line,t.line),y=Math.min(e.lastLine(),Math.max(r.line,t.line));v<=y;v++){var b=M(u,v).text,w=d(b,a,o);a==g?i.push(new Ts(E(v,w),E(v,w))):b.length>w&&i.push(new Ts(E(v,w),E(v,d(b,g,o))))}i.length||i.push(new Ts(r,r)),bi(u,zn(p.ranges.slice(0,h).concat(i),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var x,C=c,S=Fo(e,t,n.unit),L=C.anchor;P(S.anchor,L)>0?(x=S.head,L=B(C.from(),S.anchor)):(x=S.anchor,L=R(C.to(),S.head));var k=p.ranges.slice(0);k[h]=Po(e,new Ts(U(u,L),x)),bi(u,zn(k,h),Ul)}}function o(t){var r=++b,s=Sr(e,t,!0,"rectangle"==n.unit);if(s)if(0!=P(s,m)){e.curOp.focus=l(),i(s);var c=Ir(a,u);(s.line>=c.to||s.line<c.from)&&setTimeout(dn(e,function(){b==r&&o(t)}),150)}else{var f=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;f&&setTimeout(dn(e,function(){b==r&&(a.scroller.scrollTop+=f,o(t))}),50)}}function s(t){e.state.selectingText=!1,b=1/0,We(t),a.input.focus(),ke(document,"mousemove",w),ke(document,"mouseup",x),u.history.lastSelOrigin=null}var a=e.display,u=e.doc;We(t);var c,h,p=u.sel,g=p.ranges;if(n.addNew&&!n.extend?(h=u.sel.contains(r),c=h>-1?g[h]:new Ts(r,r)):(c=u.sel.primary(),h=u.sel.primIndex),"rectangle"==n.unit)n.addNew||(c=new Ts(r,r)),r=Sr(e,t,!0,!0),h=-1;else{var v=Fo(e,r,n.unit);c=n.extend?hi(c,v.anchor,v.head,n.extend):v}n.addNew?-1==h?(h=g.length,bi(u,zn(g.concat([c]),h),{scroll:!1,origin:"*mouse"})):g.length>1&&g[h].empty()&&"char"==n.unit&&!n.extend?(bi(u,zn(g.slice(0,h).concat(g.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),p=u.sel):gi(u,h,c,Ul):(h=0,bi(u,new ks([c],0),Ul),p=u.sel);var m=r,y=a.wrapper.getBoundingClientRect(),b=0,w=dn(e,function(e){Pe(e)?o(e):s(e)}),x=dn(e,s);e.state.selectingText=x,Ql(document,"mousemove",w),Ql(document,"mouseup",x)}function Po(e,t){var r=t.anchor,n=t.head,i=M(e.doc,r.line);if(0==P(r,n)&&r.sticky==n.sticky)return t;var o=Se(i);if(!o)return t;var l=Ce(o,r.ch,r.sticky),s=o[l];if(s.from!=r.ch&&s.to!=r.ch)return t;var a=l+(s.from==r.ch==(1!=s.level)?0:1);if(0==a||a==o.length)return t;var u;if(n.line!=r.line)u=(n.line-r.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=Ce(o,n.ch,n.sticky),f=c-l||(n.ch-r.ch)*(1==s.level?-1:1);u=c==a-1||c==a?f<0:f>0}var h=o[a+(u?-1:0)],d=u==(1==h.level),p=d?h.from:h.to,g=d?"after":"before";return r.ch==p&&r.sticky==g?t:new Ts(new E(r.line,p,g),n)}function Io(e,t,r,n){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&We(t);var l=e.display,s=l.lineDiv.getBoundingClientRect();if(o>s.bottom||!Oe(e,r))return He(t);o-=s.top-l.viewOffset;for(var a=0;a<e.options.gutters.length;++a){var u=l.gutters.childNodes[a];if(u&&u.getBoundingClientRect().right>=i)return Te(e,r,e,D(e.doc,o),e.options.gutters[a],t),He(t)}}function zo(e,t){return Io(e,t,"gutterClick",!0)}function Ro(e,t){Ft(e.display,t)||Bo(e,t)||Me(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function Bo(e,t){return!!Oe(e,"gutterContextMenu")&&Io(e,t,"gutterContextMenu",!1)}function Go(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),er(e)}function Uo(e){Hn(e),vn(e),zr(e)}function Vo(e,t,r){if(!t!=!(r&&r!=Xs)){var n=e.display.dragFunctions,i=t?Ql:ke;i(e.display.scroller,"dragstart",n.start),i(e.display.scroller,"dragenter",n.enter),i(e.display.scroller,"dragover",n.over),i(e.display.scroller,"dragleave",n.leave),i(e.display.scroller,"drop",n.drop)}}function Ko(e){e.options.lineWrapping?(s(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Fl(e.display.wrapper,"CodeMirror-wrap"),we(e)),Cr(e),vn(e),er(e),setTimeout(function(){return en(e)},100)}function jo(e,t){var r=this;if(!(this instanceof jo))return new jo(e,t);this.options=t=t?c(t):{},c(Ys,t,!1),Fn(t);var n=t.value;"string"==typeof n&&(n=new Ds(n,t.mode,null,t.lineSeparator,t.direction)),this.doc=n;var i=new jo.inputStyles[t.inputStyle](this),o=this.display=new T(e,n,i);o.wrapper.CodeMirror=this,Hn(this),Go(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),rn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Pl,keySeq:null,specialChars:null},t.autofocus&&!Tl&&o.input.focus(),gl&&vl<11&&setTimeout(function(){return r.display.input.reset(!0)},20),Xo(this),eo(),nn(this),this.curOp.forceUpdate=!0,qn(this,n),t.autofocus&&!Tl||this.hasFocus()?setTimeout(u(Hr,this),20):Fr(this);for(var l in _s)_s.hasOwnProperty(l)&&_s[l](r,t[l],Xs);Rr(this),t.finishInit&&t.finishInit(this);for(var s=0;s<$s.length;++s)$s[s](r);on(this),ml&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function Xo(e){function t(){i.activeTouch&&(o=setTimeout(function(){return i.activeTouch=null},1e3),(l=i.activeTouch).end=+new Date)}function r(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function n(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}var i=e.display;Ql(i.scroller,"mousedown",dn(e,Oo)),gl&&vl<11?Ql(i.scroller,"dblclick",dn(e,function(t){if(!Me(e,t)){var r=Sr(e,t);if(r&&!zo(e,t)&&!Ft(e.display,t)){We(t);var n=e.findWordAt(r);di(e.doc,n.anchor,n.head)}}})):Ql(i.scroller,"dblclick",function(t){return Me(e,t)||We(t)}),Hl||Ql(i.scroller,"contextmenu",function(t){return Ro(e,t)});var o,l={end:0};Ql(i.scroller,"touchstart",function(t){if(!Me(e,t)&&!r(t)&&!zo(e,t)){i.input.ensurePolled(),clearTimeout(o);var n=+new Date;i.activeTouch={start:n,moved:!1,prev:n-l.end<=300?l:null},1==t.touches.length&&(i.activeTouch.left=t.touches[0].pageX,i.activeTouch.top=t.touches[0].pageY)}}),Ql(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),Ql(i.scroller,"touchend",function(r){var o=i.activeTouch;if(o&&!Ft(i,r)&&null!=o.left&&!o.moved&&new Date-o.start<300){var l,s=e.coordsChar(i.activeTouch,"page");l=!o.prev||n(o,o.prev)?new Ts(s,s):!o.prev.prev||n(o,o.prev.prev)?e.findWordAt(s):new Ts(E(s.line,0),U(e.doc,E(s.line+1,0))),e.setSelection(l.anchor,l.head),e.focus(),We(r)}t()}),Ql(i.scroller,"touchcancel",t),Ql(i.scroller,"scroll",function(){i.scroller.clientHeight&&(qr(e,i.scroller.scrollTop),Qr(e,i.scroller.scrollLeft,!0),Te(e,"scroll",e))}),Ql(i.scroller,"mousewheel",function(t){return In(e,t)}),Ql(i.scroller,"DOMMouseScroll",function(t){return In(e,t)}),Ql(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(t){Me(e,t)||Fe(t)},over:function(t){Me(e,t)||(Zi(e,t),Fe(t))},start:function(t){return qi(e,t)},drop:dn(e,$i),leave:function(t){Me(e,t)||Qi(e)}};var s=i.input.getField();Ql(s,"keyup",function(t){return To.call(e,t)}),Ql(s,"keydown",dn(e,Lo)),Ql(s,"keypress",dn(e,Mo)),Ql(s,"focus",function(t){return Hr(e,t)}),Ql(s,"blur",function(t){return Fr(e,t)})}function Yo(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=$e(e,t).state:r="prev");var l=e.options.tabSize,s=M(o,t),a=f(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==Bl||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?f(M(o,t-1).text,null,l):0:"add"==r?u=a+e.options.indentUnit:"subtract"==r?u=a-e.options.indentUnit:"number"==typeof r&&(u=a+r),u=Math.max(0,u);var h="",d=0;if(e.options.indentWithTabs)for(var g=Math.floor(u/l);g;--g)d+=l,h+="\t";if(d<u&&(h+=p(u-d)),h!=c)return Ei(o,h,E(t,0),E(t,c.length),"+input"),s.stateAfter=null,!0;for(var v=0;v<o.sel.ranges.length;v++){var m=o.sel.ranges[v];if(m.head.line==t&&m.head.ch<c.length){var y=E(t,c.length);gi(o,v,new Ts(y,y));break}}}function _o(e){qs=e}function $o(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var l=e.state.pasteIncoming||"paste"==i,s=es(t),a=null;if(l&&n.ranges.length>1)if(qs&&qs.text.join("\n")==t){if(n.ranges.length%qs.text.length==0){a=[];for(var u=0;u<qs.text.length;u++)a.push(o.splitLines(qs.text[u]))}}else s.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(a=v(s,function(e){return[e]}));for(var c,f=n.ranges.length-1;f>=0;f--){var h=n.ranges[f],d=h.from(),p=h.to();h.empty()&&(r&&r>0?d=E(d.line,d.ch-r):e.state.overwrite&&!l?p=E(p.line,Math.min(M(o,p.line).text.length,p.ch+g(s).length)):qs&&qs.lineWise&&qs.text.join("\n")==t&&(d=p=E(d.line,0))),c=e.curOp.updateInput;var m={from:d,to:p,text:a?a[f%a.length]:s,origin:i||(l?"paste":e.state.cutIncoming?"cut":"+input")};Oi(e.doc,m),bt(e,"inputRead",e,m)}t&&!l&&Zo(e,t),jr(e),e.curOp.updateInput=c,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function qo(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||hn(t,function(){return $o(t,r,0,null,"paste")}),!0}function Zo(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),l=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){l=Yo(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(M(e.doc,i.head.line).text.slice(0,i.head.ch))&&(l=Yo(e,i.head.line,"smart"));l&&bt(e,"electricInput",e,i.head.line)}}}function Qo(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:E(i,0),head:E(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function Jo(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function el(){var e=n("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=n("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ml?e.style.width="1000px":e.setAttribute("wrap","off"),Ll&&(e.style.border="1px solid black"),Jo(e),t}function tl(e,t,r,n,i){function o(){var n=t.line+r;return!(n<e.first||n>=e.first+e.size)&&(t=new E(n,t.ch,t.sticky),u=M(e,n))}function l(n){var l;if(null==(l=i?go(e.cm,u,t,r):ho(u,t,r))){if(n||!o())return!1;t=po(i,e.cm,u,t.line,r)}else t=l;return!0}var s=t,a=r,u=M(e,t.line);if("char"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var c=null,f="group"==n,h=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(r<0)||l(!d);d=!1){var p=u.text.charAt(t.ch)||"\n",g=x(p,h)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";if(!f||d||g||(g="s"),c&&c!=g){r<0&&(r=1,l(),t.sticky="after");break}if(g&&(c=g),r>0&&!l(!d))break}var v=ki(e,t,s,a,!0);return I(s,v)&&(v.hitSide=!0),v}function rl(e,t,r,n){var i,o=e.doc,l=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),a=Math.max(s-.5*mr(e.display),3);i=(r>0?t.bottom:t.top)+r*a}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(var u;(u=cr(e,l,i)).outside;){if(r<0?i<=0:i>=o.height){u.hitSide=!0;break}i+=5*r}return u}function nl(e,t){var r=jt(e,t.line);if(!r||r.hidden)return null;var n=M(e.doc,t.line),i=Ut(r,n,t.line),o=Se(n,e.doc.direction),l="left";o&&(l=Ce(o,t.ch)%2?"right":"left");var s=_t(i.map,t.ch,l);return s.offset="right"==s.collapse?s.end:s.start,s}function il(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function ol(e,t){return t&&(e.bad=!0),e}function ll(e,t,r,n,i){function o(e){return function(t){return t.id==e}}function l(){c&&(u+=f,c=!1)}function s(e){e&&(l(),u+=e)}function a(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(null!=r)return void s(r||t.textContent.replace(/\u200b/g,""));var u,h=t.getAttribute("cm-marker");if(h){var d=e.findMarks(E(n,0),E(i+1,0),o(+h));return void(d.length&&(u=d[0].find(0))&&s(N(e.doc,u.from,u.to).join(f)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p)$/i.test(t.nodeName);p&&l();for(var g=0;g<t.childNodes.length;g++)a(t.childNodes[g]);p&&(c=!0)}else 3==t.nodeType&&s(t.nodeValue)}for(var u="",c=!1,f=e.doc.lineSeparator();a(t),t!=r;)t=t.nextSibling;return u}function sl(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return ol(e.clipPos(E(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return al(o,t,r)}}function al(e,t,r){function n(t,r,n){for(var i=-1;i<(f?f.length:0);i++)for(var o=i<0?c.map:f[i],l=0;l<o.length;l+=3){var s=o[l+2];if(s==t||s==r){var a=W(i<0?e.line:e.rest[i]),u=o[l]+n;return(n<0||s!=t)&&(u=o[l+(n?1:0)]),E(a,u)}}}var i=e.text.firstChild,l=!1;if(!t||!o(i,t))return ol(E(W(e.line),0),!0);if(t==i&&(l=!0,t=i.childNodes[r],r=0,!t)){var s=e.rest?g(e.rest):e.line;return ol(E(W(s),s.text.length),l)}var a=3==t.nodeType?t:null,u=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,r&&(r=a.nodeValue.length));u.parentNode!=i;)u=u.parentNode;var c=e.measure,f=c.maps,h=n(a,u,r);if(h)return ol(h,l);for(var d=u.nextSibling,p=a?a.nodeValue.length-r:0;d;d=d.nextSibling){if(h=n(d,d.firstChild,0))return ol(E(h.line,h.ch-p),l);p+=d.textContent.length}for(var v=u.previousSibling,m=r;v;v=v.previousSibling){if(h=n(v,v.firstChild,-1))return ol(E(h.line,h.ch+m),l);m+=v.textContent.length}}var ul=navigator.userAgent,cl=navigator.platform,fl=/gecko\/\d/i.test(ul),hl=/MSIE \d/.test(ul),dl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ul),pl=/Edge\/(\d+)/.exec(ul),gl=hl||dl||pl,vl=gl&&(hl?document.documentMode||6:+(pl||dl)[1]),ml=!pl&&/WebKit\//.test(ul),yl=ml&&/Qt\/\d+\.\d+/.test(ul),bl=!pl&&/Chrome\//.test(ul),wl=/Opera\//.test(ul),xl=/Apple Computer/.test(navigator.vendor),Cl=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ul),Sl=/PhantomJS/.test(ul),Ll=!pl&&/AppleWebKit/.test(ul)&&/Mobile\/\w+/.test(ul),kl=/Android/.test(ul),Tl=Ll||kl||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ul),Ml=Ll||/Mac/.test(cl),Nl=/\bCrOS\b/.test(ul),Ol=/win/i.test(cl),Al=wl&&ul.match(/Version\/(\d*\.\d*)/);Al&&(Al=Number(Al[1])),Al&&Al>=15&&(wl=!1,ml=!0);var Wl,Dl=Ml&&(yl||wl&&(null==Al||Al<12.11)),Hl=fl||gl&&vl>=9,Fl=function(t,r){var n=t.className,i=e(r).exec(n);if(i){var o=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(o?i[1]+o:"")}};Wl=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var El=function(e){e.select()};Ll?El=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:gl&&(El=function(e){try{e.select()}catch(e){}});var Pl=function(){this.id=null};Pl.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Il,zl,Rl=30,Bl={toString:function(){return"CodeMirror.Pass"}},Gl={scroll:!1},Ul={origin:"*mouse"},Vl={origin:"+move"},Kl=[""],jl=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Xl=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Yl=!1,_l=!1,$l=null,ql=function(){function e(e){return e<=247?r.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?n.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,r){this.level=e,this.from=t,this.to=r}var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,l=/[LRr]/,s=/[Lb1n]/,a=/[1n]/;return function(r,n){var u="ltr"==n?"L":"R";if(0==r.length||"ltr"==n&&!i.test(r))return!1;for(var c=r.length,f=[],h=0;h<c;++h)f.push(e(r.charCodeAt(h)));for(var d=0,p=u;d<c;++d){var v=f[d];"m"==v?f[d]=p:p=v}for(var m=0,y=u;m<c;++m){var b=f[m];"1"==b&&"r"==y?f[m]="n":l.test(b)&&(y=b,"r"==b&&(f[m]="R"))}for(var w=1,x=f[0];w<c-1;++w){var C=f[w];"+"==C&&"1"==x&&"1"==f[w+1]?f[w]="1":","!=C||x!=f[w+1]||"1"!=x&&"n"!=x||(f[w]=x),x=C}for(var S=0;S<c;++S){var L=f[S];if(","==L)f[S]="N";else if("%"==L){var k=void 0;for(k=S+1;k<c&&"%"==f[k];++k);for(var T=S&&"!"==f[S-1]||k<c&&"1"==f[k]?"1":"N",M=S;M<k;++M)f[M]=T;S=k-1}}for(var N=0,O=u;N<c;++N){var A=f[N];"L"==O&&"1"==A?f[N]="L":l.test(A)&&(O=A)}for(var W=0;W<c;++W)if(o.test(f[W])){var D=void 0;for(D=W+1;D<c&&o.test(f[D]);++D);for(var H="L"==(W?f[W-1]:u),F=H==("L"==(D<c?f[D]:u))?H?"L":"R":u,E=W;E<D;++E)f[E]=F;W=D-1}for(var P,I=[],z=0;z<c;)if(s.test(f[z])){var R=z;for(++z;z<c&&s.test(f[z]);++z);I.push(new t(0,R,z))}else{var B=z,G=I.length;for(++z;z<c&&"L"!=f[z];++z);for(var U=B;U<z;)if(a.test(f[U])){B<U&&I.splice(G,0,new t(1,B,U));var V=U;for(++U;U<z&&a.test(f[U]);++U);I.splice(G,0,new t(2,V,U)),B=U}else++U;B<z&&I.splice(G,0,new t(1,B,z))}return 1==I[0].level&&(P=r.match(/^\s+/))&&(I[0].from=P[0].length,I.unshift(new t(0,0,P[0].length))),1==g(I).level&&(P=r.match(/\s+$/))&&(g(I).to-=P[0].length,I.push(new t(0,c-P[0].length,c))),"rtl"==n?I.reverse():I}}(),Zl=[],Ql=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||Zl).concat(r)}},Jl=function(){if(gl&&vl<9)return!1;var e=n("div");return"draggable"in e||"dragDrop"in e}(),es=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},ts=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},rs=function(){var e=n("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),ns=null,is={},os={},ls={},ss=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};ss.prototype.eol=function(){return this.pos>=this.string.length},ss.prototype.sol=function(){return this.pos==this.lineStart},ss.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ss.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ss.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},ss.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ss.prototype.eatSpace=function(){for(var e=this,t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++e.pos;return this.pos>t},ss.prototype.skipToEnd=function(){this.pos=this.string.length},ss.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ss.prototype.backUp=function(e){this.pos-=e},ss.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=f(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},ss.prototype.indentation=function(){return f(this.string,null,this.tabSize)-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},ss.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},ss.prototype.current=function(){return this.string.slice(this.start,this.pos)},ss.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ss.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)};var as=function(e,t){this.state=e,this.lookAhead=t},us=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0};us.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},us.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},us.fromSaved=function(e,t,r){return t instanceof as?new us(e,Ke(e.mode,t.state),r,t.lookAhead):new us(e,Ke(e.mode,t),r)},us.prototype.save=function(e){var t=!1!==e?Ke(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new as(t,this.maxLookAhead):t};var cs=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r},fs=function(e,t,r){this.text=e,ne(this,t),this.height=r?r(this):1};fs.prototype.lineNo=function(){return W(this)},Ae(fs);var hs,ds={},ps={},gs=null,vs=null,ms={left:0,right:0,top:0,bottom:0},ys=function(e,t,r){this.cm=r;var i=this.vert=n("div",[n("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=n("div",[n("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(o),Ql(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),Ql(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,gl&&vl<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ys.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},ys.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ys.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ys.prototype.zeroWidthHack=function(){var e=Ml&&!Cl?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Pl,this.disableVert=new Pl},ys.prototype.enableZeroWidthBar=function(e,t,r){function n(){var i=e.getBoundingClientRect();("vert"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},ys.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var bs=function(){};bs.prototype.update=function(){return{bottom:0,right:0}},bs.prototype.setScrollLeft=function(){},bs.prototype.setScrollTop=function(){},bs.prototype.clear=function(){};var ws={native:ys,null:bs},xs=0,Cs=function(e,t,r){var n=e.display;this.viewport=t,this.visible=Ir(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Rt(e),this.force=r,this.dims=br(e),this.events=[]};Cs.prototype.signal=function(e,t){Oe(e,t)&&this.events.push(arguments)},Cs.prototype.finish=function(){for(var e=this,t=0;t<this.events.length;t++)Te.apply(null,e.events[t])};var Ss=0,Ls=null;gl?Ls=-.53:fl?Ls=15:bl?Ls=-.7:xl&&(Ls=-1/3);var ks=function(e,t){this.ranges=e,this.primIndex=t};ks.prototype.primary=function(){return this.ranges[this.primIndex]},ks.prototype.equals=function(e){var t=this;if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var n=t.ranges[r],i=e.ranges[r];if(!I(n.anchor,i.anchor)||!I(n.head,i.head))return!1}return!0},ks.prototype.deepCopy=function(){for(var e=this,t=[],r=0;r<this.ranges.length;r++)t[r]=new Ts(z(e.ranges[r].anchor),z(e.ranges[r].head));return new ks(t,this.primIndex)},ks.prototype.somethingSelected=function(){for(var e=this,t=0;t<this.ranges.length;t++)if(!e.ranges[t].empty())return!0;return!1},ks.prototype.contains=function(e,t){var r=this;t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=r.ranges[n];if(P(t,i.from())>=0&&P(e,i.to())<=0)return n}return-1};var Ts=function(e,t){this.anchor=e,this.head=t};Ts.prototype.from=function(){return B(this.anchor,this.head)},Ts.prototype.to=function(){return R(this.anchor,this.head)},Ts.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Bi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=this,n=e,i=e+t;n<i;++n){var o=r.lines[n];r.height-=o.height,ot(o),bt(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){var n=this;this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=n},iterN:function(e,t,r){for(var n=this,i=e+t;e<i;++e)if(r(n.lines[e]))return!0}},Gi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){var r=this;this.size-=t;for(var n=0;n<this.children.length;++n){var i=r.children[n],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e),s=i.height;if(i.removeInner(e,l),r.height-=s-i.height,o==l&&(r.children.splice(n--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Bi))){var a=[];this.collapse(a),this.children=[new Bi(a)],this.children[0].parent=this}},collapse:function(e){for(var t=this,r=0;r<this.children.length;++r)t.children[r].collapse(e)},insertInner:function(e,t,r){var n=this;this.size+=t.length,this.height+=r;for(var i=0;i<this.children.length;++i){var o=n.children[i],l=o.chunkSize();if(e<=l){if(o.insertInner(e,t,r),o.lines&&o.lines.length>50){for(var s=o.lines.length%25+25,a=s;a<o.lines.length;){var u=new Bi(o.lines.slice(a,a+=25));o.height-=u.height,n.children.splice(++i,0,u),u.parent=n}o.lines=o.lines.slice(0,s),n.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Gi(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=h(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new Gi(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=this,i=0;i<this.children.length;++i){var o=n.children[i],l=o.chunkSize();if(e<l){var s=Math.min(t,l-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=l}}};var Ms=function(e,t,r){var n=this;if(r)for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);this.doc=e,this.node=t};Ms.prototype.clear=function(){var e=this,t=this.doc.cm,r=this.line.widgets,n=this.line,i=W(n);if(null!=i&&r){for(var o=0;o<r.length;++o)r[o]==e&&r.splice(o--,1);r.length||(n.widgets=null);var l=Ht(this);A(n,Math.max(0,n.height-l)),t&&(hn(t,function(){Ui(t,n,-l),mn(t,i,"widget")}),bt(t,"lineWidgetCleared",t,this,i))}},Ms.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=Ht(this)-t;i&&(A(n,n.height+i),r&&hn(r,function(){r.curOp.forceUpdate=!0,Ui(r,n,i),bt(r,"lineWidgetChanged",r,e,W(n))}))},Ae(Ms);var Ns=0,Os=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Ns};Os.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,r=t&&!t.curOp;if(r&&nn(t),Oe(this,"clear")){var n=this.find();n&&bt(this,"clear",n.from,n.to)}for(var i=null,o=null,l=0;l<this.lines.length;++l){var s=e.lines[l],a=_(s.markedSpans,e);t&&!e.collapsed?mn(t,W(s),"text"):t&&(null!=a.to&&(o=W(s)),null!=a.from&&(i=W(s))),s.markedSpans=$(s.markedSpans,a),null==a.from&&e.collapsed&&!ve(e.doc,s)&&t&&A(s,mr(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=fe(e.lines[u]),f=be(c);f>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=f,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&vn(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Ci(t.doc)),t&&bt(t,"markerCleared",t,this,i,o),r&&on(t),this.parent&&this.parent.clear()}},Os.prototype.find=function(e,t){var r=this;null==e&&"bookmark"==this.type&&(e=1);for(var n,i,o=0;o<this.lines.length;++o){var l=r.lines[o],s=_(l.markedSpans,r);if(null!=s.from&&(n=E(t?l:W(l),s.from),-1==e))return n;if(null!=s.to&&(i=E(t?l:W(l),s.to),1==e))return i}return n&&{from:n,to:i}},Os.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;t&&n&&hn(n,function(){var i=t.line,o=W(t.line),l=jt(n,o);if(l&&(Qt(l),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!ve(r.doc,i)&&null!=r.height){var s=r.height;r.height=null;var a=Ht(r)-s;a&&A(i,i.height+a)}bt(n,"markerChanged",n,e)})},Os.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=h(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Os.prototype.detachLine=function(e){if(this.lines.splice(h(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Ae(Os);var As=function(e,t){var r=this;this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=r};As.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)e.markers[t].clear();bt(this,"clear")}},As.prototype.find=function(e,t){return this.primary.find(e,t)},Ae(As);var Ws=0,Ds=function(e,t,r,n,i){if(!(this instanceof Ds))return new Ds(e,t,r,n,i);null==r&&(r=0),Gi.call(this,[new Bi([new fs("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=E(r,0);this.sel=Rn(o),this.history=new Jn(null),this.id=++Ws,this.modeOption=t,this.lineSep=n,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),_n(this,{from:o,to:o,text:e}),bi(this,Rn(o),Gl)};Ds.prototype=b(Gi.prototype,{constructor:Ds,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=O(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:gn(function(e){var t=E(this.first,0),r=this.first+this.size-1;Oi(this,{from:t,to:E(r,M(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Xr(this.cm,0,0),bi(this,Rn(t),Gl)}),replaceRange:function(e,t,r,n){Ei(this,e,t=U(this,t),r=r?U(this,r):t,n)},getRange:function(e,t,r){var n=N(this,U(this,e),U(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(H(this,e))return M(this,e)},getLineNumber:function(e){return W(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=M(this,e)),fe(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return U(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gn(function(e,t,r){vi(this,U(this,"number"==typeof e?E(e,t||0):e),null,r)}),setSelection:gn(function(e,t,r){vi(this,U(this,e),U(this,t||e),r)}),extendSelection:gn(function(e,t,r){di(this,U(this,e),t&&U(this,t),r)}),extendSelections:gn(function(e,t){pi(this,K(this,e),t)}),extendSelectionsBy:gn(function(e,t){pi(this,K(this,v(this.sel.ranges,e)),t)}),setSelections:gn(function(e,t,r){var n=this;if(e.length){for(var i=[],o=0;o<e.length;o++)i[o]=new Ts(U(n,e[o].anchor),U(n,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),bi(this,zn(i,t),r)}}),addSelection:gn(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new Ts(U(this,e),U(this,t||e))),bi(this,zn(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this,n=this.sel.ranges,i=0;i<n.length;i++){var o=N(r,n[i].from(),n[i].to());t=t?t.concat(o):o}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=this,r=[],n=this.sel.ranges,i=0;i<n.length;i++){var o=N(t,n[i].from(),n[i].to());!1!==e&&(o=o.join(e||t.lineSeparator())),r[i]=o}return r},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:gn(function(e,t,r){for(var n=this,i=[],o=this.sel,l=0;l<o.ranges.length;l++){var s=o.ranges[l];i[l]={from:s.from(),to:s.to(),text:n.splitLines(e[l]),origin:r}}for(var a=t&&"end"!=t&&Kn(this,i,t),u=i.length-1;u>=0;u--)Oi(n,i[u]);a?yi(this,a):this.cm&&jr(this.cm)}),undo:gn(function(){Wi(this,"undo")}),redo:gn(function(){Wi(this,"redo")}),undoSelection:gn(function(){Wi(this,"undo",!0)}),redoSelection:gn(function(){Wi(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new Jn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:fi(this.history.done),undone:fi(this.history.undone)}},setHistory:function(e){var t=this.history=new Jn(this.history.maxGeneration);t.done=fi(e.done.slice(0),null,!0),t.undone=fi(e.undone.slice(0),null,!0)},setGutterMarker:gn(function(e,t,r){return Ri(this,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&C(n)&&(e.gutterMarkers=null),!0})}),clearGutter:gn(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&Ri(t,r,"gutter",function(){return r.gutterMarkers[e]=null,C(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!H(this,e))return null;if(t=e,!(e=M(this,e)))return null}else if(null==(t=W(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:gn(function(t,r,n){return Ri(this,t,"gutter"==r?"gutter":"class",function(t){var i="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass";if(t[i]){if(e(n).test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0})}),removeLineClass:gn(function(t,r,n){return Ri(this,t,"gutter"==r?"gutter":"class",function(t){var i="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass",o=t[i];if(!o)return!1;if(null==n)t[i]=null;else{var l=o.match(e(n));if(!l)return!1;var s=l.index+l[0].length;t[i]=o.slice(0,l.index)+(l.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:gn(function(e,t,r){return Vi(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Ki(this,U(this,e),U(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=U(this,e),Ki(this,e,e,r,"bookmark")},findMarksAt:function(e){var t=[],r=M(this,(e=U(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=U(this,e),t=U(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];null!=a.to&&i==e.line&&e.ch>=a.to||null==a.from&&i!=e.line||null!=a.from&&i==t.line&&a.from>=t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+n;if(o>e)return t=e,!0;e-=o,++r}),U(this,E(r,t))},indexFromPos:function(e){var t=(e=U(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new Ds(O(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new Ds(O(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Yi(n,Xi(this)),n},unlinkDoc:function(e){var t=this;if(e instanceof jo&&(e=e.doc),this.linked)for(var r=0;r<this.linked.length;++r)if(t.linked[r].doc==e){t.linked.splice(r,1),e.unlinkDoc(t),_i(Xi(t));break}if(e.history==this.history){var n=[e.id];$n(e,function(e){return n.push(e.id)},!0),e.history=new Jn(null),e.history.done=fi(this.history.done,n),e.history.undone=fi(this.history.undone,n)}},iterLinkedDocs:function(e){$n(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):es(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:gn(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Qn(this.cm))})}),Ds.prototype.eachLine=Ds.prototype.iter;for(var Hs=0,Fs=!1,Es={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ps=0;Ps<10;Ps++)Es[Ps+48]=Es[Ps+96]=String(Ps);for(var Is=65;Is<=90;Is++)Es[Is]=String.fromCharCode(Is);for(var zs=1;zs<=12;zs++)Es[zs+111]=Es[zs+63235]="F"+zs;var Rs={};Rs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Rs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Rs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Rs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Rs.default=Ml?Rs.macDefault:Rs.pcDefault;var Bs={selectAll:Mi,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Gl)},killLine:function(e){return co(e,function(t){if(t.empty()){var r=M(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:E(t.head.line+1,0)}:{from:t.head,to:E(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return co(e,function(t){return{from:E(t.from().line,0),to:U(e.doc,E(t.to().line+1,0))}})},delLineLeft:function(e){return co(e,function(e){return{from:E(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return co(e,function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}})},delWrappedLineRight:function(e){return co(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(E(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(E(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return vo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return yo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return mo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},Vl)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},Vl)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?yo(e,t.head):n},Vl)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=f(e.getLine(o.line),o.ch,n);t.push(p(n-l%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return hn(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,o=M(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new E(i.line,i.ch-1)),i.ch>0)i=new E(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),E(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=M(e.doc,i.line-1).text;l&&(i=new E(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+l.charAt(l.length-1),E(i.line-1,l.length-1),i,"+transpose"))}r.push(new Ts(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){return hn(e,function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);jr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},Gs=new Pl,Us=null,Vs=function(e,t,r){this.time=e,this.pos=t,this.button=r};Vs.prototype.compare=function(e,t,r){return this.time+400>e&&0==P(t,this.pos)&&r==this.button};var Ks,js,Xs={toString:function(){return"CodeMirror.Init"}},Ys={},_s={};jo.defaults=Ys,jo.optionHandlers=_s;var $s=[];jo.defineInitHook=function(e){return $s.push(e)};var qs=null,Zs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Pl,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Zs.prototype.init=function(e){function t(e){if(!Me(i,e)){if(i.somethingSelected())_o({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Qo(i);_o({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,Gl),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var r=qs.text.join("\n");if(e.clipboardData.setData("Text",r),e.clipboardData.getData("Text")==r)return void e.preventDefault()}var l=el(),s=l.firstChild;i.display.lineSpace.insertBefore(l,i.display.lineSpace.firstChild),s.value=qs.text.join("\n");var a=document.activeElement;El(s),setTimeout(function(){i.display.lineSpace.removeChild(l),a.focus(),a==o&&n.showPrimarySelection()},50)}}var r=this,n=this,i=n.cm,o=n.div=e.lineDiv;Jo(o,i.options.spellcheck),Ql(o,"paste",function(e){Me(i,e)||qo(e,i)||vl<=11&&setTimeout(dn(i,function(){return r.updateFromDOM()}),20)}),Ql(o,"compositionstart",function(e){r.composing={data:e.data,done:!1}}),Ql(o,"compositionupdate",function(e){r.composing||(r.composing={data:e.data,done:!1})}),Ql(o,"compositionend",function(e){r.composing&&(e.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)}),Ql(o,"touchstart",function(){return n.forceCompositionEnd()}),Ql(o,"input",function(){r.composing||r.readFromDOMSoon()}),Ql(o,"copy",t),Ql(o,"cut",t)},Zs.prototype.prepareSelection=function(){var e=Tr(this.cm,!1);return e.focus=this.cm.state.focused,e},Zs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Zs.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,r=t.doc.sel.primary(),n=r.from(),i=r.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var o=sl(t,e.anchorNode,e.anchorOffset),l=sl(t,e.focusNode,e.focusOffset);if(!o||o.bad||!l||l.bad||0!=P(B(o,l),n)||0!=P(R(o,l),i)){var s=t.display.view,a=n.line>=t.display.viewFrom&&nl(t,n)||{node:s[0].measure.map[2],offset:0},u=i.line<t.display.viewTo&&nl(t,i);if(!u){var c=s[s.length-1].measure,f=c.maps?c.maps[c.maps.length-1]:c.map;u={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(a&&u){var h,d=e.rangeCount&&e.getRangeAt(0);try{h=Wl(a.node,a.offset,u.offset,u.node)}catch(e){}h&&(!fl&&t.state.focused?(e.collapse(a.node,a.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),d&&null==e.anchorNode?e.addRange(d):fl&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Zs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Zs.prototype.showMultipleSelections=function(e){r(this.cm.display.cursorDiv,e.cursors),r(this.cm.display.selectionDiv,e.selection)},Zs.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Zs.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return o(this.div,t)},Zs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Zs.prototype.blur=function(){this.div.blur()},Zs.prototype.getField=function(){return this.div},Zs.prototype.supportsTouch=function(){return!0},Zs.prototype.receivedFocus=function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():hn(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},Zs.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Zs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;if(kl&&bl&&this.cm.options.gutters.length&&il(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=sl(t,e.anchorNode,e.anchorOffset),n=sl(t,e.focusNode,e.focusOffset);r&&n&&hn(t,function(){bi(t.doc,Rn(r,n),Gl),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},Zs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,r=e.doc.sel.primary(),n=r.from(),i=r.to();if(0==n.ch&&n.line>e.firstLine()&&(n=E(n.line-1,M(e.doc,n.line-1).length)),i.ch==M(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=E(i.line+1,0)),n.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o,l,s;n.line==t.viewFrom||0==(o=Lr(e,n.line))?(l=W(t.view[0].line),s=t.view[0].node):(l=W(t.view[o].line),s=t.view[o-1].node.nextSibling);var a,u,c=Lr(e,i.line);if(c==t.view.length-1?(a=t.viewTo-1,u=t.lineDiv.lastChild):(a=W(t.view[c+1].line)-1,u=t.view[c+1].node.previousSibling),!s)return!1;for(var f=e.doc.splitLines(ll(e,s,u,l,a)),h=N(e.doc,E(l,0),E(a,M(e.doc,a).text.length));f.length>1&&h.length>1;)if(g(f)==g(h))f.pop(),h.pop(),a--;else{if(f[0]!=h[0])break;f.shift(),h.shift(),l++}for(var d=0,p=0,v=f[0],m=h[0],y=Math.min(v.length,m.length);d<y&&v.charCodeAt(d)==m.charCodeAt(d);)++d;for(var b=g(f),w=g(h),x=Math.min(b.length-(1==f.length?d:0),w.length-(1==h.length?d:0));p<x&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)++p;if(1==f.length&&1==h.length&&l==n.line)for(;d&&d>n.ch&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)d--,p++;f[f.length-1]=b.slice(0,b.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(d).replace(/\u200b+$/,"");var C=E(l,d),S=E(a,h.length?g(h).length-p:0);return f.length>1||f[0]||P(C,S)?(Ei(e.doc,f,C,S,"+input"),!0):void 0},Zs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Zs.prototype.reset=function(){this.forceCompositionEnd()},Zs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Zs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Zs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||hn(this.cm,function(){return vn(e.cm)})},Zs.prototype.setUneditable=function(e){e.contentEditable="false"},Zs.prototype.onKeyPress=function(e){0!=e.charCode&&(e.preventDefault(),this.cm.isReadOnly()||dn(this.cm,$o)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Zs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Zs.prototype.onContextMenu=function(){},Zs.prototype.resetPosition=function(){},Zs.prototype.needsContentAttribute=!0;var Qs=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Pl,this.hasSelection=!1,this.composing=null};Qs.prototype.init=function(e){function t(e){if(!Me(i,e)){if(i.somethingSelected())_o({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Qo(i);_o({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,Gl):(n.prevInput="",l.value=t.text.join("\n"),El(l))}"cut"==e.type&&(i.state.cutIncoming=!0)}}var r=this,n=this,i=this.cm,o=this.wrapper=el(),l=this.textarea=o.firstChild;e.wrapper.insertBefore(o,e.wrapper.firstChild),Ll&&(l.style.width="0px"),Ql(l,"input",function(){gl&&vl>=9&&r.hasSelection&&(r.hasSelection=null),n.poll()}),Ql(l,"paste",function(e){Me(i,e)||qo(e,i)||(i.state.pasteIncoming=!0,n.fastPoll())}),Ql(l,"cut",t),Ql(l,"copy",t),Ql(e.scroller,"paste",function(t){Ft(e,t)||Me(i,t)||(i.state.pasteIncoming=!0,n.focus())}),Ql(e.lineSpace,"selectstart",function(t){Ft(e,t)||We(t)}),Ql(l,"compositionstart",function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),Ql(l,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Qs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=Tr(e);if(e.options.moveInputWithCursor){var i=sr(e,r.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),l=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+l.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+l.left-o.left))}return n},Qs.prototype.showSelection=function(e){var t=this.cm.display;r(t.cursorDiv,e.cursors),r(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Qs.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&El(this.textarea),gl&&vl>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",gl&&vl>=9&&(this.hasSelection=null))}},Qs.prototype.getField=function(){return this.textarea},Qs.prototype.supportsTouch=function(){return!1},Qs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Tl||l()!=this.textarea))try{this.textarea.focus()}catch(e){}},Qs.prototype.blur=function(){this.textarea.blur()},Qs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Qs.prototype.receivedFocus=function(){this.slowPoll()},Qs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Qs.prototype.fastPoll=function(){function e(){r.poll()||t?(r.pollingFast=!1,r.slowPoll()):(t=!0,r.polling.set(60,e))}var t=!1,r=this;r.pollingFast=!0,r.polling.set(20,e)},Qs.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||ts(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(gl&&vl>=9&&this.hasSelection===i||Ml&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,s=Math.min(n.length,i.length);l<s&&n.charCodeAt(l)==i.charCodeAt(l);)++l;return hn(t,function(){$o(t,i.slice(l),n.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?r.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Qs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Qs.prototype.onKeyPress=function(){gl&&vl>=9&&(this.hasSelection=null),this.fastPoll()},Qs.prototype.onContextMenu=function(e){function t(){if(null!=l.selectionStart){var e=i.somethingSelected(),t="​"+(e?l.value:"");l.value="⇚",l.value=t,n.prevInput=e?"":"​",l.selectionStart=1,l.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function r(){if(n.contextMenuPending=!1,n.wrapper.style.cssText=c,l.style.cssText=u,gl&&vl<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=a),null!=l.selectionStart){(!gl||gl&&vl<9)&&t();var e=0,r=function(){o.selForContextMenu==i.doc.sel&&0==l.selectionStart&&l.selectionEnd>0&&"​"==n.prevInput?dn(i,Mi)(i):e++<10?o.detectingSelectAll=setTimeout(r,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(r,200)}}var n=this,i=n.cm,o=i.display,l=n.textarea,s=Sr(i,e),a=o.scroller.scrollTop;if(s&&!wl){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(s)&&dn(i,bi)(i.doc,Rn(s),Gl);var u=l.style.cssText,c=n.wrapper.style.cssText;n.wrapper.style.cssText="position: absolute";var f=n.wrapper.getBoundingClientRect();l.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(gl?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var h;if(ml&&(h=window.scrollY),o.input.focus(),ml&&window.scrollTo(null,h),o.input.reset(),i.somethingSelected()||(l.value=n.prevInput=" "),n.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),gl&&vl>=9&&t(),Hl){Fe(e);var d=function(){ke(window,"mouseup",d),setTimeout(r,20)};Ql(window,"mouseup",d)}else setTimeout(r,50)}},Qs.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Qs.prototype.setUneditable=function(){},Qs.prototype.needsContentAttribute=!1,function(e){function t(t,n,i,o){e.defaults[t]=n,i&&(r[t]=o?function(e,t,r){r!=Xs&&i(e,t,r)}:i)}var r=e.optionHandlers;e.defineOption=t,e.Init=Xs,t("value","",function(e,t){return e.setValue(t)},!0),t("mode",null,function(e,t){e.doc.modeOption=t,jn(e)},!0),t("indentUnit",2,jn,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(e){Xn(e),er(e),vn(e)},!0),t("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,r.push(E(n,o))}n++});for(var i=r.length-1;i>=0;i--)Ei(e.doc,t,r[i],E(r[i].line,r[i].ch+t.length))}}),t("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=Xs&&e.refresh()}),t("specialCharPlaceholder",at,function(e){return e.refresh()},!0),t("electricChars",!0),t("inputStyle",Tl?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),t("rtlMoveVisually",!Ol),t("wholeLineUpdateBefore",!0),t("theme","default",function(e){Go(e),Uo(e)},!0),t("keyMap","default",function(e,t,r){var n=uo(t),i=r!=Xs&&uo(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)}),t("extraKeys",null),t("configureMouse",null),t("lineWrapping",!1,Ko,!0),t("gutters",[],function(e){Fn(e.options),Uo(e)},!0),t("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?wr(e.display)+"px":"0",e.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(e){return en(e)},!0),t("scrollbarStyle","native",function(e){rn(e),en(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),t("lineNumbers",!1,function(e){Fn(e.options),Uo(e)},!0),t("firstLineNumber",1,Uo,!0),t("lineNumberFormatter",function(e){return e},Uo,!0),t("showCursorWhenSelecting",!1,kr,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("pasteLinesPerSelection",!0),t("readOnly",!1,function(e,t){"nocursor"==t&&(Fr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),t("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),t("dragDrop",!0,Vo),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,kr,!0),t("singleCursorHeightPerLine",!0,kr,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,Xn,!0),t("addModeClass",!1,Xn,!0),t("pollInterval",100),t("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),t("historyEventDelay",1250),t("viewportMargin",10,function(e){return e.refresh()},!0),t("maxHighlightLength",1e4,Xn,!0),t("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),t("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),t("autofocus",null),t("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0)}(jo),function(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,r){var n=this.options,i=n[e];n[e]==r&&"mode"!=e||(n[e]=r,t.hasOwnProperty(e)&&dn(this,t[e])(this,r,i),Te(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](uo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:pn(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");m(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},function(e){return e.priority}),this.state.modeGen++,vn(this)}),removeOverlay:pn(function(e){for(var t=this,r=this.state.overlays,n=0;n<r.length;++n){var i=r[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return r.splice(n,1),t.state.modeGen++,void vn(t)}}),indentLine:pn(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),H(this.doc,e)&&Yo(this,e,t,r)}),indentSelection:pn(function(e){for(var t=this,r=this.doc.sel.ranges,n=-1,i=0;i<r.length;i++){var o=r[i];if(o.empty())o.head.line>n&&(Yo(t,o.head.line,e,!0),n=o.head.line,i==t.doc.sel.primIndex&&jr(t));else{var l=o.from(),s=o.to(),a=Math.max(n,l.line);n=Math.min(t.lastLine(),s.line-(s.ch?0:1))+1;for(var u=a;u<n;++u)Yo(t,u,e);var c=t.doc.sel.ranges;0==l.ch&&r.length==c.length&&c[i].from().ch>0&&gi(t.doc,i,new Ts(l,c[i].to()),Gl)}}}),getTokenAt:function(e,t){return Je(this,e,t)},getLineTokens:function(e,t){return Je(this,E(e),t,!0)},getTokenTypeAt:function(e){e=U(this.doc,e);var t,r=_e(this,M(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=this,i=[];if(!r.hasOwnProperty(t))return i;var o=r[t],l=this.getModeAt(e);if("string"==typeof l[t])o[l[t]]&&i.push(o[l[t]]);else if(l[t])for(var s=0;s<l[t].length;s++){var a=o[l[t][s]];a&&i.push(a)}else l.helperType&&o[l.helperType]?i.push(o[l.helperType]):o[l.name]&&i.push(o[l.name]);for(var u=0;u<o._global.length;u++){var c=o._global[u];c.pred(l,n)&&-1==h(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(e,t){var r=this.doc;return e=G(r,null==e?r.first+r.size-1:e),$e(this,e+1,t).state},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();return r=null==e?n.head:"object"==typeof e?U(this.doc,e):e?n.from():n.to(),sr(this,r,t||"page")},charCoords:function(e,t){return lr(this,U(this.doc,e),t||"page")},coordsChar:function(e,t){return e=or(this,e,t||"page"),cr(this,e.left,e.top)},lineAtHeight:function(e,t){return e=or(this,{top:e,left:0},t||"page").top,D(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),n=M(this.doc,e)}else n=e;return ir(this,n,{top:0,left:0},t||"page",r||i).top+(i?this.doc.height-ye(n):0)},defaultTextHeight:function(){return mr(this.display)},defaultCharWidth:function(){return yr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display,l=(e=sr(this,U(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==n)l=e.top;else if("above"==n||"near"==n){var a=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(l=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&Ur(this,{left:s,top:l,right:s+t.offsetWidth,bottom:l+t.offsetHeight})},triggerOnKeyDown:pn(Lo),triggerOnKeyPress:pn(Mo),triggerOnKeyUp:To,triggerOnMouseDown:pn(Oo),execCommand:function(e){if(Bs.hasOwnProperty(e))return Bs[e].call(null,this)},triggerElectric:pn(function(e){Zo(this,e)}),findPosH:function(e,t,r,n){var i=this,o=1;t<0&&(o=-1,t=-t);for(var l=U(this.doc,e),s=0;s<t&&!(l=tl(i.doc,l,o,r,n)).hitSide;++s);return l},moveH:pn(function(e,t){var r=this;this.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?tl(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},Vl)}),deleteH:pn(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):co(this,function(r){var i=tl(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=this,o=1,l=n;t<0&&(o=-1,t=-t);for(var s=U(this.doc,e),a=0;a<t;++a){var u=sr(i,s,"div");if(null==l?l=u.left:u.left=l,(s=rl(i,u,o,r)).hitSide)break}return s},moveV:pn(function(e,t){var r=this,n=this.doc,i=[],o=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return e<0?l.from():l.to();var s=sr(r,l.head,"div");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=rl(r,s,e,t);return"page"==t&&l==n.sel.primary()&&Kr(r,lr(r,a,"div").top-s.top),a},Vl),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=M(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!r?++n:--r;for(var o=t.charAt(r),l=x(o,i)?function(e){return x(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!x(e)};r>0&&l(t.charAt(r-1));)--r;for(;n<t.length&&l(t.charAt(n));)++n}return new Ts(E(e.line,r),E(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?s(this.display.cursorDiv,"CodeMirror-overwrite"):Fl(this.display.cursorDiv,"CodeMirror-overwrite"),Te(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==l()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:pn(function(e,t){Xr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-zt(this)-this.display.barHeight,width:e.scrollWidth-zt(this)-this.display.barWidth,clientHeight:Bt(this),clientWidth:Rt(this)}},scrollIntoView:pn(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:E(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?Yr(this,e):$r(this,e.from,e.to,e.margin)}),setSize:pn(function(e,t){var r=this,n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Jt(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){mn(r,i,"widget");break}++i}),this.curOp.forceUpdate=!0,Te(this,"refresh",this)}),operation:function(e){return hn(this,e)},startOperation:function(){return nn(this)},endOperation:function(){return on(this)},refresh:pn(function(){var e=this.display.cachedTextHeight;vn(this),this.curOp.forceUpdate=!0,er(this),Xr(this,this.doc.scrollLeft,this.doc.scrollTop),Wn(this),(null==e||Math.abs(e-mr(this.display))>.5)&&Cr(this),Te(this,"refresh",this)}),swapDoc:pn(function(e){var t=this.doc;return t.cm=null,qn(this,e),er(this),this.display.input.reset(),Xr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,bt(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ae(e),e.registerHelper=function(t,n,i){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]}),r[t][n]=i},e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o),r[t]._global.push({pred:i,val:o})}}(jo);var Js="iter insert remove copy getEditor constructor".split(" ");for(var ea in Ds.prototype)Ds.prototype.hasOwnProperty(ea)&&h(Js,ea)<0&&(jo.prototype[ea]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ds.prototype[ea]));return Ae(Ds),jo.inputStyles={textarea:Qs,contenteditable:Zs},jo.defineMode=function(e){jo.defaults.mode||"null"==e||(jo.defaults.mode=e),Be.apply(this,arguments)},jo.defineMIME=function(e,t){os[e]=t},jo.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),jo.defineMIME("text/plain","null"),jo.defineExtension=function(e,t){jo.prototype[e]=t},jo.defineDocExtension=function(e,t){Ds.prototype[e]=t},jo.fromTextArea=function(e,t){function r(){e.value=a.getValue()}if(t=t?c(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=l();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}var i;if(e.form&&(Ql(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(ke(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var a=jo(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return a},function(e){e.off=ke,e.on=Ql,e.wheelEventPixels=Pn,e.Doc=Ds,e.splitLines=es,e.countColumn=f,e.findColumn=d,e.isWordChar=w,e.Pass=Bl,e.signal=Te,e.Line=fs,e.changeEnd=Bn,e.scrollbarModel=ws,e.Pos=E,e.cmpPos=P,e.modes=is,e.mimeModes=os,e.resolveMode=Ge,e.getMode=Ue,e.modeExtensions=ls,e.extendMode=Ve,e.copyState=Ke,e.startState=Xe,e.innerMode=je,e.commands=Bs,e.keyMap=Rs,e.keyName=ao,e.isModifierKey=lo,e.lookupKey=oo,e.normalizeKeyMap=io,e.StringStream=ss,e.SharedTextMarker=As,e.TextMarker=Os,e.LineWidget=Ms,e.e_preventDefault=We,e.e_stopPropagation=De,e.e_stop=Fe,e.addClass=s,e.contains=o,e.rmClass=Fl,e.keyNames=Es}(jo),jo.version="5.30.0",jo});
      !function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,r,o,a){this.indented=e,this.column=t,this.type=n,this.info=r,this.align=o,this.prev=a}function n(e,n,r,o){var a=e.indented;return e.context&&"statement"==e.context.type&&"statement"!=r&&(a=e.context.indented),e.context=new t(a,n,r,o,null,e.context)}function r(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}function o(e,t,n){return"variable"==t.prevToken||"type"==t.prevToken||(!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0,n))||(!(!t.typeAtEndOfLine||e.column()!=e.indentation())||void 0))}function a(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.info)return!1;e=e.prev}}function i(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function l(e,t){return"function"==typeof e?e(t):e.propertyIsEnumerable(t)}function s(e,t){if(!t.startOfLine)return!1;for(var n,r=null;n=e.peek();){if("\\"==n&&e.match(/^.$/)){r=s;break}if("/"==n&&e.match(/^\/[\/\*]/,!1))break;e.next()}return t.tokenize=r,"meta"}function c(e,t){return"type"==t.prevToken&&"type"}function u(e){return e.eatWhile(/[\w\.']/),"number"}function d(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return!!n&&(t.cpp11RawStringDelim=n[1],t.tokenize=m,m(e,t))}return e.match(/(u8|u|U|L)/)?!!e.match(/["']/,!1)&&"string":(e.next(),!1)}function f(e){var t=/(\w+)::~?(\w+)$/.exec(e);return t&&t[1]==t[2]}function p(e,t){for(var n;null!=(n=e.next());)if('"'==n&&!e.eat('"')){t.tokenize=null;break}return"string"}function m(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return e.match(new RegExp(".*?\\)"+n+'"'))?t.tokenize=null:e.skipToEnd(),"string"}function h(t,n){function r(e){if(e)for(var t in e)e.hasOwnProperty(t)&&o.push(t)}"string"==typeof t&&(t=[t]);var o=[];r(n.keywords),r(n.types),r(n.builtin),r(n.atoms),o.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],o));for(var a=0;a<t.length;++a)e.defineMIME(t[a],n)}function g(e,t){for(var n=!1;!e.eol();){if(!n&&e.match('"""')){t.tokenize=null;break}n="\\"==e.next()&&!n}return"string"}function y(e){return function(t,n){for(var r,o=!1,a=!1;!t.eol();){if(!e&&!o&&t.match('"')){a=!0;break}if(e&&t.match('"""')){a=!0;break}r=t.next(),!o&&"$"==r&&t.match("{")&&t.skipTo("}"),o=!o&&"\\"==r&&!e}return!a&&e||(n.tokenize=null),"string"}}function x(e){return function(t,n){for(var r,o=!1,a=!1;!t.eol();){if(!o&&t.match('"')&&("single"==e||t.match('""'))){a=!0;break}if(!o&&t.match("``")){w=x(e),a=!0;break}r=t.next(),o="single"==e&&!o&&"\\"==r}return a&&(n.tokenize=null),"string"}}e.defineMode("clike",function(i,s){function c(e,t){var n=e.next();if(S[n]){var r=S[n](e,t);if(!1!==r)return r}if('"'==n||"'"==n)return t.tokenize=u(n),t.tokenize(e,t);if(D.test(n))return p=n,null;if(L.test(n)){if(e.backUp(1),e.match(I))return"number";e.next()}if("/"==n){if(e.eat("*"))return t.tokenize=d,d(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(F.test(n)){for(;!e.match(/^\/[\/*]/,!1)&&e.eat(F););return"operator"}if(e.eatWhile(z),P)for(;e.match(P);)e.eatWhile(z);var o=e.current();return l(x,o)?(l(w,o)&&(p="newstatement"),l(v,o)&&(m=!0),"keyword"):l(b,o)?"type":l(k,o)?(l(w,o)&&(p="newstatement"),"builtin"):l(_,o)?"atom":"variable"}function u(e){return function(t,n){for(var r,o=!1,a=!1;null!=(r=t.next());){if(r==e&&!o){a=!0;break}o=!o&&"\\"==r}return(a||!o&&!C)&&(n.tokenize=null),"string"}}function d(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=null;break}r="*"==n}return"comment"}function f(e,t){s.typeFirstDefinitions&&e.eol()&&a(t.context)&&(t.typeAtEndOfLine=o(e,t,e.pos))}var p,m,h=i.indentUnit,g=s.statementIndentUnit||h,y=s.dontAlignCalls,x=s.keywords||{},b=s.types||{},k=s.builtin||{},w=s.blockKeywords||{},v=s.defKeywords||{},_=s.atoms||{},S=s.hooks||{},C=s.multiLineStrings,T=!1!==s.indentStatements,M=!1!==s.indentSwitch,P=s.namespaceSeparator,D=s.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,L=s.numberStart||/[\d\.]/,I=s.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,F=s.isOperatorChar||/[+\-*&%=<>!?|\/]/,z=s.isIdentifierChar||/[\w\$_\xa1-\uffff]/;return{startState:function(e){return{tokenize:null,context:new t((e||0)-h,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var i=t.context;if(e.sol()&&(null==i.align&&(i.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return f(e,t),null;p=m=null;var l=(t.tokenize||c)(e,t);if("comment"==l||"meta"==l)return l;if(null==i.align&&(i.align=!0),";"==p||":"==p||","==p&&e.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==t.context.type;)r(t);else if("{"==p)n(t,e.column(),"}");else if("["==p)n(t,e.column(),"]");else if("("==p)n(t,e.column(),")");else if("}"==p){for(;"statement"==i.type;)i=r(t);for("}"==i.type&&(i=r(t));"statement"==i.type;)i=r(t)}else p==i.type?r(t):T&&(("}"==i.type||"top"==i.type)&&";"!=p||"statement"==i.type&&"newstatement"==p)&&n(t,e.column(),"statement",e.current());if("variable"==l&&("def"==t.prevToken||s.typeFirstDefinitions&&o(e,t,e.start)&&a(t.context)&&e.match(/^\s*\(/,!1))&&(l="def"),S.token){var u=S.token(e,t,l);void 0!==u&&(l=u)}return"def"==l&&!1===s.styleDefs&&(l="variable"),t.startOfLine=!1,t.prevToken=m?"def":l||p,f(e,t),l},indent:function(t,n){if(t.tokenize!=c&&null!=t.tokenize||t.typeAtEndOfLine)return e.Pass;var r=t.context,o=n&&n.charAt(0);if("statement"==r.type&&"}"==o&&(r=r.prev),s.dontIndentStatements)for(;"statement"==r.type&&s.dontIndentStatements.test(r.info);)r=r.prev;if(S.indent){var a=S.indent(t,r,n);if("number"==typeof a)return a}var i=o==r.type,l=r.prev&&"switch"==r.prev.info;if(s.allmanIndentation&&/[{(]/.test(o)){for(;"top"!=r.type&&"}"!=r.type;)r=r.prev;return r.indented}return"statement"==r.type?r.indented+("{"==o?0:g):!r.align||y&&")"==r.type?")"!=r.type||i?r.indented+(i?0:h)+(i||!l||/^(?:case|default)\b/.test(n)?0:h):r.indented+g:r.column+(i?0:1)},electricInput:M?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var b="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",k="int long char short double float unsigned signed void size_t ptrdiff_t";h(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:i(b),types:i(k+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:i("case do else for if switch while struct"),defKeywords:i("struct"),typeFirstDefinitions:!0,atoms:i("null true false"),hooks:{"#":s,"*":c},modeProps:{fold:["brace","include"]}}),h(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:i(b+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:i(k+" bool wchar_t"),blockKeywords:i("catch class do else finally for if struct switch try while"),defKeywords:i("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:i("true false null"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,hooks:{"#":s,"*":c,u:d,U:d,L:d,R:d,0:u,1:u,2:u,3:u,4:u,5:u,6:u,7:u,8:u,9:u,token:function(e,t,n){if("variable"==n&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&f(e.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),h("text/x-java",{name:"clike",keywords:i("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:i("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:i("catch class do else finally for if switch try while"),defKeywords:i("class interface package enum @interface"),typeFirstDefinitions:!0,atoms:i("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(e){return!e.match("interface",!1)&&(e.eatWhile(/[\w\$_]/),"meta")}},modeProps:{fold:["brace","import"]}}),h("text/x-csharp",{name:"clike",keywords:i("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:i("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:i("catch class do else finally for foreach if struct switch try while"),defKeywords:i("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:i("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=p,p(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),h("text/x-scala",{name:"clike",keywords:i("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:i("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:i("catch class enum do else finally for forSome if match switch try while"),defKeywords:i("class enum def object package trait type val var"),atoms:i("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return!!e.match('""')&&(t.tokenize=g,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(e,n){var r=n.context;return!("}"!=r.type||!r.align||!e.eat(">"))&&(n.context=new t(r.indented,r.column,r.type,r.info,null,r.prev),"operator")}},modeProps:{closeBrackets:{triples:'"'}}}),h("text/x-kotlin",{name:"clike",keywords:i("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend"),types:i("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:i("catch class do else finally for if where try while enum"),defKeywords:i("class val var object package interface fun"),atoms:i("true false null this"),hooks:{'"':function(e,t){return t.tokenize=y(e.match('""')),t.tokenize(e,t)}},modeProps:{closeBrackets:{triples:'"'}}}),h(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:i("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:i("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:i("for while do if else struct"),builtin:i("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:i("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":s},modeProps:{fold:["brace","include"]}}),h("text/x-nesc",{name:"clike",keywords:i(b+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:i(k),blockKeywords:i("case do else for if switch while struct"),atoms:i("null true false"),hooks:{"#":s},modeProps:{fold:["brace","include"]}}),h("text/x-objectivec",{name:"clike",keywords:i(b+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:i(k),atoms:i("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(e){return e.eatWhile(/[\w\$]/),"keyword"},"#":s,indent:function(e,t,n){if("statement"==t.type&&/^@\w/.test(n))return t.indented}},modeProps:{fold:"brace"}}),h("text/x-squirrel",{name:"clike",keywords:i("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:i(k),blockKeywords:i("case catch class else for foreach if switch try while"),defKeywords:i("function local class"),typeFirstDefinitions:!0,atoms:i("true false null"),hooks:{"#":s},modeProps:{fold:["brace","include"]}});var w=null;h("text/x-ceylon",{name:"clike",keywords:i("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(e){var t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:i("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:i("class dynamic function interface module object package value"),builtin:i("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:i("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return t.tokenize=x(e.match('""')?"triple":"single"),t.tokenize(e,t)},"`":function(e,t){return!(!w||!e.match("`"))&&(t.tokenize=w,w=null,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(e,t,n){if(("variable"==n||"type"==n)&&"."==t.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})});
      // -------------------------------------------------------------------------
//  Part of the CodeChecker project, under the Apache License v2.0 with
//  LLVM Exceptions. See LICENSE for license information.
//  SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
// -------------------------------------------------------------------------

var BugViewer = {
  _files : [],
  _reports : [],
  _lineWidgets : [],
  _navigationMenuItems : [],
  _sourceFileData : null,
  _currentReport : null,
  _lastBugEvent  : null,

  init : function (files, reports) {
    this._files = files;
    this._reports = reports;

    this.initEscapeChars();
  },

  initEscapeChars : function () {
    this.escapeChars = {
      ' ' : 'nbsp',
      '<' : 'lt',
      '>' : 'gt',
      '"' : 'quot',
      '&' : 'amp'
    };

    var regexString = '[';
    for (var key in this.escapeChars) {
      regexString += key;
    }
    regexString += ']';

    this.escapeRegExp = new RegExp( regexString, 'g');
  },

  escapeHTML : function (str) {
    var that = this;

    return str.replace(this.escapeRegExp, function (m) {
      return '&' + that.escapeChars[m] + ';';
    });
  },

  initByUrl : function () {
    if (!this._reports) return;

    var state = {};
    window.location.hash.substr(1).split('&').forEach(function (s) {
      var parts = s.split('=');
      state[parts[0]] = parts[1];
    });

    for (var key in this._reports) {
      var report = this._reports[key];
      if (report.reportHash === state['reportHash']) {
        this.navigate(report);
        return;
      }
    }

    this.navigate(this._reports[0]);
  },

  create : function () {
    this._content = document.getElementById('editor-wrapper');
    this._filepath = document.getElementById('file-path');
    this._checkerName = document.getElementById('checker-name');
    this._reviewStatusWrapper =
      document.getElementById('review-status-wrapper');
    this._reviewStatus = document.getElementById('review-status');
    this._editor = document.getElementById('editor');

    this._codeMirror = CodeMirror(this._editor, {
      mode: 'text/x-c++src',
      matchBrackets : true,
      lineNumbers : true,
      readOnly : true,
      foldGutter : true,
      extraKeys : {},
      viewportMargin : 100
    });

    this._createNavigationMenu();
  },

  navigate : function (report, item) {
    if (!item) {
      var items = this._navigationMenuItems.filter(function (navItem) {
        return navItem.report.reportHash === report.reportHash;
      });

      if (!items.length) return;

      item = items[0].widget;
    }

    this._selectedReport.classList.remove('active');
    this._selectedReport = item;
    this._selectedReport.classList.add('active');
    this.setReport(report);
  },

  _createNavigationMenu : function () {
    var that = this;

    var nav = document.getElementById('report-nav');
    var list = document.createElement('ul');
    this._reports.forEach(function (report) {
      var events = report['events'];
      var lastBugEvent = events[events.length - 1];
      var item = document.createElement('li');

      var severity = document.createElement('i');
      severity.className = 'severity-' + report.severity.toLowerCase();

      item.appendChild(severity);
      item.appendChild(document.createTextNode(lastBugEvent.message));

      item.addEventListener('click', function () {
        that.navigate(report, item);
      })
      list.appendChild(item);
      that._navigationMenuItems.push({ report : report, widget : item });
    });

    if (!this._selectedReport && list.childNodes.length) {
      this._selectedReport = list.childNodes[0];
      this._selectedReport.classList.add('active');
    }

    nav.appendChild(list);
  },

  setReport : function (report) {
    this._currentReport = report;
    var events = report['events'];
    var lastBugEvent = events[events.length - 1];
    this.setCurrentBugEvent(lastBugEvent, events.length - 1);
    this.setCheckerName(report.checkerName);
    this.setReviewStatus(report.reviewStatus);

    window.location.hash = '#reportHash=' + report.reportHash;
  },

  setCurrentBugEvent : function (event, idx) {
    this._currentBugEvent = event;
    this.setSourceFileData(this._files[event.location.file]);
    this.drawBugPath();

    this.jumpTo(event.location.line, 0);
    this.highlightBugEvent(event, idx);
  },

  highlightBugEvent : function (event, idx) {
    this._lineWidgets.forEach(function (widget) {
      var lineIdx = widget.node.getAttribute('idx');
      if (parseInt(lineIdx) === idx) {
        widget.node.classList.add('current');
      }
    });
  },

  setCheckerName : function (checkerName) {
    this._checkerName.innerHTML = checkerName;
  },

  setReviewStatus : function (status) {
    if (status) {
      var className =
        'review-status-' + status.toLowerCase().split(' ').join('-');
      this._reviewStatus.className = "review-status " + className;

      this._reviewStatus.innerHTML = status;
      this._reviewStatusWrapper.style.display = 'block';
    } else {
      this._reviewStatusWrapper.style.display = 'none';
    }
  },

  setSourceFileData : function (file) {
    if (this._sourceFileData && file.id === this._sourceFileData.id) {
      return;
    }

    this._sourceFileData = file;
    this._filepath.innerHTML = file.path;
    this._codeMirror.doc.setValue(file.content);
    this._refresh();
  },

  _refresh : function () {
    var that = this;
    setTimeout(function () {
      var fullHeight = parseInt(that._content.clientHeight);
      var headerHeight = that._filepath.clientHeight;

      that._codeMirror.setSize('auto', fullHeight - headerHeight);
      that._codeMirror.refresh();
    }, 200);
  },

  clearBubbles : function () {
    this._lineWidgets.forEach(function (widget) { widget.clear(); });
    this._lineWidgets = [];
  },

  getMessage : function (event, kind) {
    if (kind === 'macro') {
      var name = 'macro expansion' + (event.name ? ': ' + event.name : '');

      return '<span class="tag macro">' + name + '</span>'
        + this.escapeHTML(event.expansion).replace(/(?:\r\n|\r|\n)/g, '<br>');
    } else if (kind === 'note') {
      return '<span class="tag note">note</span>'
        +  this.escapeHTML(event.message).replace(/(?:\r\n|\r|\n)/g, '<br>');
    }
  },

  addExtraPathEvents : function (events, kind) {
    var that = this;

    if (!events) {
      return;
    }

    events.forEach(function (event) {
      if (event.location.file !== that._currentBugEvent.location.file) {
        return;
      }

      var left =
        that._codeMirror.defaultCharWidth() * event.location.col + 'px';

      var element = document.createElement('div');
      element.setAttribute('style', 'margin-left: ' + left);
      element.setAttribute('class', 'check-msg ' + kind);

      var msg = document.createElement('span');
      msg.innerHTML = that.getMessage(event, kind);
      element.appendChild(msg);

      that._lineWidgets.push(that._codeMirror.addLineWidget(
        event.location.line - 1, element));
    });
  },

  drawBugPath : function () {
    var that = this;

    this.clearBubbles();

    this.addExtraPathEvents(this._currentReport.macros, 'macro');
    this.addExtraPathEvents(this._currentReport.notes, 'note');

    // Processing bug path events.
    var currentEvents = this._currentReport.events;
    currentEvents.forEach(function (event, step) {
      if (event.location.file !== that._currentBugEvent.location.file)
        return;

      var left =
        that._codeMirror.defaultCharWidth() * event.location.col + 'px';
      var type = step === currentEvents.length - 1 ? 'error' : 'info';

      var element = document.createElement('div');
      element.setAttribute('style', 'margin-left: ' + left);
      element.setAttribute('class', 'check-msg ' + type);
      element.setAttribute('idx', step);

      var enumeration = document.createElement('span');
      enumeration.setAttribute('class', 'checker-enum ' + type);
      enumeration.innerHTML = step + 1;

      if (currentEvents.length > 1)
        element.appendChild(enumeration);

      var prevBugEvent = step - 1;
      if (step > 0) {
        var prevBug = document.createElement('span');
        prevBug.setAttribute('class', 'arrow left-arrow');
        prevBug.addEventListener('click', function () {
          var event = currentEvents[prevBugEvent];
          that.setCurrentBugEvent(event, prevBugEvent);
        });
        element.appendChild(prevBug);
      }

      var msg = document.createElement('span');
      msg.innerHTML = that.escapeHTML(event.message)
        .replace(/(?:\r\n|\r|\n)/g, '<br>');

      element.appendChild(msg);

      var nextBugEvent = step + 1;
      if (nextBugEvent < currentEvents.length) {
        var nextBug = document.createElement('span');
        nextBug.setAttribute('class', 'arrow right-arrow');
        nextBug.addEventListener('click', function () {
          var event = currentEvents[nextBugEvent];
          that.setCurrentBugEvent(event, nextBugEvent);
        });
        element.appendChild(nextBug);
      }


      that._lineWidgets.push(that._codeMirror.addLineWidget(
        event.location.line - 1, element));
    });
  },

  jumpTo : function (line, column) {
    var that = this;

    setTimeout(function () {
      var selPosPixel
        = that._codeMirror.charCoords({ line : line, ch : column }, 'local');
      var editorSize = {
        width  : that._editor.clientWidth,
        height : that._editor.clientHeight
      };

      that._codeMirror.scrollIntoView({
        top    : selPosPixel.top - 100,
        bottom : selPosPixel.top + editorSize.height - 150,
        left   : selPosPixel.left < editorSize.width - 100
               ? 0
               : selPosPixel.left - 50,
        right  : selPosPixel.left < editorSize.width - 100
               ? 10
               : selPosPixel.left + editorSize.width - 100
      });
    }, 0);
  }
}


      var data = {"files": {"0": {"id": 0, "path": "/src/include/linux/ieee80211.h", "content": "/* SPDX-License-Identifier: GPL-2.0-only */\n/*\n * IEEE 802.11 defines\n *\n * Copyright (c) 2001-2002, SSH Communications Security Corp and Jouni Malinen\n * <jkmaline@cc.hut.fi>\n * Copyright (c) 2002-2003, Jouni Malinen <jkmaline@cc.hut.fi>\n * Copyright (c) 2005, Devicescape Software, Inc.\n * Copyright (c) 2006, Michael Wu <flamingice@sourmilk.net>\n * Copyright (c) 2013 - 2014 Intel Mobile Communications GmbH\n * Copyright (c) 2016 - 2017 Intel Deutschland GmbH\n * Copyright (c) 2018 - 2020 Intel Corporation\n */\n\n#ifndef LINUX_IEEE80211_H\n#define LINUX_IEEE80211_H\n\n#include <linux/types.h>\n#include <linux/if_ether.h>\n#include <linux/etherdevice.h>\n#include <asm/byteorder.h>\n#include <asm/unaligned.h>\n\n/*\n * DS bit usage\n *\n * TA = transmitter address\n * RA = receiver address\n * DA = destination address\n * SA = source address\n *\n * ToDS    FromDS  A1(RA)  A2(TA)  A3      A4      Use\n * -----------------------------------------------------------------\n *  0       0       DA      SA      BSSID   -       IBSS/DLS\n *  0       1       DA      BSSID   SA      -       AP -> STA\n *  1       0       BSSID   SA      DA      -       AP <- STA\n *  1       1       RA      TA      DA      SA      unspecified (WDS)\n */\n\n#define FCS_LEN 4\n\n#define IEEE80211_FCTL_VERS\t\t0x0003\n#define IEEE80211_FCTL_FTYPE\t\t0x000c\n#define IEEE80211_FCTL_STYPE\t\t0x00f0\n#define IEEE80211_FCTL_TODS\t\t0x0100\n#define IEEE80211_FCTL_FROMDS\t\t0x0200\n#define IEEE80211_FCTL_MOREFRAGS\t0x0400\n#define IEEE80211_FCTL_RETRY\t\t0x0800\n#define IEEE80211_FCTL_PM\t\t0x1000\n#define IEEE80211_FCTL_MOREDATA\t\t0x2000\n#define IEEE80211_FCTL_PROTECTED\t0x4000\n#define IEEE80211_FCTL_ORDER\t\t0x8000\n#define IEEE80211_FCTL_CTL_EXT\t\t0x0f00\n\n#define IEEE80211_SCTL_FRAG\t\t0x000F\n#define IEEE80211_SCTL_SEQ\t\t0xFFF0\n\n#define IEEE80211_FTYPE_MGMT\t\t0x0000\n#define IEEE80211_FTYPE_CTL\t\t0x0004\n#define IEEE80211_FTYPE_DATA\t\t0x0008\n#define IEEE80211_FTYPE_EXT\t\t0x000c\n\n/* management */\n#define IEEE80211_STYPE_ASSOC_REQ\t0x0000\n#define IEEE80211_STYPE_ASSOC_RESP\t0x0010\n#define IEEE80211_STYPE_REASSOC_REQ\t0x0020\n#define IEEE80211_STYPE_REASSOC_RESP\t0x0030\n#define IEEE80211_STYPE_PROBE_REQ\t0x0040\n#define IEEE80211_STYPE_PROBE_RESP\t0x0050\n#define IEEE80211_STYPE_BEACON\t\t0x0080\n#define IEEE80211_STYPE_ATIM\t\t0x0090\n#define IEEE80211_STYPE_DISASSOC\t0x00A0\n#define IEEE80211_STYPE_AUTH\t\t0x00B0\n#define IEEE80211_STYPE_DEAUTH\t\t0x00C0\n#define IEEE80211_STYPE_ACTION\t\t0x00D0\n\n/* control */\n#define IEEE80211_STYPE_CTL_EXT\t\t0x0060\n#define IEEE80211_STYPE_BACK_REQ\t0x0080\n#define IEEE80211_STYPE_BACK\t\t0x0090\n#define IEEE80211_STYPE_PSPOLL\t\t0x00A0\n#define IEEE80211_STYPE_RTS\t\t0x00B0\n#define IEEE80211_STYPE_CTS\t\t0x00C0\n#define IEEE80211_STYPE_ACK\t\t0x00D0\n#define IEEE80211_STYPE_CFEND\t\t0x00E0\n#define IEEE80211_STYPE_CFENDACK\t0x00F0\n\n/* data */\n#define IEEE80211_STYPE_DATA\t\t\t0x0000\n#define IEEE80211_STYPE_DATA_CFACK\t\t0x0010\n#define IEEE80211_STYPE_DATA_CFPOLL\t\t0x0020\n#define IEEE80211_STYPE_DATA_CFACKPOLL\t\t0x0030\n#define IEEE80211_STYPE_NULLFUNC\t\t0x0040\n#define IEEE80211_STYPE_CFACK\t\t\t0x0050\n#define IEEE80211_STYPE_CFPOLL\t\t\t0x0060\n#define IEEE80211_STYPE_CFACKPOLL\t\t0x0070\n#define IEEE80211_STYPE_QOS_DATA\t\t0x0080\n#define IEEE80211_STYPE_QOS_DATA_CFACK\t\t0x0090\n#define IEEE80211_STYPE_QOS_DATA_CFPOLL\t\t0x00A0\n#define IEEE80211_STYPE_QOS_DATA_CFACKPOLL\t0x00B0\n#define IEEE80211_STYPE_QOS_NULLFUNC\t\t0x00C0\n#define IEEE80211_STYPE_QOS_CFACK\t\t0x00D0\n#define IEEE80211_STYPE_QOS_CFPOLL\t\t0x00E0\n#define IEEE80211_STYPE_QOS_CFACKPOLL\t\t0x00F0\n\n/* extension, added by 802.11ad */\n#define IEEE80211_STYPE_DMG_BEACON\t\t0x0000\n#define IEEE80211_STYPE_S1G_BEACON\t\t0x0010\n\n/* bits unique to S1G beacon */\n#define IEEE80211_S1G_BCN_NEXT_TBTT\t0x100\n\n/* see 802.11ah-2016 9.9 NDP CMAC frames */\n#define IEEE80211_S1G_1MHZ_NDP_BITS\t25\n#define IEEE80211_S1G_1MHZ_NDP_BYTES\t4\n#define IEEE80211_S1G_2MHZ_NDP_BITS\t37\n#define IEEE80211_S1G_2MHZ_NDP_BYTES\t5\n\n#define IEEE80211_NDP_FTYPE_CTS\t\t\t0\n#define IEEE80211_NDP_FTYPE_CF_END\t\t0\n#define IEEE80211_NDP_FTYPE_PS_POLL\t\t1\n#define IEEE80211_NDP_FTYPE_ACK\t\t\t2\n#define IEEE80211_NDP_FTYPE_PS_POLL_ACK\t\t3\n#define IEEE80211_NDP_FTYPE_BA\t\t\t4\n#define IEEE80211_NDP_FTYPE_BF_REPORT_POLL\t5\n#define IEEE80211_NDP_FTYPE_PAGING\t\t6\n#define IEEE80211_NDP_FTYPE_PREQ\t\t7\n\n#define SM64(f, v)\t((((u64)v) << f##_S) & f)\n\n/* NDP CMAC frame fields */\n#define IEEE80211_NDP_FTYPE                    0x0000000000000007\n#define IEEE80211_NDP_FTYPE_S                  0x0000000000000000\n\n/* 1M Probe Request 11ah 9.9.3.1.1 */\n#define IEEE80211_NDP_1M_PREQ_ANO      0x0000000000000008\n#define IEEE80211_NDP_1M_PREQ_ANO_S                     3\n#define IEEE80211_NDP_1M_PREQ_CSSID    0x00000000000FFFF0\n#define IEEE80211_NDP_1M_PREQ_CSSID_S                   4\n#define IEEE80211_NDP_1M_PREQ_RTYPE    0x0000000000100000\n#define IEEE80211_NDP_1M_PREQ_RTYPE_S                  20\n#define IEEE80211_NDP_1M_PREQ_RSV      0x0000000001E00000\n#define IEEE80211_NDP_1M_PREQ_RSV      0x0000000001E00000\n/* 2M Probe Request 11ah 9.9.3.1.2 */\n#define IEEE80211_NDP_2M_PREQ_ANO      0x0000000000000008\n#define IEEE80211_NDP_2M_PREQ_ANO_S                     3\n#define IEEE80211_NDP_2M_PREQ_CSSID    0x0000000FFFFFFFF0\n#define IEEE80211_NDP_2M_PREQ_CSSID_S                   4\n#define IEEE80211_NDP_2M_PREQ_RTYPE    0x0000001000000000\n#define IEEE80211_NDP_2M_PREQ_RTYPE_S                  36\n\n#define IEEE80211_ANO_NETTYPE_WILD              15\n\n/* bits unique to S1G beacon */\n#define IEEE80211_S1G_BCN_NEXT_TBTT    0x100\n\n/* control extension - for IEEE80211_FTYPE_CTL | IEEE80211_STYPE_CTL_EXT */\n#define IEEE80211_CTL_EXT_POLL\t\t0x2000\n#define IEEE80211_CTL_EXT_SPR\t\t0x3000\n#define IEEE80211_CTL_EXT_GRANT\t0x4000\n#define IEEE80211_CTL_EXT_DMG_CTS\t0x5000\n#define IEEE80211_CTL_EXT_DMG_DTS\t0x6000\n#define IEEE80211_CTL_EXT_SSW\t\t0x8000\n#define IEEE80211_CTL_EXT_SSW_FBACK\t0x9000\n#define IEEE80211_CTL_EXT_SSW_ACK\t0xa000\n\n\n#define IEEE80211_SN_MASK\t\t((IEEE80211_SCTL_SEQ) >> 4)\n#define IEEE80211_MAX_SN\t\tIEEE80211_SN_MASK\n#define IEEE80211_SN_MODULO\t\t(IEEE80211_MAX_SN + 1)\n\n\n/* PV1 Layout 11ah 9.8.3.1 */\n#define IEEE80211_PV1_FCTL_VERS\t\t0x0003\n#define IEEE80211_PV1_FCTL_FTYPE\t0x001c\n#define IEEE80211_PV1_FCTL_STYPE\t0x00e0\n#define IEEE80211_PV1_FCTL_TODS\t\t0x0100\n#define IEEE80211_PV1_FCTL_MOREFRAGS\t0x0200\n#define IEEE80211_PV1_FCTL_PM\t\t0x0400\n#define IEEE80211_PV1_FCTL_MOREDATA\t0x0800\n#define IEEE80211_PV1_FCTL_PROTECTED\t0x1000\n#define IEEE80211_PV1_FCTL_END_SP       0x2000\n#define IEEE80211_PV1_FCTL_RELAYED      0x4000\n#define IEEE80211_PV1_FCTL_ACK_POLICY   0x8000\n#define IEEE80211_PV1_FCTL_CTL_EXT\t0x0f00\n\nstatic inline bool ieee80211_sn_less(u16 sn1, u16 sn2)\n{\n\treturn ((sn1 - sn2) & IEEE80211_SN_MASK) > (IEEE80211_SN_MODULO >> 1);\n}\n\nstatic inline u16 ieee80211_sn_add(u16 sn1, u16 sn2)\n{\n\treturn (sn1 + sn2) & IEEE80211_SN_MASK;\n}\n\nstatic inline u16 ieee80211_sn_inc(u16 sn)\n{\n\treturn ieee80211_sn_add(sn, 1);\n}\n\nstatic inline u16 ieee80211_sn_sub(u16 sn1, u16 sn2)\n{\n\treturn (sn1 - sn2) & IEEE80211_SN_MASK;\n}\n\n#define IEEE80211_SEQ_TO_SN(seq)\t(((seq) & IEEE80211_SCTL_SEQ) >> 4)\n#define IEEE80211_SN_TO_SEQ(ssn)\t(((ssn) << 4) & IEEE80211_SCTL_SEQ)\n\n/* miscellaneous IEEE 802.11 constants */\n#define IEEE80211_MAX_FRAG_THRESHOLD\t2352\n#define IEEE80211_MAX_RTS_THRESHOLD\t2353\n#define IEEE80211_MAX_AID\t\t2007\n#define IEEE80211_MAX_AID_S1G\t\t8191\n#define IEEE80211_MAX_TIM_LEN\t\t251\n#define IEEE80211_MAX_MESH_PEERINGS\t63\n/* Maximum size for the MA-UNITDATA primitive, 802.11 standard section\n   6.2.1.1.2.\n\n   802.11e clarifies the figure in section 7.1.2. The frame body is\n   up to 2304 octets long (maximum MSDU size) plus any crypt overhead. */\n#define IEEE80211_MAX_DATA_LEN\t\t2304\n/* 802.11ad extends maximum MSDU size for DMG (freq > 40Ghz) networks\n * to 7920 bytes, see 8.2.3 General frame format\n */\n#define IEEE80211_MAX_DATA_LEN_DMG\t7920\n/* 30 byte 4 addr hdr, 2 byte QoS, 2304 byte MSDU, 12 byte crypt, 4 byte FCS */\n#define IEEE80211_MAX_FRAME_LEN\t\t2352\n\n/* Maximal size of an A-MSDU that can be transported in a HT BA session */\n#define IEEE80211_MAX_MPDU_LEN_HT_BA\t\t4095\n\n/* Maximal size of an A-MSDU */\n#define IEEE80211_MAX_MPDU_LEN_HT_3839\t\t3839\n#define IEEE80211_MAX_MPDU_LEN_HT_7935\t\t7935\n\n#define IEEE80211_MAX_MPDU_LEN_VHT_3895\t\t3895\n#define IEEE80211_MAX_MPDU_LEN_VHT_7991\t\t7991\n#define IEEE80211_MAX_MPDU_LEN_VHT_11454\t11454\n\n#define IEEE80211_MAX_SSID_LEN\t\t32\n\n#define IEEE80211_MAX_MESH_ID_LEN\t32\n\n#define IEEE80211_FIRST_TSPEC_TSID\t8\n#define IEEE80211_NUM_TIDS\t\t16\n\n/* number of user priorities 802.11 uses */\n#define IEEE80211_NUM_UPS\t\t8\n/* number of ACs */\n#define IEEE80211_NUM_ACS\t\t4\n\n#define IEEE80211_QOS_CTL_LEN\t\t2\n/* 1d tag mask */\n#define IEEE80211_QOS_CTL_TAG1D_MASK\t\t0x0007\n/* TID mask */\n#define IEEE80211_QOS_CTL_TID_MASK\t\t0x000f\n/* EOSP */\n#define IEEE80211_QOS_CTL_EOSP\t\t\t0x0010\n/* ACK policy */\n#define IEEE80211_QOS_CTL_ACK_POLICY_NORMAL\t0x0000\n#define IEEE80211_QOS_CTL_ACK_POLICY_NOACK\t0x0020\n#define IEEE80211_QOS_CTL_ACK_POLICY_NO_EXPL\t0x0040\n#define IEEE80211_QOS_CTL_ACK_POLICY_BLOCKACK\t0x0060\n#define IEEE80211_QOS_CTL_ACK_POLICY_MASK\t0x0060\n/* A-MSDU 802.11n */\n#define IEEE80211_QOS_CTL_A_MSDU_PRESENT\t0x0080\n/* Mesh Control 802.11s */\n#define IEEE80211_QOS_CTL_MESH_CONTROL_PRESENT  0x0100\n\n/* Mesh Power Save Level */\n#define IEEE80211_QOS_CTL_MESH_PS_LEVEL\t\t0x0200\n/* Mesh Receiver Service Period Initiated */\n#define IEEE80211_QOS_CTL_RSPI\t\t\t0x0400\n\n/* U-APSD queue for WMM IEs sent by AP */\n#define IEEE80211_WMM_IE_AP_QOSINFO_UAPSD\t(1<<7)\n#define IEEE80211_WMM_IE_AP_QOSINFO_PARAM_SET_CNT_MASK\t0x0f\n\n/* U-APSD queues for WMM IEs sent by STA */\n#define IEEE80211_WMM_IE_STA_QOSINFO_AC_VO\t(1<<0)\n#define IEEE80211_WMM_IE_STA_QOSINFO_AC_VI\t(1<<1)\n#define IEEE80211_WMM_IE_STA_QOSINFO_AC_BK\t(1<<2)\n#define IEEE80211_WMM_IE_STA_QOSINFO_AC_BE\t(1<<3)\n#define IEEE80211_WMM_IE_STA_QOSINFO_AC_MASK\t0x0f\n\n/* U-APSD max SP length for WMM IEs sent by STA */\n#define IEEE80211_WMM_IE_STA_QOSINFO_SP_ALL\t0x00\n#define IEEE80211_WMM_IE_STA_QOSINFO_SP_2\t0x01\n#define IEEE80211_WMM_IE_STA_QOSINFO_SP_4\t0x02\n#define IEEE80211_WMM_IE_STA_QOSINFO_SP_6\t0x03\n#define IEEE80211_WMM_IE_STA_QOSINFO_SP_MASK\t0x03\n#define IEEE80211_WMM_IE_STA_QOSINFO_SP_SHIFT\t5\n\n#define IEEE80211_HT_CTL_LEN\t\t4\n\nstruct ieee80211_hdr {\n\t__le16 frame_control;\n\t__le16 duration_id;\n\tu8 addr1[ETH_ALEN];\n\tu8 addr2[ETH_ALEN];\n\tu8 addr3[ETH_ALEN];\n\t__le16 seq_ctrl;\n\tu8 addr4[ETH_ALEN];\n} __packed __aligned(2);\n\nstruct ieee80211_hdr_3addr {\n\t__le16 frame_control;\n\t__le16 duration_id;\n\tu8 addr1[ETH_ALEN];\n\tu8 addr2[ETH_ALEN];\n\tu8 addr3[ETH_ALEN];\n\t__le16 seq_ctrl;\n} __packed __aligned(2);\n\nstruct ieee80211_qos_hdr {\n\t__le16 frame_control;\n\t__le16 duration_id;\n\tu8 addr1[ETH_ALEN];\n\tu8 addr2[ETH_ALEN];\n\tu8 addr3[ETH_ALEN];\n\t__le16 seq_ctrl;\n\t__le16 qos_ctrl;\n} __packed __aligned(2);\n\n/**\n * ieee80211_has_tods - check if IEEE80211_FCTL_TODS is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_tods(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_TODS)) != 0;\n}\n\n/**\n * ieee80211_has_fromds - check if IEEE80211_FCTL_FROMDS is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_fromds(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FROMDS)) != 0;\n}\n\n/**\n * ieee80211_has_a4 - check if IEEE80211_FCTL_TODS and IEEE80211_FCTL_FROMDS are set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_a4(__le16 fc)\n{\n\t__le16 tmp = cpu_to_le16(IEEE80211_FCTL_TODS | IEEE80211_FCTL_FROMDS);\n\treturn (fc & tmp) == tmp;\n}\n\n/**\n * ieee80211_has_morefrags - check if IEEE80211_FCTL_MOREFRAGS is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_morefrags(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_MOREFRAGS)) != 0;\n}\n\n/**\n * ieee80211_has_retry - check if IEEE80211_FCTL_RETRY is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_retry(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_RETRY)) != 0;\n}\n\n/**\n * ieee80211_has_pm - check if IEEE80211_FCTL_PM is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_pm(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_PM)) != 0;\n}\n\n/**\n * ieee80211_has_moredata - check if IEEE80211_FCTL_MOREDATA is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_moredata(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_MOREDATA)) != 0;\n}\n\n/**\n * ieee80211_has_protected - check if IEEE80211_FCTL_PROTECTED is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_protected(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_PROTECTED)) != 0;\n}\n\n/**\n * ieee80211_has_order - check if IEEE80211_FCTL_ORDER is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_has_order(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_ORDER)) != 0;\n}\n\n/**\n * ieee80211_is_mgmt - check if type is IEEE80211_FTYPE_MGMT\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_mgmt(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT);\n}\n\n/**\n * ieee80211_is_ctl - check if type is IEEE80211_FTYPE_CTL\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_ctl(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL);\n}\n\n/**\n * ieee80211_is_data - check if type is IEEE80211_FTYPE_DATA\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_data(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_DATA);\n}\n\n/**\n * ieee80211_is_ext - check if type is IEEE80211_FTYPE_EXT\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_ext(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_EXT);\n}\n\n\n/**\n * ieee80211_is_data_qos - check if type is IEEE80211_FTYPE_DATA and IEEE80211_STYPE_QOS_DATA is set\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_data_qos(__le16 fc)\n{\n\t/*\n\t * mask with QOS_DATA rather than IEEE80211_FCTL_STYPE as we just need\n\t * to check the one bit\n\t */\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_STYPE_QOS_DATA)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_DATA | IEEE80211_STYPE_QOS_DATA);\n}\n\n/**\n * ieee80211_is_data_present - check if type is IEEE80211_FTYPE_DATA and has data\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_data_present(__le16 fc)\n{\n\t/*\n\t * mask with 0x40 and test that that bit is clear to only return true\n\t * for the data-containing substypes.\n\t */\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | 0x40)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_DATA);\n}\n\n/**\n * ieee80211_is_assoc_req - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_ASSOC_REQ\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_assoc_req(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_ASSOC_REQ);\n}\n\n/**\n * ieee80211_is_assoc_resp - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_ASSOC_RESP\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_assoc_resp(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_ASSOC_RESP);\n}\n\n/**\n * ieee80211_is_reassoc_req - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_REASSOC_REQ\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_reassoc_req(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_REASSOC_REQ);\n}\n\n/**\n * ieee80211_is_reassoc_resp - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_REASSOC_RESP\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_reassoc_resp(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_REASSOC_RESP);\n}\n\n/**\n * ieee80211_is_probe_req - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_PROBE_REQ\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_probe_req(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_PROBE_REQ);\n}\n\n/**\n * ieee80211_is_probe_resp - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_PROBE_RESP\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_probe_resp(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_PROBE_RESP);\n}\n\n/**\n * ieee80211_is_beacon - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_BEACON\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_beacon(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_BEACON);\n}\n\n/**\n * ieee80211_is_s1g_beacon - check if IEEE80211_FTYPE_EXT &&\n * IEEE80211_STYPE_S1G_BEACON\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_s1g_beacon(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE |\n\t\t\t\t IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_EXT | IEEE80211_STYPE_S1G_BEACON);\n}\n\n/**\n * ieee80211_next_tbtt_present - check if IEEE80211_FTYPE_EXT &&\n * IEEE80211_STYPE_S1G_BEACON && IEEE80211_S1G_BCN_NEXT_TBTT\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_next_tbtt_present(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_EXT | IEEE80211_STYPE_S1G_BEACON) &&\n\t       fc & cpu_to_le16(IEEE80211_S1G_BCN_NEXT_TBTT);\n}\n\n/**\n * ieee80211_is_s1g_short_beacon - check if next tbtt present bit is set. Only\n * true for S1G beacons when they're short.\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_s1g_short_beacon(__le16 fc)\n{\n\treturn ieee80211_is_s1g_beacon(fc) && ieee80211_next_tbtt_present(fc);\n}\n\n/**\n * ieee80211_is_atim - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_ATIM\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_atim(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_ATIM);\n}\n\n/**\n * ieee80211_is_disassoc - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_DISASSOC\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_disassoc(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_DISASSOC);\n}\n\n/**\n * ieee80211_is_auth - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_AUTH\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_auth(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_AUTH);\n}\n\n/**\n * ieee80211_is_deauth - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_DEAUTH\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_deauth(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_DEAUTH);\n}\n\n/**\n * ieee80211_is_action - check if IEEE80211_FTYPE_MGMT && IEEE80211_STYPE_ACTION\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_action(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_MGMT | IEEE80211_STYPE_ACTION);\n}\n\n/**\n * ieee80211_is_back_req - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_BACK_REQ\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_back_req(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_BACK_REQ);\n}\n\n/**\n * ieee80211_is_back - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_BACK\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_back(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_BACK);\n}\n\n/**\n * ieee80211_is_pspoll - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_PSPOLL\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_pspoll(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_PSPOLL);\n}\n\n/**\n * ieee80211_is_rts - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_RTS\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_rts(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_RTS);\n}\n\n/**\n * ieee80211_is_cts - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_CTS\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_cts(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_CTS);\n}\n\n/**\n * ieee80211_is_ack - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_ACK\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_ack(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_ACK);\n}\n\n/**\n * ieee80211_is_cfend - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_CFEND\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_cfend(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_CFEND);\n}\n\n/**\n * ieee80211_is_cfendack - check if IEEE80211_FTYPE_CTL && IEEE80211_STYPE_CFENDACK\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_cfendack(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_CTL | IEEE80211_STYPE_CFENDACK);\n}\n\n/**\n * ieee80211_is_nullfunc - check if frame is a regular (non-QoS) nullfunc frame\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_nullfunc(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_DATA | IEEE80211_STYPE_NULLFUNC);\n}\n\n/**\n * ieee80211_is_qos_nullfunc - check if frame is a QoS nullfunc frame\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_qos_nullfunc(__le16 fc)\n{\n\treturn (fc & cpu_to_le16(IEEE80211_FCTL_FTYPE | IEEE80211_FCTL_STYPE)) ==\n\t       cpu_to_le16(IEEE80211_FTYPE_DATA | IEEE80211_STYPE_QOS_NULLFUNC);\n}\n\n/**\n * ieee80211_is_any_nullfunc - check if frame is regular or QoS nullfunc frame\n * @fc: frame control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_any_nullfunc(__le16 fc)\n{\n\treturn (ieee80211_is_nullfunc(fc) || ieee80211_is_qos_nullfunc(fc));\n}\n\n/**\n * ieee80211_is_bufferable_mmpdu - check if frame is bufferable MMPDU\n * @fc: frame control field in little-endian byteorder\n */\nstatic inline bool ieee80211_is_bufferable_mmpdu(__le16 fc)\n{\n\t/* IEEE 802.11-2012, definition of \"bufferable management frame\";\n\t * note that this ignores the IBSS special case. */\n\treturn ieee80211_is_mgmt(fc) &&\n\t       (ieee80211_is_action(fc) ||\n\t\tieee80211_is_disassoc(fc) ||\n\t\tieee80211_is_deauth(fc));\n}\n\n/**\n * ieee80211_is_first_frag - check if IEEE80211_SCTL_FRAG is not set\n * @seq_ctrl: frame sequence control bytes in little-endian byteorder\n */\nstatic inline bool ieee80211_is_first_frag(__le16 seq_ctrl)\n{\n\treturn (seq_ctrl & cpu_to_le16(IEEE80211_SCTL_FRAG)) == 0;\n}\n\n/**\n * ieee80211_is_frag - check if a frame is a fragment\n * @hdr: 802.11 header of the frame\n */\nstatic inline bool ieee80211_is_frag(struct ieee80211_hdr *hdr)\n{\n\treturn ieee80211_has_morefrags(hdr->frame_control) ||\n\t       hdr->seq_ctrl & cpu_to_le16(IEEE80211_SCTL_FRAG);\n}\n\nstruct ieee80211s_hdr {\n\tu8 flags;\n\tu8 ttl;\n\t__le32 seqnum;\n\tu8 eaddr1[ETH_ALEN];\n\tu8 eaddr2[ETH_ALEN];\n} __packed __aligned(2);\n\n/* Mesh flags */\n#define MESH_FLAGS_AE_A4 \t0x1\n#define MESH_FLAGS_AE_A5_A6\t0x2\n#define MESH_FLAGS_AE\t\t0x3\n#define MESH_FLAGS_PS_DEEP\t0x4\n\n/**\n * enum ieee80211_preq_flags - mesh PREQ element flags\n *\n * @IEEE80211_PREQ_PROACTIVE_PREP_FLAG: proactive PREP subfield\n */\nenum ieee80211_preq_flags {\n\tIEEE80211_PREQ_PROACTIVE_PREP_FLAG\t= 1<<2,\n};\n\n/**\n * enum ieee80211_preq_target_flags - mesh PREQ element per target flags\n *\n * @IEEE80211_PREQ_TO_FLAG: target only subfield\n * @IEEE80211_PREQ_USN_FLAG: unknown target HWMP sequence number subfield\n */\nenum ieee80211_preq_target_flags {\n\tIEEE80211_PREQ_TO_FLAG\t= 1<<0,\n\tIEEE80211_PREQ_USN_FLAG\t= 1<<2,\n};\n\n/**\n * struct ieee80211_quiet_ie\n *\n * This structure refers to \"Quiet information element\"\n */\nstruct ieee80211_quiet_ie {\n\tu8 count;\n\tu8 period;\n\t__le16 duration;\n\t__le16 offset;\n} __packed;\n\n/**\n * struct ieee80211_msrment_ie\n *\n * This structure refers to \"Measurement Request/Report information element\"\n */\nstruct ieee80211_msrment_ie {\n\tu8 token;\n\tu8 mode;\n\tu8 type;\n\tu8 request[];\n} __packed;\n\n/**\n * struct ieee80211_channel_sw_ie\n *\n * This structure refers to \"Channel Switch Announcement information element\"\n */\nstruct ieee80211_channel_sw_ie {\n\tu8 mode;\n\tu8 new_ch_num;\n\tu8 count;\n} __packed;\n\n/**\n * struct ieee80211_ext_chansw_ie\n *\n * This structure represents the \"Extended Channel Switch Announcement element\"\n */\nstruct ieee80211_ext_chansw_ie {\n\tu8 mode;\n\tu8 new_operating_class;\n\tu8 new_ch_num;\n\tu8 count;\n} __packed;\n\n/**\n * struct ieee80211_sec_chan_offs_ie - secondary channel offset IE\n * @sec_chan_offs: secondary channel offset, uses IEEE80211_HT_PARAM_CHA_SEC_*\n *\tvalues here\n * This structure represents the \"Secondary Channel Offset element\"\n */\nstruct ieee80211_sec_chan_offs_ie {\n\tu8 sec_chan_offs;\n} __packed;\n\n/**\n * struct ieee80211_mesh_chansw_params_ie - mesh channel switch parameters IE\n *\n * This structure represents the \"Mesh Channel Switch Paramters element\"\n */\nstruct ieee80211_mesh_chansw_params_ie {\n\tu8 mesh_ttl;\n\tu8 mesh_flags;\n\t__le16 mesh_reason;\n\t__le16 mesh_pre_value;\n} __packed;\n\n/**\n * struct ieee80211_wide_bw_chansw_ie - wide bandwidth channel switch IE\n */\nstruct ieee80211_wide_bw_chansw_ie {\n\tu8 new_channel_width;\n\tu8 new_center_freq_seg0, new_center_freq_seg1;\n} __packed;\n\n/**\n * struct ieee80211_tim\n *\n * This structure refers to \"Traffic Indication Map information element\"\n */\nstruct ieee80211_tim_ie {\n\tu8 dtim_count;\n\tu8 dtim_period;\n\tu8 bitmap_ctrl;\n\t/* variable size: 1 - 251 bytes */\n\tu8 virtual_map[1];\n} __packed;\n\n/**\n * struct ieee80211_meshconf_ie\n *\n * This structure refers to \"Mesh Configuration information element\"\n */\nstruct ieee80211_meshconf_ie {\n\tu8 meshconf_psel;\n\tu8 meshconf_pmetric;\n\tu8 meshconf_congest;\n\tu8 meshconf_synch;\n\tu8 meshconf_auth;\n\tu8 meshconf_form;\n\tu8 meshconf_cap;\n} __packed;\n\n/**\n * enum mesh_config_capab_flags - Mesh Configuration IE capability field flags\n *\n * @IEEE80211_MESHCONF_CAPAB_ACCEPT_PLINKS: STA is willing to establish\n *\tadditional mesh peerings with other mesh STAs\n * @IEEE80211_MESHCONF_CAPAB_FORWARDING: the STA forwards MSDUs\n * @IEEE80211_MESHCONF_CAPAB_TBTT_ADJUSTING: TBTT adjustment procedure\n *\tis ongoing\n * @IEEE80211_MESHCONF_CAPAB_POWER_SAVE_LEVEL: STA is in deep sleep mode or has\n *\tneighbors in deep sleep mode\n */\nenum mesh_config_capab_flags {\n\tIEEE80211_MESHCONF_CAPAB_ACCEPT_PLINKS\t\t= 0x01,\n\tIEEE80211_MESHCONF_CAPAB_FORWARDING\t\t= 0x08,\n\tIEEE80211_MESHCONF_CAPAB_TBTT_ADJUSTING\t\t= 0x20,\n\tIEEE80211_MESHCONF_CAPAB_POWER_SAVE_LEVEL\t= 0x40,\n};\n\n#define IEEE80211_MESHCONF_FORM_CONNECTED_TO_GATE 0x1\n\n/**\n * mesh channel switch parameters element's flag indicator\n *\n */\n#define WLAN_EID_CHAN_SWITCH_PARAM_TX_RESTRICT BIT(0)\n#define WLAN_EID_CHAN_SWITCH_PARAM_INITIATOR BIT(1)\n#define WLAN_EID_CHAN_SWITCH_PARAM_REASON BIT(2)\n\n/**\n * struct ieee80211_rann_ie\n *\n * This structure refers to \"Root Announcement information element\"\n */\nstruct ieee80211_rann_ie {\n\tu8 rann_flags;\n\tu8 rann_hopcount;\n\tu8 rann_ttl;\n\tu8 rann_addr[ETH_ALEN];\n\t__le32 rann_seq;\n\t__le32 rann_interval;\n\t__le32 rann_metric;\n} __packed;\n\nenum ieee80211_rann_flags {\n\tRANN_FLAG_IS_GATE = 1 << 0,\n};\n\nenum ieee80211_ht_chanwidth_values {\n\tIEEE80211_HT_CHANWIDTH_20MHZ = 0,\n\tIEEE80211_HT_CHANWIDTH_ANY = 1,\n};\n\n/**\n * enum ieee80211_opmode_bits - VHT operating mode field bits\n * @IEEE80211_OPMODE_NOTIF_CHANWIDTH_MASK: channel width mask\n * @IEEE80211_OPMODE_NOTIF_CHANWIDTH_20MHZ: 20 MHz channel width\n * @IEEE80211_OPMODE_NOTIF_CHANWIDTH_40MHZ: 40 MHz channel width\n * @IEEE80211_OPMODE_NOTIF_CHANWIDTH_80MHZ: 80 MHz channel width\n * @IEEE80211_OPMODE_NOTIF_CHANWIDTH_160MHZ: 160 MHz or 80+80 MHz channel width\n * @IEEE80211_OPMODE_NOTIF_BW_160_80P80: 160 / 80+80 MHz indicator flag\n * @IEEE80211_OPMODE_NOTIF_RX_NSS_MASK: number of spatial streams mask\n *\t(the NSS value is the value of this field + 1)\n * @IEEE80211_OPMODE_NOTIF_RX_NSS_SHIFT: number of spatial streams shift\n * @IEEE80211_OPMODE_NOTIF_RX_NSS_TYPE_BF: indicates streams in SU-MIMO PPDU\n *\tusing a beamforming steering matrix\n */\nenum ieee80211_vht_opmode_bits {\n\tIEEE80211_OPMODE_NOTIF_CHANWIDTH_MASK\t= 0x03,\n\tIEEE80211_OPMODE_NOTIF_CHANWIDTH_20MHZ\t= 0,\n\tIEEE80211_OPMODE_NOTIF_CHANWIDTH_40MHZ\t= 1,\n\tIEEE80211_OPMODE_NOTIF_CHANWIDTH_80MHZ\t= 2,\n\tIEEE80211_OPMODE_NOTIF_CHANWIDTH_160MHZ\t= 3,\n\tIEEE80211_OPMODE_NOTIF_BW_160_80P80\t= 0x04,\n\tIEEE80211_OPMODE_NOTIF_RX_NSS_MASK\t= 0x70,\n\tIEEE80211_OPMODE_NOTIF_RX_NSS_SHIFT\t= 4,\n\tIEEE80211_OPMODE_NOTIF_RX_NSS_TYPE_BF\t= 0x80,\n};\n\n/**\n * enum ieee80211_s1g_chanwidth\n * These are defined in IEEE802.11-2016ah Table 10-20\n * as BSS Channel Width\n *\n * @IEEE80211_S1G_CHANWIDTH_1MHZ: 1MHz operating channel\n * @IEEE80211_S1G_CHANWIDTH_2MHZ: 2MHz operating channel\n * @IEEE80211_S1G_CHANWIDTH_4MHZ: 4MHz operating channel\n * @IEEE80211_S1G_CHANWIDTH_8MHZ: 8MHz operating channel\n * @IEEE80211_S1G_CHANWIDTH_16MHZ: 16MHz operating channel\n */\nenum ieee80211_s1g_chanwidth {\n\tIEEE80211_S1G_CHANWIDTH_1MHZ = 0,\n\tIEEE80211_S1G_CHANWIDTH_2MHZ = 1,\n\tIEEE80211_S1G_CHANWIDTH_4MHZ = 3,\n\tIEEE80211_S1G_CHANWIDTH_8MHZ = 7,\n\tIEEE80211_S1G_CHANWIDTH_16MHZ = 15,\n};\n\n#define WLAN_SA_QUERY_TR_ID_LEN 2\n#define WLAN_MEMBERSHIP_LEN 8\n#define WLAN_USER_POSITION_LEN 16\n\n/**\n * struct ieee80211_tpc_report_ie\n *\n * This structure refers to \"TPC Report element\"\n */\nstruct ieee80211_tpc_report_ie {\n\tu8 tx_power;\n\tu8 link_margin;\n} __packed;\n\n#define IEEE80211_ADDBA_EXT_FRAG_LEVEL_MASK\tGENMASK(2, 1)\n#define IEEE80211_ADDBA_EXT_FRAG_LEVEL_SHIFT\t1\n#define IEEE80211_ADDBA_EXT_NO_FRAG\t\tBIT(0)\n\nstruct ieee80211_addba_ext_ie {\n\tu8 data;\n} __packed;\n\n/**\n * struct ieee80211_s1g_bcn_compat_ie\n *\n * S1G Beacon Compatibility element\n */\nstruct ieee80211_s1g_bcn_compat_ie {\n\t__le16 compat_info;\n\t__le16 beacon_int;\n\t__le32 tsf_completion;\n} __packed;\n\n/**\n * struct ieee80211_s1g_oper_ie\n *\n * S1G Operation element\n */\nstruct ieee80211_s1g_oper_ie {\n\tu8 ch_width;\n\tu8 oper_class;\n\tu8 primary_ch;\n\tu8 oper_ch;\n\t__le16 basic_mcs_nss;\n} __packed;\n\n/**\n * struct ieee80211_aid_response_ie\n *\n * AID Response element\n */\nstruct ieee80211_aid_response_ie {\n\t__le16 aid;\n\tu8 switch_count;\n\t__le16 response_int;\n} __packed;\n\nstruct ieee80211_s1g_cap {\n\tu8 capab_info[10];\n\tu8 supp_mcs_nss[5];\n} __packed;\n\nstruct ieee80211_ext {\n\t__le16 frame_control;\n\t__le16 duration;\n\tunion {\n\t\tstruct {\n\t\t\tu8 sa[ETH_ALEN];\n\t\t\t__le32 timestamp;\n\t\t\tu8 change_seq;\n\t\t\tu8 variable[0];\n\t\t} __packed s1g_beacon;\n\t\tstruct {\n\t\t\tu8 sa[ETH_ALEN];\n\t\t\t__le32 timestamp;\n\t\t\tu8 change_seq;\n\t\t\tu8 next_tbtt[3];\n\t\t\tu8 variable[0];\n\t\t} __packed s1g_short_beacon;\n\t} u;\n} __packed __aligned(2);\n\nstruct ieee80211_mgmt {\n\t__le16 frame_control;\n\t__le16 duration;\n\tu8 da[ETH_ALEN];\n\tu8 sa[ETH_ALEN];\n\tu8 bssid[ETH_ALEN];\n\t__le16 seq_ctrl;\n\tunion {\n\t\tstruct {\n\t\t\t__le16 auth_alg;\n\t\t\t__le16 auth_transaction;\n\t\t\t__le16 status_code;\n\t\t\t/* possibly followed by Challenge text */\n\t\t\tu8 variable[0];\n\t\t} __packed auth;\n\t\tstruct {\n\t\t\t__le16 reason_code;\n\t\t} __packed deauth;\n\t\tstruct {\n\t\t\t__le16 capab_info;\n\t\t\t__le16 listen_interval;\n\t\t\t/* followed by SSID and Supported rates */\n\t\t\tu8 variable[0];\n\t\t} __packed assoc_req;\n\t\tstruct {\n\t\t\t__le16 capab_info;\n\t\t\t__le16 status_code;\n\t\t\t__le16 aid;\n\t\t\t/* followed by Supported rates */\n\t\t\tu8 variable[0];\n\t\t} __packed assoc_resp, reassoc_resp;\n\t\tstruct {\n\t\t\t__le16 capab_info;\n\t\t\t__le16 status_code;\n\t\t\tu8 variable[0];\n\t\t} __packed s1g_assoc_resp, s1g_reassoc_resp;\n\t\tstruct {\n\t\t\t__le16 capab_info;\n\t\t\t__le16 listen_interval;\n\t\t\tu8 current_ap[ETH_ALEN];\n\t\t\t/* followed by SSID and Supported rates */\n\t\t\tu8 variable[0];\n\t\t} __packed reassoc_req;\n\t\tstruct {\n\t\t\t__le16 reason_code;\n\t\t} __packed disassoc;\n\t\tstruct {\n\t\t\t__le64 timestamp;\n\t\t\t__le16 beacon_int;\n\t\t\t__le16 capab_info;\n\t\t\t/* followed by some of SSID, Supported rates,\n\t\t\t * FH Params, DS Params, CF Params, IBSS Params, TIM */\n\t\t\tu8 variable[0];\n\t\t} __packed beacon;\n\t\tstruct {\n\t\t\t/* only variable items: SSID, Supported rates */\n\t\t\tu8 variable[0];\n\t\t} __packed probe_req;\n\t\tstruct {\n\t\t\t__le64 timestamp;\n\t\t\t__le16 beacon_int;\n\t\t\t__le16 capab_info;\n\t\t\t/* followed by some of SSID, Supported rates,\n\t\t\t * FH Params, DS Params, CF Params, IBSS Params */\n\t\t\tu8 variable[0];\n\t\t} __packed probe_resp;\n\t\tstruct {\n\t\t\tu8 category;\n\t\t\tunion {\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 dialog_token;\n\t\t\t\t\tu8 status_code;\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed wme_action;\n\t\t\t\tstruct{\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed chan_switch;\n\t\t\t\tstruct{\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tstruct ieee80211_ext_chansw_ie data;\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed ext_chan_switch;\n\t\t\t\tstruct{\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 dialog_token;\n\t\t\t\t\tu8 element_id;\n\t\t\t\t\tu8 length;\n\t\t\t\t\tstruct ieee80211_msrment_ie msr_elem;\n\t\t\t\t} __packed measurement;\n\t\t\t\tstruct{\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 dialog_token;\n\t\t\t\t\t__le16 capab;\n\t\t\t\t\t__le16 timeout;\n\t\t\t\t\t__le16 start_seq_num;\n\t\t\t\t\t/* followed by BA Extension */\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed addba_req;\n\t\t\t\tstruct{\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 dialog_token;\n\t\t\t\t\t__le16 status;\n\t\t\t\t\t__le16 capab;\n\t\t\t\t\t__le16 timeout;\n\t\t\t\t} __packed addba_resp;\n\t\t\t\tstruct{\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\t__le16 params;\n\t\t\t\t\t__le16 reason_code;\n\t\t\t\t} __packed delba;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed self_prot;\n\t\t\t\tstruct{\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed mesh_action;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action;\n\t\t\t\t\tu8 trans_id[WLAN_SA_QUERY_TR_ID_LEN];\n\t\t\t\t} __packed sa_query;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action;\n\t\t\t\t\tu8 smps_control;\n\t\t\t\t} __packed ht_smps;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 chanwidth;\n\t\t\t\t} __packed ht_notify_cw;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 dialog_token;\n\t\t\t\t\t__le16 capability;\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed tdls_discover_resp;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 operating_mode;\n\t\t\t\t} __packed vht_opmode_notif;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 membership[WLAN_MEMBERSHIP_LEN];\n\t\t\t\t\tu8 position[WLAN_USER_POSITION_LEN];\n\t\t\t\t} __packed vht_group_notif;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 dialog_token;\n\t\t\t\t\tu8 tpc_elem_id;\n\t\t\t\t\tu8 tpc_elem_length;\n\t\t\t\t\tstruct ieee80211_tpc_report_ie tpc;\n\t\t\t\t} __packed tpc_report;\n\t\t\t\tstruct {\n\t\t\t\t\tu8 action_code;\n\t\t\t\t\tu8 dialog_token;\n\t\t\t\t\tu8 follow_up;\n\t\t\t\t\tu8 tod[6];\n\t\t\t\t\tu8 toa[6];\n\t\t\t\t\t__le16 tod_error;\n\t\t\t\t\t__le16 toa_error;\n\t\t\t\t\tu8 variable[0];\n\t\t\t\t} __packed ftm;\n\t\t\t} u;\n\t\t} __packed action;\n\t} u;\n} __packed __aligned(2);\n\n/* Supported rates membership selectors */\n#define BSS_MEMBERSHIP_SELECTOR_HT_PHY\t127\n#define BSS_MEMBERSHIP_SELECTOR_VHT_PHY\t126\n#define BSS_MEMBERSHIP_SELECTOR_HE_PHY\t122\n\n/* mgmt header + 1 byte category code */\n#define IEEE80211_MIN_ACTION_SIZE offsetof(struct ieee80211_mgmt, u.action.u)\n\n\n/* Management MIC information element (IEEE 802.11w) */\nstruct ieee80211_mmie {\n\tu8 element_id;\n\tu8 length;\n\t__le16 key_id;\n\tu8 sequence_number[6];\n\tu8 mic[8];\n} __packed;\n\n/* Management MIC information element (IEEE 802.11w) for GMAC and CMAC-256 */\nstruct ieee80211_mmie_16 {\n\tu8 element_id;\n\tu8 length;\n\t__le16 key_id;\n\tu8 sequence_number[6];\n\tu8 mic[16];\n} __packed;\n\nstruct ieee80211_vendor_ie {\n\tu8 element_id;\n\tu8 len;\n\tu8 oui[3];\n\tu8 oui_type;\n} __packed;\n\nstruct ieee80211_wmm_ac_param {\n\tu8 aci_aifsn; /* AIFSN, ACM, ACI */\n\tu8 cw; /* ECWmin, ECWmax (CW = 2^ECW - 1) */\n\t__le16 txop_limit;\n} __packed;\n\nstruct ieee80211_wmm_param_ie {\n\tu8 element_id; /* Element ID: 221 (0xdd); */\n\tu8 len; /* Length: 24 */\n\t/* required fields for WMM version 1 */\n\tu8 oui[3]; /* 00:50:f2 */\n\tu8 oui_type; /* 2 */\n\tu8 oui_subtype; /* 1 */\n\tu8 version; /* 1 for WMM version 1.0 */\n\tu8 qos_info; /* AP/STA specific QoS info */\n\tu8 reserved; /* 0 */\n\t/* AC_BE, AC_BK, AC_VI, AC_VO */\n\tstruct ieee80211_wmm_ac_param ac[4];\n} __packed;\n\n/* Control frames */\nstruct ieee80211_rts {\n\t__le16 frame_control;\n\t__le16 duration;\n\tu8 ra[ETH_ALEN];\n\tu8 ta[ETH_ALEN];\n} __packed __aligned(2);\n\nstruct ieee80211_cts {\n\t__le16 frame_control;\n\t__le16 duration;\n\tu8 ra[ETH_ALEN];\n} __packed __aligned(2);\n\nstruct ieee80211_pspoll {\n\t__le16 frame_control;\n\t__le16 aid;\n\tu8 bssid[ETH_ALEN];\n\tu8 ta[ETH_ALEN];\n} __packed __aligned(2);\n\n/* TDLS */\n\n/* Channel switch timing */\nstruct ieee80211_ch_switch_timing {\n\t__le16 switch_time;\n\t__le16 switch_timeout;\n} __packed;\n\n/* Link-id information element */\nstruct ieee80211_tdls_lnkie {\n\tu8 ie_type; /* Link Identifier IE */\n\tu8 ie_len;\n\tu8 bssid[ETH_ALEN];\n\tu8 init_sta[ETH_ALEN];\n\tu8 resp_sta[ETH_ALEN];\n} __packed;\n\nstruct ieee80211_tdls_data {\n\tu8 da[ETH_ALEN];\n\tu8 sa[ETH_ALEN];\n\t__be16 ether_type;\n\tu8 payload_type;\n\tu8 category;\n\tu8 action_code;\n\tunion {\n\t\tstruct {\n\t\t\tu8 dialog_token;\n\t\t\t__le16 capability;\n\t\t\tu8 variable[0];\n\t\t} __packed setup_req;\n\t\tstruct {\n\t\t\t__le16 status_code;\n\t\t\tu8 dialog_token;\n\t\t\t__le16 capability;\n\t\t\tu8 variable[0];\n\t\t} __packed setup_resp;\n\t\tstruct {\n\t\t\t__le16 status_code;\n\t\t\tu8 dialog_token;\n\t\t\tu8 variable[0];\n\t\t} __packed setup_cfm;\n\t\tstruct {\n\t\t\t__le16 reason_code;\n\t\t\tu8 variable[0];\n\t\t} __packed teardown;\n\t\tstruct {\n\t\t\tu8 dialog_token;\n\t\t\tu8 variable[0];\n\t\t} __packed discover_req;\n\t\tstruct {\n\t\t\tu8 target_channel;\n\t\t\tu8 oper_class;\n\t\t\tu8 variable[0];\n\t\t} __packed chan_switch_req;\n\t\tstruct {\n\t\t\t__le16 status_code;\n\t\t\tu8 variable[0];\n\t\t} __packed chan_switch_resp;\n\t} u;\n} __packed;\n\n/*\n * Peer-to-Peer IE attribute related definitions.\n */\n/**\n * enum ieee80211_p2p_attr_id - identifies type of peer-to-peer attribute.\n */\nenum ieee80211_p2p_attr_id {\n\tIEEE80211_P2P_ATTR_STATUS = 0,\n\tIEEE80211_P2P_ATTR_MINOR_REASON,\n\tIEEE80211_P2P_ATTR_CAPABILITY,\n\tIEEE80211_P2P_ATTR_DEVICE_ID,\n\tIEEE80211_P2P_ATTR_GO_INTENT,\n\tIEEE80211_P2P_ATTR_GO_CONFIG_TIMEOUT,\n\tIEEE80211_P2P_ATTR_LISTEN_CHANNEL,\n\tIEEE80211_P2P_ATTR_GROUP_BSSID,\n\tIEEE80211_P2P_ATTR_EXT_LISTEN_TIMING,\n\tIEEE80211_P2P_ATTR_INTENDED_IFACE_ADDR,\n\tIEEE80211_P2P_ATTR_MANAGABILITY,\n\tIEEE80211_P2P_ATTR_CHANNEL_LIST,\n\tIEEE80211_P2P_ATTR_ABSENCE_NOTICE,\n\tIEEE80211_P2P_ATTR_DEVICE_INFO,\n\tIEEE80211_P2P_ATTR_GROUP_INFO,\n\tIEEE80211_P2P_ATTR_GROUP_ID,\n\tIEEE80211_P2P_ATTR_INTERFACE,\n\tIEEE80211_P2P_ATTR_OPER_CHANNEL,\n\tIEEE80211_P2P_ATTR_INVITE_FLAGS,\n\t/* 19 - 220: Reserved */\n\tIEEE80211_P2P_ATTR_VENDOR_SPECIFIC = 221,\n\n\tIEEE80211_P2P_ATTR_MAX\n};\n\n/* Notice of Absence attribute - described in P2P spec 4.1.14 */\n/* Typical max value used here */\n#define IEEE80211_P2P_NOA_DESC_MAX\t4\n\nstruct ieee80211_p2p_noa_desc {\n\tu8 count;\n\t__le32 duration;\n\t__le32 interval;\n\t__le32 start_time;\n} __packed;\n\nstruct ieee80211_p2p_noa_attr {\n\tu8 index;\n\tu8 oppps_ctwindow;\n\tstruct ieee80211_p2p_noa_desc desc[IEEE80211_P2P_NOA_DESC_MAX];\n} __packed;\n\n#define IEEE80211_P2P_OPPPS_ENABLE_BIT\t\tBIT(7)\n#define IEEE80211_P2P_OPPPS_CTWINDOW_MASK\t0x7F\n\n/**\n * struct ieee80211_bar - HT Block Ack Request\n *\n * This structure refers to \"HT BlockAckReq\" as\n * described in 802.11n draft section 7.2.1.7.1\n */\nstruct ieee80211_bar {\n\t__le16 frame_control;\n\t__le16 duration;\n\t__u8 ra[ETH_ALEN];\n\t__u8 ta[ETH_ALEN];\n\t__le16 control;\n\t__le16 start_seq_num;\n} __packed;\n\n/* 802.11 BAR control masks */\n#define IEEE80211_BAR_CTRL_ACK_POLICY_NORMAL\t0x0000\n#define IEEE80211_BAR_CTRL_MULTI_TID\t\t0x0002\n#define IEEE80211_BAR_CTRL_CBMTID_COMPRESSED_BA\t0x0004\n#define IEEE80211_BAR_CTRL_TID_INFO_MASK\t0xf000\n#define IEEE80211_BAR_CTRL_TID_INFO_SHIFT\t12\n\n#define IEEE80211_HT_MCS_MASK_LEN\t\t10\n\n/**\n * struct ieee80211_mcs_info - MCS information\n * @rx_mask: RX mask\n * @rx_highest: highest supported RX rate. If set represents\n *\tthe highest supported RX data rate in units of 1 Mbps.\n *\tIf this field is 0 this value should not be used to\n *\tconsider the highest RX data rate supported.\n * @tx_params: TX parameters\n */\nstruct ieee80211_mcs_info {\n\tu8 rx_mask[IEEE80211_HT_MCS_MASK_LEN];\n\t__le16 rx_highest;\n\tu8 tx_params;\n\tu8 reserved[3];\n} __packed;\n\n/* 802.11n HT capability MSC set */\n#define IEEE80211_HT_MCS_RX_HIGHEST_MASK\t0x3ff\n#define IEEE80211_HT_MCS_TX_DEFINED\t\t0x01\n#define IEEE80211_HT_MCS_TX_RX_DIFF\t\t0x02\n/* value 0 == 1 stream etc */\n#define IEEE80211_HT_MCS_TX_MAX_STREAMS_MASK\t0x0C\n#define IEEE80211_HT_MCS_TX_MAX_STREAMS_SHIFT\t2\n#define\t\tIEEE80211_HT_MCS_TX_MAX_STREAMS\t4\n#define IEEE80211_HT_MCS_TX_UNEQUAL_MODULATION\t0x10\n\n/*\n * 802.11n D5.0 20.3.5 / 20.6 says:\n * - indices 0 to 7 and 32 are single spatial stream\n * - 8 to 31 are multiple spatial streams using equal modulation\n *   [8..15 for two streams, 16..23 for three and 24..31 for four]\n * - remainder are multiple spatial streams using unequal modulation\n */\n#define IEEE80211_HT_MCS_UNEQUAL_MODULATION_START 33\n#define IEEE80211_HT_MCS_UNEQUAL_MODULATION_START_BYTE \\\n\t(IEEE80211_HT_MCS_UNEQUAL_MODULATION_START / 8)\n\n/**\n * struct ieee80211_ht_cap - HT capabilities\n *\n * This structure is the \"HT capabilities element\" as\n * described in 802.11n D5.0 7.3.2.57\n */\nstruct ieee80211_ht_cap {\n\t__le16 cap_info;\n\tu8 ampdu_params_info;\n\n\t/* 16 bytes MCS information */\n\tstruct ieee80211_mcs_info mcs;\n\n\t__le16 extended_ht_cap_info;\n\t__le32 tx_BF_cap_info;\n\tu8 antenna_selection_info;\n} __packed;\n\n/* 802.11n HT capabilities masks (for cap_info) */\n#define IEEE80211_HT_CAP_LDPC_CODING\t\t0x0001\n#define IEEE80211_HT_CAP_SUP_WIDTH_20_40\t0x0002\n#define IEEE80211_HT_CAP_SM_PS\t\t\t0x000C\n#define\t\tIEEE80211_HT_CAP_SM_PS_SHIFT\t2\n#define IEEE80211_HT_CAP_GRN_FLD\t\t0x0010\n#define IEEE80211_HT_CAP_SGI_20\t\t\t0x0020\n#define IEEE80211_HT_CAP_SGI_40\t\t\t0x0040\n#define IEEE80211_HT_CAP_TX_STBC\t\t0x0080\n#define IEEE80211_HT_CAP_RX_STBC\t\t0x0300\n#define\t\tIEEE80211_HT_CAP_RX_STBC_SHIFT\t8\n#define IEEE80211_HT_CAP_DELAY_BA\t\t0x0400\n#define IEEE80211_HT_CAP_MAX_AMSDU\t\t0x0800\n#define IEEE80211_HT_CAP_DSSSCCK40\t\t0x1000\n#define IEEE80211_HT_CAP_RESERVED\t\t0x2000\n#define IEEE80211_HT_CAP_40MHZ_INTOLERANT\t0x4000\n#define IEEE80211_HT_CAP_LSIG_TXOP_PROT\t\t0x8000\n\n/* 802.11n HT extended capabilities masks (for extended_ht_cap_info) */\n#define IEEE80211_HT_EXT_CAP_PCO\t\t0x0001\n#define IEEE80211_HT_EXT_CAP_PCO_TIME\t\t0x0006\n#define\t\tIEEE80211_HT_EXT_CAP_PCO_TIME_SHIFT\t1\n#define IEEE80211_HT_EXT_CAP_MCS_FB\t\t0x0300\n#define\t\tIEEE80211_HT_EXT_CAP_MCS_FB_SHIFT\t8\n#define IEEE80211_HT_EXT_CAP_HTC_SUP\t\t0x0400\n#define IEEE80211_HT_EXT_CAP_RD_RESPONDER\t0x0800\n\n/* 802.11n HT capability AMPDU settings (for ampdu_params_info) */\n#define IEEE80211_HT_AMPDU_PARM_FACTOR\t\t0x03\n#define IEEE80211_HT_AMPDU_PARM_DENSITY\t\t0x1C\n#define\t\tIEEE80211_HT_AMPDU_PARM_DENSITY_SHIFT\t2\n\n/*\n * Maximum length of AMPDU that the STA can receive in high-throughput (HT).\n * Length = 2 ^ (13 + max_ampdu_length_exp) - 1 (octets)\n */\nenum ieee80211_max_ampdu_length_exp {\n\tIEEE80211_HT_MAX_AMPDU_8K = 0,\n\tIEEE80211_HT_MAX_AMPDU_16K = 1,\n\tIEEE80211_HT_MAX_AMPDU_32K = 2,\n\tIEEE80211_HT_MAX_AMPDU_64K = 3\n};\n\n/*\n * Maximum length of AMPDU that the STA can receive in VHT.\n * Length = 2 ^ (13 + max_ampdu_length_exp) - 1 (octets)\n */\nenum ieee80211_vht_max_ampdu_length_exp {\n\tIEEE80211_VHT_MAX_AMPDU_8K = 0,\n\tIEEE80211_VHT_MAX_AMPDU_16K = 1,\n\tIEEE80211_VHT_MAX_AMPDU_32K = 2,\n\tIEEE80211_VHT_MAX_AMPDU_64K = 3,\n\tIEEE80211_VHT_MAX_AMPDU_128K = 4,\n\tIEEE80211_VHT_MAX_AMPDU_256K = 5,\n\tIEEE80211_VHT_MAX_AMPDU_512K = 6,\n\tIEEE80211_VHT_MAX_AMPDU_1024K = 7\n};\n\n#define IEEE80211_HT_MAX_AMPDU_FACTOR 13\n\n/* Minimum MPDU start spacing */\nenum ieee80211_min_mpdu_spacing {\n\tIEEE80211_HT_MPDU_DENSITY_NONE = 0,\t/* No restriction */\n\tIEEE80211_HT_MPDU_DENSITY_0_25 = 1,\t/* 1/4 usec */\n\tIEEE80211_HT_MPDU_DENSITY_0_5 = 2,\t/* 1/2 usec */\n\tIEEE80211_HT_MPDU_DENSITY_1 = 3,\t/* 1 usec */\n\tIEEE80211_HT_MPDU_DENSITY_2 = 4,\t/* 2 usec */\n\tIEEE80211_HT_MPDU_DENSITY_4 = 5,\t/* 4 usec */\n\tIEEE80211_HT_MPDU_DENSITY_8 = 6,\t/* 8 usec */\n\tIEEE80211_HT_MPDU_DENSITY_16 = 7\t/* 16 usec */\n};\n\n/**\n * struct ieee80211_ht_operation - HT operation IE\n *\n * This structure is the \"HT operation element\" as\n * described in 802.11n-2009 7.3.2.57\n */\nstruct ieee80211_ht_operation {\n\tu8 primary_chan;\n\tu8 ht_param;\n\t__le16 operation_mode;\n\t__le16 stbc_param;\n\tu8 basic_set[16];\n} __packed;\n\n/* for ht_param */\n#define IEEE80211_HT_PARAM_CHA_SEC_OFFSET\t\t0x03\n#define\t\tIEEE80211_HT_PARAM_CHA_SEC_NONE\t\t0x00\n#define\t\tIEEE80211_HT_PARAM_CHA_SEC_ABOVE\t0x01\n#define\t\tIEEE80211_HT_PARAM_CHA_SEC_BELOW\t0x03\n#define IEEE80211_HT_PARAM_CHAN_WIDTH_ANY\t\t0x04\n#define IEEE80211_HT_PARAM_RIFS_MODE\t\t\t0x08\n\n/* for operation_mode */\n#define IEEE80211_HT_OP_MODE_PROTECTION\t\t\t0x0003\n#define\t\tIEEE80211_HT_OP_MODE_PROTECTION_NONE\t\t0\n#define\t\tIEEE80211_HT_OP_MODE_PROTECTION_NONMEMBER\t1\n#define\t\tIEEE80211_HT_OP_MODE_PROTECTION_20MHZ\t\t2\n#define\t\tIEEE80211_HT_OP_MODE_PROTECTION_NONHT_MIXED\t3\n#define IEEE80211_HT_OP_MODE_NON_GF_STA_PRSNT\t\t0x0004\n#define IEEE80211_HT_OP_MODE_NON_HT_STA_PRSNT\t\t0x0010\n#define IEEE80211_HT_OP_MODE_CCFS2_SHIFT\t\t5\n#define IEEE80211_HT_OP_MODE_CCFS2_MASK\t\t\t0x1fe0\n\n/* for stbc_param */\n#define IEEE80211_HT_STBC_PARAM_DUAL_BEACON\t\t0x0040\n#define IEEE80211_HT_STBC_PARAM_DUAL_CTS_PROT\t\t0x0080\n#define IEEE80211_HT_STBC_PARAM_STBC_BEACON\t\t0x0100\n#define IEEE80211_HT_STBC_PARAM_LSIG_TXOP_FULLPROT\t0x0200\n#define IEEE80211_HT_STBC_PARAM_PCO_ACTIVE\t\t0x0400\n#define IEEE80211_HT_STBC_PARAM_PCO_PHASE\t\t0x0800\n\n\n/* block-ack parameters */\n#define IEEE80211_ADDBA_PARAM_AMSDU_MASK 0x0001\n#define IEEE80211_ADDBA_PARAM_POLICY_MASK 0x0002\n#define IEEE80211_ADDBA_PARAM_TID_MASK 0x003C\n#define IEEE80211_ADDBA_PARAM_BUF_SIZE_MASK 0xFFC0\n#define IEEE80211_DELBA_PARAM_TID_MASK 0xF000\n#define IEEE80211_DELBA_PARAM_INITIATOR_MASK 0x0800\n\n/*\n * A-MPDU buffer sizes\n * According to HT size varies from 8 to 64 frames\n * HE adds the ability to have up to 256 frames.\n */\n#define IEEE80211_MIN_AMPDU_BUF\t\t0x8\n#define IEEE80211_MAX_AMPDU_BUF_HT\t0x40\n#define IEEE80211_MAX_AMPDU_BUF\t\t0x100\n\n\n/* Spatial Multiplexing Power Save Modes (for capability) */\n#define WLAN_HT_CAP_SM_PS_STATIC\t0\n#define WLAN_HT_CAP_SM_PS_DYNAMIC\t1\n#define WLAN_HT_CAP_SM_PS_INVALID\t2\n#define WLAN_HT_CAP_SM_PS_DISABLED\t3\n\n/* for SM power control field lower two bits */\n#define WLAN_HT_SMPS_CONTROL_DISABLED\t0\n#define WLAN_HT_SMPS_CONTROL_STATIC\t1\n#define WLAN_HT_SMPS_CONTROL_DYNAMIC\t3\n\n/**\n * struct ieee80211_vht_mcs_info - VHT MCS information\n * @rx_mcs_map: RX MCS map 2 bits for each stream, total 8 streams\n * @rx_highest: Indicates highest long GI VHT PPDU data rate\n *\tSTA can receive. Rate expressed in units of 1 Mbps.\n *\tIf this field is 0 this value should not be used to\n *\tconsider the highest RX data rate supported.\n *\tThe top 3 bits of this field indicate the Maximum NSTS,total\n *\t(a beamformee capability.)\n * @tx_mcs_map: TX MCS map 2 bits for each stream, total 8 streams\n * @tx_highest: Indicates highest long GI VHT PPDU data rate\n *\tSTA can transmit. Rate expressed in units of 1 Mbps.\n *\tIf this field is 0 this value should not be used to\n *\tconsider the highest TX data rate supported.\n *\tThe top 2 bits of this field are reserved, the\n *\t3rd bit from the top indiciates VHT Extended NSS BW\n *\tCapability.\n */\nstruct ieee80211_vht_mcs_info {\n\t__le16 rx_mcs_map;\n\t__le16 rx_highest;\n\t__le16 tx_mcs_map;\n\t__le16 tx_highest;\n} __packed;\n\n/* for rx_highest */\n#define IEEE80211_VHT_MAX_NSTS_TOTAL_SHIFT\t13\n#define IEEE80211_VHT_MAX_NSTS_TOTAL_MASK\t(7 << IEEE80211_VHT_MAX_NSTS_TOTAL_SHIFT)\n\n/* for tx_highest */\n#define IEEE80211_VHT_EXT_NSS_BW_CAPABLE\t(1 << 13)\n\n/**\n * enum ieee80211_vht_mcs_support - VHT MCS support definitions\n * @IEEE80211_VHT_MCS_SUPPORT_0_7: MCSes 0-7 are supported for the\n *\tnumber of streams\n * @IEEE80211_VHT_MCS_SUPPORT_0_8: MCSes 0-8 are supported\n * @IEEE80211_VHT_MCS_SUPPORT_0_9: MCSes 0-9 are supported\n * @IEEE80211_VHT_MCS_NOT_SUPPORTED: This number of streams isn't supported\n *\n * These definitions are used in each 2-bit subfield of the @rx_mcs_map\n * and @tx_mcs_map fields of &struct ieee80211_vht_mcs_info, which are\n * both split into 8 subfields by number of streams. These values indicate\n * which MCSes are supported for the number of streams the value appears\n * for.\n */\nenum ieee80211_vht_mcs_support {\n\tIEEE80211_VHT_MCS_SUPPORT_0_7\t= 0,\n\tIEEE80211_VHT_MCS_SUPPORT_0_8\t= 1,\n\tIEEE80211_VHT_MCS_SUPPORT_0_9\t= 2,\n\tIEEE80211_VHT_MCS_NOT_SUPPORTED\t= 3,\n};\n\n/**\n * struct ieee80211_vht_cap - VHT capabilities\n *\n * This structure is the \"VHT capabilities element\" as\n * described in 802.11ac D3.0 8.4.2.160\n * @vht_cap_info: VHT capability info\n * @supp_mcs: VHT MCS supported rates\n */\nstruct ieee80211_vht_cap {\n\t__le32 vht_cap_info;\n\tstruct ieee80211_vht_mcs_info supp_mcs;\n} __packed;\n\n/**\n * enum ieee80211_vht_chanwidth - VHT channel width\n * @IEEE80211_VHT_CHANWIDTH_USE_HT: use the HT operation IE to\n *\tdetermine the channel width (20 or 40 MHz)\n * @IEEE80211_VHT_CHANWIDTH_80MHZ: 80 MHz bandwidth\n * @IEEE80211_VHT_CHANWIDTH_160MHZ: 160 MHz bandwidth\n * @IEEE80211_VHT_CHANWIDTH_80P80MHZ: 80+80 MHz bandwidth\n */\nenum ieee80211_vht_chanwidth {\n\tIEEE80211_VHT_CHANWIDTH_USE_HT\t\t= 0,\n\tIEEE80211_VHT_CHANWIDTH_80MHZ\t\t= 1,\n\tIEEE80211_VHT_CHANWIDTH_160MHZ\t\t= 2,\n\tIEEE80211_VHT_CHANWIDTH_80P80MHZ\t= 3,\n};\n\n/**\n * struct ieee80211_vht_operation - VHT operation IE\n *\n * This structure is the \"VHT operation element\" as\n * described in 802.11ac D3.0 8.4.2.161\n * @chan_width: Operating channel width\n * @center_freq_seg0_idx: center freq segment 0 index\n * @center_freq_seg1_idx: center freq segment 1 index\n * @basic_mcs_set: VHT Basic MCS rate set\n */\nstruct ieee80211_vht_operation {\n\tu8 chan_width;\n\tu8 center_freq_seg0_idx;\n\tu8 center_freq_seg1_idx;\n\t__le16 basic_mcs_set;\n} __packed;\n\n/**\n * struct ieee80211_he_cap_elem - HE capabilities element\n *\n * This structure is the \"HE capabilities element\" fixed fields as\n * described in P802.11ax_D4.0 section 9.4.2.242.2 and 9.4.2.242.3\n */\nstruct ieee80211_he_cap_elem {\n\tu8 mac_cap_info[6];\n\tu8 phy_cap_info[11];\n} __packed;\n\n#define IEEE80211_TX_RX_MCS_NSS_DESC_MAX_LEN\t5\n\n/**\n * enum ieee80211_he_mcs_support - HE MCS support definitions\n * @IEEE80211_HE_MCS_SUPPORT_0_7: MCSes 0-7 are supported for the\n *\tnumber of streams\n * @IEEE80211_HE_MCS_SUPPORT_0_9: MCSes 0-9 are supported\n * @IEEE80211_HE_MCS_SUPPORT_0_11: MCSes 0-11 are supported\n * @IEEE80211_HE_MCS_NOT_SUPPORTED: This number of streams isn't supported\n *\n * These definitions are used in each 2-bit subfield of the rx_mcs_*\n * and tx_mcs_* fields of &struct ieee80211_he_mcs_nss_supp, which are\n * both split into 8 subfields by number of streams. These values indicate\n * which MCSes are supported for the number of streams the value appears\n * for.\n */\nenum ieee80211_he_mcs_support {\n\tIEEE80211_HE_MCS_SUPPORT_0_7\t= 0,\n\tIEEE80211_HE_MCS_SUPPORT_0_9\t= 1,\n\tIEEE80211_HE_MCS_SUPPORT_0_11\t= 2,\n\tIEEE80211_HE_MCS_NOT_SUPPORTED\t= 3,\n};\n\n/**\n * struct ieee80211_he_mcs_nss_supp - HE Tx/Rx HE MCS NSS Support Field\n *\n * This structure holds the data required for the Tx/Rx HE MCS NSS Support Field\n * described in P802.11ax_D2.0 section 9.4.2.237.4\n *\n * @rx_mcs_80: Rx MCS map 2 bits for each stream, total 8 streams, for channel\n *     widths less than 80MHz.\n * @tx_mcs_80: Tx MCS map 2 bits for each stream, total 8 streams, for channel\n *     widths less than 80MHz.\n * @rx_mcs_160: Rx MCS map 2 bits for each stream, total 8 streams, for channel\n *     width 160MHz.\n * @tx_mcs_160: Tx MCS map 2 bits for each stream, total 8 streams, for channel\n *     width 160MHz.\n * @rx_mcs_80p80: Rx MCS map 2 bits for each stream, total 8 streams, for\n *     channel width 80p80MHz.\n * @tx_mcs_80p80: Tx MCS map 2 bits for each stream, total 8 streams, for\n *     channel width 80p80MHz.\n */\nstruct ieee80211_he_mcs_nss_supp {\n\t__le16 rx_mcs_80;\n\t__le16 tx_mcs_80;\n\t__le16 rx_mcs_160;\n\t__le16 tx_mcs_160;\n\t__le16 rx_mcs_80p80;\n\t__le16 tx_mcs_80p80;\n} __packed;\n\n/**\n * struct ieee80211_he_operation - HE capabilities element\n *\n * This structure is the \"HE operation element\" fields as\n * described in P802.11ax_D4.0 section 9.4.2.243\n */\nstruct ieee80211_he_operation {\n\t__le32 he_oper_params;\n\t__le16 he_mcs_nss_set;\n\t/* Optional 0,1,3,4,5,7 or 8 bytes: depends on @he_oper_params */\n\tu8 optional[];\n} __packed;\n\n/**\n * struct ieee80211_he_spr - HE spatial reuse element\n *\n * This structure is the \"HE spatial reuse element\" element as\n * described in P802.11ax_D4.0 section 9.4.2.241\n */\nstruct ieee80211_he_spr {\n\tu8 he_sr_control;\n\t/* Optional 0 to 19 bytes: depends on @he_sr_control */\n\tu8 optional[];\n} __packed;\n\n/**\n * struct ieee80211_he_mu_edca_param_ac_rec - MU AC Parameter Record field\n *\n * This structure is the \"MU AC Parameter Record\" fields as\n * described in P802.11ax_D4.0 section 9.4.2.245\n */\nstruct ieee80211_he_mu_edca_param_ac_rec {\n\tu8 aifsn;\n\tu8 ecw_min_max;\n\tu8 mu_edca_timer;\n} __packed;\n\n/**\n * struct ieee80211_mu_edca_param_set - MU EDCA Parameter Set element\n *\n * This structure is the \"MU EDCA Parameter Set element\" fields as\n * described in P802.11ax_D4.0 section 9.4.2.245\n */\nstruct ieee80211_mu_edca_param_set {\n\tu8 mu_qos_info;\n\tstruct ieee80211_he_mu_edca_param_ac_rec ac_be;\n\tstruct ieee80211_he_mu_edca_param_ac_rec ac_bk;\n\tstruct ieee80211_he_mu_edca_param_ac_rec ac_vi;\n\tstruct ieee80211_he_mu_edca_param_ac_rec ac_vo;\n} __packed;\n\n/* 802.11ac VHT Capabilities */\n#define IEEE80211_VHT_CAP_MAX_MPDU_LENGTH_3895\t\t\t0x00000000\n#define IEEE80211_VHT_CAP_MAX_MPDU_LENGTH_7991\t\t\t0x00000001\n#define IEEE80211_VHT_CAP_MAX_MPDU_LENGTH_11454\t\t\t0x00000002\n#define IEEE80211_VHT_CAP_MAX_MPDU_MASK\t\t\t\t0x00000003\n#define IEEE80211_VHT_CAP_SUPP_CHAN_WIDTH_160MHZ\t\t0x00000004\n#define IEEE80211_VHT_CAP_SUPP_CHAN_WIDTH_160_80PLUS80MHZ\t0x00000008\n#define IEEE80211_VHT_CAP_SUPP_CHAN_WIDTH_MASK\t\t\t0x0000000C\n#define IEEE80211_VHT_CAP_SUPP_CHAN_WIDTH_SHIFT\t\t\t2\n#define IEEE80211_VHT_CAP_RXLDPC\t\t\t\t0x00000010\n#define IEEE80211_VHT_CAP_SHORT_GI_80\t\t\t\t0x00000020\n#define IEEE80211_VHT_CAP_SHORT_GI_160\t\t\t\t0x00000040\n#define IEEE80211_VHT_CAP_TXSTBC\t\t\t\t0x00000080\n#define IEEE80211_VHT_CAP_RXSTBC_1\t\t\t\t0x00000100\n#define IEEE80211_VHT_CAP_RXSTBC_2\t\t\t\t0x00000200\n#define IEEE80211_VHT_CAP_RXSTBC_3\t\t\t\t0x00000300\n#define IEEE80211_VHT_CAP_RXSTBC_4\t\t\t\t0x00000400\n#define IEEE80211_VHT_CAP_RXSTBC_MASK\t\t\t\t0x00000700\n#define IEEE80211_VHT_CAP_RXSTBC_SHIFT\t\t\t\t8\n#define IEEE80211_VHT_CAP_SU_BEAMFORMER_CAPABLE\t\t\t0x00000800\n#define IEEE80211_VHT_CAP_SU_BEAMFORMEE_CAPABLE\t\t\t0x00001000\n#define IEEE80211_VHT_CAP_BEAMFORMEE_STS_SHIFT                  13\n#define IEEE80211_VHT_CAP_BEAMFORMEE_STS_MASK\t\t\t\\\n\t\t(7 << IEEE80211_VHT_CAP_BEAMFORMEE_STS_SHIFT)\n#define IEEE80211_VHT_CAP_SOUNDING_DIMENSIONS_SHIFT\t\t16\n#define IEEE80211_VHT_CAP_SOUNDING_DIMENSIONS_MASK\t\t\\\n\t\t(7 << IEEE80211_VHT_CAP_SOUNDING_DIMENSIONS_SHIFT)\n#define IEEE80211_VHT_CAP_MU_BEAMFORMER_CAPABLE\t\t\t0x00080000\n#define IEEE80211_VHT_CAP_MU_BEAMFORMEE_CAPABLE\t\t\t0x00100000\n#define IEEE80211_VHT_CAP_VHT_TXOP_PS\t\t\t\t0x00200000\n#define IEEE80211_VHT_CAP_HTC_VHT\t\t\t\t0x00400000\n#define IEEE80211_VHT_CAP_MAX_A_MPDU_LENGTH_EXPONENT_SHIFT\t23\n#define IEEE80211_VHT_CAP_MAX_A_MPDU_LENGTH_EXPONENT_MASK\t\\\n\t\t(7 << IEEE80211_VHT_CAP_MAX_A_MPDU_LENGTH_EXPONENT_SHIFT)\n#define IEEE80211_VHT_CAP_VHT_LINK_ADAPTATION_VHT_UNSOL_MFB\t0x08000000\n#define IEEE80211_VHT_CAP_VHT_LINK_ADAPTATION_VHT_MRQ_MFB\t0x0c000000\n#define IEEE80211_VHT_CAP_RX_ANTENNA_PATTERN\t\t\t0x10000000\n#define IEEE80211_VHT_CAP_TX_ANTENNA_PATTERN\t\t\t0x20000000\n#define IEEE80211_VHT_CAP_EXT_NSS_BW_SHIFT\t\t\t30\n#define IEEE80211_VHT_CAP_EXT_NSS_BW_MASK\t\t\t0xc0000000\n\n/**\n * ieee80211_get_vht_max_nss - return max NSS for a given bandwidth/MCS\n * @cap: VHT capabilities of the peer\n * @bw: bandwidth to use\n * @mcs: MCS index to use\n * @ext_nss_bw_capable: indicates whether or not the local transmitter\n *\t(rate scaling algorithm) can deal with the new logic\n *\t(dot11VHTExtendedNSSBWCapable)\n * @max_vht_nss: current maximum NSS as advertised by the STA in\n *\toperating mode notification, can be 0 in which case the\n *\tcapability data will be used to derive this (from MCS support)\n *\n * Due to the VHT Extended NSS Bandwidth Support, the maximum NSS can\n * vary for a given BW/MCS. This function parses the data.\n *\n * Note: This function is exported by cfg80211.\n */\nint ieee80211_get_vht_max_nss(struct ieee80211_vht_cap *cap,\n\t\t\t      enum ieee80211_vht_chanwidth bw,\n\t\t\t      int mcs, bool ext_nss_bw_capable,\n\t\t\t      unsigned int max_vht_nss);\n\n/* 802.11ax HE MAC capabilities */\n#define IEEE80211_HE_MAC_CAP0_HTC_HE\t\t\t\t0x01\n#define IEEE80211_HE_MAC_CAP0_TWT_REQ\t\t\t\t0x02\n#define IEEE80211_HE_MAC_CAP0_TWT_RES\t\t\t\t0x04\n#define IEEE80211_HE_MAC_CAP0_DYNAMIC_FRAG_NOT_SUPP\t\t0x00\n#define IEEE80211_HE_MAC_CAP0_DYNAMIC_FRAG_LEVEL_1\t\t0x08\n#define IEEE80211_HE_MAC_CAP0_DYNAMIC_FRAG_LEVEL_2\t\t0x10\n#define IEEE80211_HE_MAC_CAP0_DYNAMIC_FRAG_LEVEL_3\t\t0x18\n#define IEEE80211_HE_MAC_CAP0_DYNAMIC_FRAG_MASK\t\t\t0x18\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_1\t\t0x00\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_2\t\t0x20\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_4\t\t0x40\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_8\t\t0x60\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_16\t\t0x80\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_32\t\t0xa0\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_64\t\t0xc0\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_UNLIMITED\t0xe0\n#define IEEE80211_HE_MAC_CAP0_MAX_NUM_FRAG_MSDU_MASK\t\t0xe0\n\n#define IEEE80211_HE_MAC_CAP1_MIN_FRAG_SIZE_UNLIMITED\t\t0x00\n#define IEEE80211_HE_MAC_CAP1_MIN_FRAG_SIZE_128\t\t\t0x01\n#define IEEE80211_HE_MAC_CAP1_MIN_FRAG_SIZE_256\t\t\t0x02\n#define IEEE80211_HE_MAC_CAP1_MIN_FRAG_SIZE_512\t\t\t0x03\n#define IEEE80211_HE_MAC_CAP1_MIN_FRAG_SIZE_MASK\t\t0x03\n#define IEEE80211_HE_MAC_CAP1_TF_MAC_PAD_DUR_0US\t\t0x00\n#define IEEE80211_HE_MAC_CAP1_TF_MAC_PAD_DUR_8US\t\t0x04\n#define IEEE80211_HE_MAC_CAP1_TF_MAC_PAD_DUR_16US\t\t0x08\n#define IEEE80211_HE_MAC_CAP1_TF_MAC_PAD_DUR_MASK\t\t0x0c\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_1\t\t0x00\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_2\t\t0x10\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_3\t\t0x20\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_4\t\t0x30\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_5\t\t0x40\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_6\t\t0x50\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_7\t\t0x60\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_8\t\t0x70\n#define IEEE80211_HE_MAC_CAP1_MULTI_TID_AGG_RX_QOS_MASK\t\t0x70\n\n/* Link adaptation is split between byte HE_MAC_CAP1 and\n * HE_MAC_CAP2. It should be set only if IEEE80211_HE_MAC_CAP0_HTC_HE\n * in which case the following values apply:\n * 0 = No feedback.\n * 1 = reserved.\n * 2 = Unsolicited feedback.\n * 3 = both\n */\n#define IEEE80211_HE_MAC_CAP1_LINK_ADAPTATION\t\t\t0x80\n\n#define IEEE80211_HE_MAC_CAP2_LINK_ADAPTATION\t\t\t0x01\n#define IEEE80211_HE_MAC_CAP2_ALL_ACK\t\t\t\t0x02\n#define IEEE80211_HE_MAC_CAP2_TRS\t\t\t\t0x04\n#define IEEE80211_HE_MAC_CAP2_BSR\t\t\t\t0x08\n#define IEEE80211_HE_MAC_CAP2_BCAST_TWT\t\t\t\t0x10\n#define IEEE80211_HE_MAC_CAP2_32BIT_BA_BITMAP\t\t\t0x20\n#define IEEE80211_HE_MAC_CAP2_MU_CASCADING\t\t\t0x40\n#define IEEE80211_HE_MAC_CAP2_ACK_EN\t\t\t\t0x80\n\n#define IEEE80211_HE_MAC_CAP3_OMI_CONTROL\t\t\t0x02\n#define IEEE80211_HE_MAC_CAP3_OFDMA_RA\t\t\t\t0x04\n\n/* The maximum length of an A-MDPU is defined by the combination of the Maximum\n * A-MDPU Length Exponent field in the HT capabilities, VHT capabilities and the\n * same field in the HE capabilities.\n */\n#define IEEE80211_HE_MAC_CAP3_MAX_AMPDU_LEN_EXP_USE_VHT\t0x00\n#define IEEE80211_HE_MAC_CAP3_MAX_AMPDU_LEN_EXP_VHT_1\t\t0x08\n#define IEEE80211_HE_MAC_CAP3_MAX_AMPDU_LEN_EXP_VHT_2\t\t0x10\n#define IEEE80211_HE_MAC_CAP3_MAX_AMPDU_LEN_EXP_RESERVED\t0x18\n#define IEEE80211_HE_MAC_CAP3_MAX_AMPDU_LEN_EXP_MASK\t\t0x18\n#define IEEE80211_HE_MAC_CAP3_AMSDU_FRAG\t\t\t0x20\n#define IEEE80211_HE_MAC_CAP3_FLEX_TWT_SCHED\t\t\t0x40\n#define IEEE80211_HE_MAC_CAP3_RX_CTRL_FRAME_TO_MULTIBSS\t\t0x80\n\n#define IEEE80211_HE_MAC_CAP3_MAX_AMPDU_LEN_EXP_SHIFT\t\t3\n\n#define IEEE80211_HE_MAC_CAP4_BSRP_BQRP_A_MPDU_AGG\t\t0x01\n#define IEEE80211_HE_MAC_CAP4_QTP\t\t\t\t0x02\n#define IEEE80211_HE_MAC_CAP4_BQR\t\t\t\t0x04\n#define IEEE80211_HE_MAC_CAP4_SRP_RESP\t\t\t\t0x08\n#define IEEE80211_HE_MAC_CAP4_NDP_FB_REP\t\t\t0x10\n#define IEEE80211_HE_MAC_CAP4_OPS\t\t\t\t0x20\n#define IEEE80211_HE_MAC_CAP4_AMDSU_IN_AMPDU\t\t\t0x40\n/* Multi TID agg TX is split between byte #4 and #5\n * The value is a combination of B39,B40,B41\n */\n#define IEEE80211_HE_MAC_CAP4_MULTI_TID_AGG_TX_QOS_B39\t\t0x80\n\n#define IEEE80211_HE_MAC_CAP5_MULTI_TID_AGG_TX_QOS_B40\t\t0x01\n#define IEEE80211_HE_MAC_CAP5_MULTI_TID_AGG_TX_QOS_B41\t\t0x02\n#define IEEE80211_HE_MAC_CAP5_SUBCHAN_SELECVITE_TRANSMISSION\t0x04\n#define IEEE80211_HE_MAC_CAP5_UL_2x996_TONE_RU\t\t\t0x08\n#define IEEE80211_HE_MAC_CAP5_OM_CTRL_UL_MU_DATA_DIS_RX\t\t0x10\n#define IEEE80211_HE_MAC_CAP5_HE_DYNAMIC_SM_PS\t\t\t0x20\n#define IEEE80211_HE_MAC_CAP5_PUNCTURED_SOUNDING\t\t0x40\n#define IEEE80211_HE_MAC_CAP5_HT_VHT_TRIG_FRAME_RX\t\t0x80\n\n#define IEEE80211_HE_VHT_MAX_AMPDU_FACTOR\t20\n#define IEEE80211_HE_HT_MAX_AMPDU_FACTOR\t16\n\n/* 802.11ax HE PHY capabilities */\n#define IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_40MHZ_IN_2G\t\t0x02\n#define IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_40MHZ_80MHZ_IN_5G\t0x04\n#define IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_160MHZ_IN_5G\t\t0x08\n#define IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_80PLUS80_MHZ_IN_5G\t0x10\n#define IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_RU_MAPPING_IN_2G\t0x20\n#define IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_RU_MAPPING_IN_5G\t0x40\n#define IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_MASK\t\t\t0xfe\n\n#define IEEE80211_HE_PHY_CAP1_PREAMBLE_PUNC_RX_80MHZ_ONLY_SECOND_20MHZ\t0x01\n#define IEEE80211_HE_PHY_CAP1_PREAMBLE_PUNC_RX_80MHZ_ONLY_SECOND_40MHZ\t0x02\n#define IEEE80211_HE_PHY_CAP1_PREAMBLE_PUNC_RX_160MHZ_ONLY_SECOND_20MHZ\t0x04\n#define IEEE80211_HE_PHY_CAP1_PREAMBLE_PUNC_RX_160MHZ_ONLY_SECOND_40MHZ\t0x08\n#define IEEE80211_HE_PHY_CAP1_PREAMBLE_PUNC_RX_MASK\t\t\t0x0f\n#define IEEE80211_HE_PHY_CAP1_DEVICE_CLASS_A\t\t\t\t0x10\n#define IEEE80211_HE_PHY_CAP1_LDPC_CODING_IN_PAYLOAD\t\t\t0x20\n#define IEEE80211_HE_PHY_CAP1_HE_LTF_AND_GI_FOR_HE_PPDUS_0_8US\t\t0x40\n/* Midamble RX/TX Max NSTS is split between byte #2 and byte #3 */\n#define IEEE80211_HE_PHY_CAP1_MIDAMBLE_RX_TX_MAX_NSTS\t\t\t0x80\n\n#define IEEE80211_HE_PHY_CAP2_MIDAMBLE_RX_TX_MAX_NSTS\t\t\t0x01\n#define IEEE80211_HE_PHY_CAP2_NDP_4x_LTF_AND_3_2US\t\t\t0x02\n#define IEEE80211_HE_PHY_CAP2_STBC_TX_UNDER_80MHZ\t\t\t0x04\n#define IEEE80211_HE_PHY_CAP2_STBC_RX_UNDER_80MHZ\t\t\t0x08\n#define IEEE80211_HE_PHY_CAP2_DOPPLER_TX\t\t\t\t0x10\n#define IEEE80211_HE_PHY_CAP2_DOPPLER_RX\t\t\t\t0x20\n\n/* Note that the meaning of UL MU below is different between an AP and a non-AP\n * sta, where in the AP case it indicates support for Rx and in the non-AP sta\n * case it indicates support for Tx.\n */\n#define IEEE80211_HE_PHY_CAP2_UL_MU_FULL_MU_MIMO\t\t\t0x40\n#define IEEE80211_HE_PHY_CAP2_UL_MU_PARTIAL_MU_MIMO\t\t\t0x80\n\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_TX_NO_DCM\t\t\t0x00\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_TX_BPSK\t\t\t0x01\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_TX_QPSK\t\t\t0x02\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_TX_16_QAM\t\t\t0x03\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_TX_MASK\t\t\t0x03\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_TX_NSS_1\t\t\t\t0x00\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_TX_NSS_2\t\t\t\t0x04\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_RX_NO_DCM\t\t\t0x00\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_RX_BPSK\t\t\t0x08\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_RX_QPSK\t\t\t0x10\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_RX_16_QAM\t\t\t0x18\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_CONST_RX_MASK\t\t\t0x18\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_RX_NSS_1\t\t\t\t0x00\n#define IEEE80211_HE_PHY_CAP3_DCM_MAX_RX_NSS_2\t\t\t\t0x20\n#define IEEE80211_HE_PHY_CAP3_RX_HE_MU_PPDU_FROM_NON_AP_STA\t\t0x40\n#define IEEE80211_HE_PHY_CAP3_SU_BEAMFORMER\t\t\t\t0x80\n\n#define IEEE80211_HE_PHY_CAP4_SU_BEAMFORMEE\t\t\t\t0x01\n#define IEEE80211_HE_PHY_CAP4_MU_BEAMFORMER\t\t\t\t0x02\n\n/* Minimal allowed value of Max STS under 80MHz is 3 */\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_UNDER_80MHZ_4\t\t0x0c\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_UNDER_80MHZ_5\t\t0x10\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_UNDER_80MHZ_6\t\t0x14\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_UNDER_80MHZ_7\t\t0x18\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_UNDER_80MHZ_8\t\t0x1c\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_UNDER_80MHZ_MASK\t0x1c\n\n/* Minimal allowed value of Max STS above 80MHz is 3 */\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_ABOVE_80MHZ_4\t\t0x60\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_ABOVE_80MHZ_5\t\t0x80\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_ABOVE_80MHZ_6\t\t0xa0\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_ABOVE_80MHZ_7\t\t0xc0\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_ABOVE_80MHZ_8\t\t0xe0\n#define IEEE80211_HE_PHY_CAP4_BEAMFORMEE_MAX_STS_ABOVE_80MHZ_MASK\t0xe0\n\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_1\t0x00\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_2\t0x01\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_3\t0x02\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_4\t0x03\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_5\t0x04\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_6\t0x05\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_7\t0x06\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_8\t0x07\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_UNDER_80MHZ_MASK\t0x07\n\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_1\t0x00\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_2\t0x08\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_3\t0x10\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_4\t0x18\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_5\t0x20\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_6\t0x28\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_7\t0x30\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_8\t0x38\n#define IEEE80211_HE_PHY_CAP5_BEAMFORMEE_NUM_SND_DIM_ABOVE_80MHZ_MASK\t0x38\n\n#define IEEE80211_HE_PHY_CAP5_NG16_SU_FEEDBACK\t\t\t\t0x40\n#define IEEE80211_HE_PHY_CAP5_NG16_MU_FEEDBACK\t\t\t\t0x80\n\n#define IEEE80211_HE_PHY_CAP6_CODEBOOK_SIZE_42_SU\t\t\t0x01\n#define IEEE80211_HE_PHY_CAP6_CODEBOOK_SIZE_75_MU\t\t\t0x02\n#define IEEE80211_HE_PHY_CAP6_TRIG_SU_BEAMFORMER_FB\t\t\t0x04\n#define IEEE80211_HE_PHY_CAP6_TRIG_MU_BEAMFORMER_FB\t\t\t0x08\n#define IEEE80211_HE_PHY_CAP6_TRIG_CQI_FB\t\t\t\t0x10\n#define IEEE80211_HE_PHY_CAP6_PARTIAL_BW_EXT_RANGE\t\t\t0x20\n#define IEEE80211_HE_PHY_CAP6_PARTIAL_BANDWIDTH_DL_MUMIMO\t\t0x40\n#define IEEE80211_HE_PHY_CAP6_PPE_THRESHOLD_PRESENT\t\t\t0x80\n\n#define IEEE80211_HE_PHY_CAP7_SRP_BASED_SR\t\t\t\t0x01\n#define IEEE80211_HE_PHY_CAP7_POWER_BOOST_FACTOR_AR\t\t\t0x02\n#define IEEE80211_HE_PHY_CAP7_HE_SU_MU_PPDU_4XLTF_AND_08_US_GI\t\t0x04\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_1\t\t\t\t\t0x08\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_2\t\t\t\t\t0x10\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_3\t\t\t\t\t0x18\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_4\t\t\t\t\t0x20\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_5\t\t\t\t\t0x28\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_6\t\t\t\t\t0x30\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_7\t\t\t\t\t0x38\n#define IEEE80211_HE_PHY_CAP7_MAX_NC_MASK\t\t\t\t0x38\n#define IEEE80211_HE_PHY_CAP7_STBC_TX_ABOVE_80MHZ\t\t\t0x40\n#define IEEE80211_HE_PHY_CAP7_STBC_RX_ABOVE_80MHZ\t\t\t0x80\n\n#define IEEE80211_HE_PHY_CAP8_HE_ER_SU_PPDU_4XLTF_AND_08_US_GI\t\t0x01\n#define IEEE80211_HE_PHY_CAP8_20MHZ_IN_40MHZ_HE_PPDU_IN_2G\t\t0x02\n#define IEEE80211_HE_PHY_CAP8_20MHZ_IN_160MHZ_HE_PPDU\t\t\t0x04\n#define IEEE80211_HE_PHY_CAP8_80MHZ_IN_160MHZ_HE_PPDU\t\t\t0x08\n#define IEEE80211_HE_PHY_CAP8_HE_ER_SU_1XLTF_AND_08_US_GI\t\t0x10\n#define IEEE80211_HE_PHY_CAP8_MIDAMBLE_RX_TX_2X_AND_1XLTF\t\t0x20\n#define IEEE80211_HE_PHY_CAP8_DCM_MAX_RU_242\t\t\t\t0x00\n#define IEEE80211_HE_PHY_CAP8_DCM_MAX_RU_484\t\t\t\t0x40\n#define IEEE80211_HE_PHY_CAP8_DCM_MAX_RU_996\t\t\t\t0x80\n#define IEEE80211_HE_PHY_CAP8_DCM_MAX_RU_2x996\t\t\t\t0xc0\n#define IEEE80211_HE_PHY_CAP8_DCM_MAX_RU_MASK\t\t\t\t0xc0\n\n#define IEEE80211_HE_PHY_CAP9_LONGER_THAN_16_SIGB_OFDM_SYM\t\t0x01\n#define IEEE80211_HE_PHY_CAP9_NON_TRIGGERED_CQI_FEEDBACK\t\t0x02\n#define IEEE80211_HE_PHY_CAP9_TX_1024_QAM_LESS_THAN_242_TONE_RU\t\t0x04\n#define IEEE80211_HE_PHY_CAP9_RX_1024_QAM_LESS_THAN_242_TONE_RU\t\t0x08\n#define IEEE80211_HE_PHY_CAP9_RX_FULL_BW_SU_USING_MU_WITH_COMP_SIGB\t0x10\n#define IEEE80211_HE_PHY_CAP9_RX_FULL_BW_SU_USING_MU_WITH_NON_COMP_SIGB\t0x20\n#define IEEE80211_HE_PHY_CAP9_NOMIMAL_PKT_PADDING_0US\t\t\t0x00\n#define IEEE80211_HE_PHY_CAP9_NOMIMAL_PKT_PADDING_8US\t\t\t0x40\n#define IEEE80211_HE_PHY_CAP9_NOMIMAL_PKT_PADDING_16US\t\t\t0x80\n#define IEEE80211_HE_PHY_CAP9_NOMIMAL_PKT_PADDING_RESERVED\t\t0xc0\n#define IEEE80211_HE_PHY_CAP9_NOMIMAL_PKT_PADDING_MASK\t\t\t0xc0\n\n/* 802.11ax HE TX/RX MCS NSS Support  */\n#define IEEE80211_TX_RX_MCS_NSS_SUPP_HIGHEST_MCS_POS\t\t\t(3)\n#define IEEE80211_TX_RX_MCS_NSS_SUPP_TX_BITMAP_POS\t\t\t(6)\n#define IEEE80211_TX_RX_MCS_NSS_SUPP_RX_BITMAP_POS\t\t\t(11)\n#define IEEE80211_TX_RX_MCS_NSS_SUPP_TX_BITMAP_MASK\t\t\t0x07c0\n#define IEEE80211_TX_RX_MCS_NSS_SUPP_RX_BITMAP_MASK\t\t\t0xf800\n\n/* TX/RX HE MCS Support field Highest MCS subfield encoding */\nenum ieee80211_he_highest_mcs_supported_subfield_enc {\n\tHIGHEST_MCS_SUPPORTED_MCS7 = 0,\n\tHIGHEST_MCS_SUPPORTED_MCS8,\n\tHIGHEST_MCS_SUPPORTED_MCS9,\n\tHIGHEST_MCS_SUPPORTED_MCS10,\n\tHIGHEST_MCS_SUPPORTED_MCS11,\n};\n\n/* Calculate 802.11ax HE capabilities IE Tx/Rx HE MCS NSS Support Field size */\nstatic inline u8\nieee80211_he_mcs_nss_size(const struct ieee80211_he_cap_elem *he_cap)\n{\n\tu8 count = 4;\n\n\tif (he_cap->phy_cap_info[0] &\n\t    IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_160MHZ_IN_5G)\n\t\tcount += 4;\n\n\tif (he_cap->phy_cap_info[0] &\n\t    IEEE80211_HE_PHY_CAP0_CHANNEL_WIDTH_SET_80PLUS80_MHZ_IN_5G)\n\t\tcount += 4;\n\n\treturn count;\n}\n\n/* 802.11ax HE PPE Thresholds */\n#define IEEE80211_PPE_THRES_NSS_SUPPORT_2NSS\t\t\t(1)\n#define IEEE80211_PPE_THRES_NSS_POS\t\t\t\t(0)\n#define IEEE80211_PPE_THRES_NSS_MASK\t\t\t\t(7)\n#define IEEE80211_PPE_THRES_RU_INDEX_BITMASK_2x966_AND_966_RU\t\\\n\t(BIT(5) | BIT(6))\n#define IEEE80211_PPE_THRES_RU_INDEX_BITMASK_MASK\t\t0x78\n#define IEEE80211_PPE_THRES_RU_INDEX_BITMASK_POS\t\t(3)\n#define IEEE80211_PPE_THRES_INFO_PPET_SIZE\t\t\t(3)\n\n/*\n * Calculate 802.11ax HE capabilities IE PPE field size\n * Input: Header byte of ppe_thres (first byte), and HE capa IE's PHY cap u8*\n */\nstatic inline u8\nieee80211_he_ppe_size(u8 ppe_thres_hdr, const u8 *phy_cap_info)\n{\n\tu8 n;\n\n\tif ((phy_cap_info[6] &\n\t     IEEE80211_HE_PHY_CAP6_PPE_THRESHOLD_PRESENT) == 0)\n\t\treturn 0;\n\n\tn = hweight8(ppe_thres_hdr &\n\t\t     IEEE80211_PPE_THRES_RU_INDEX_BITMASK_MASK);\n\tn *= (1 + ((ppe_thres_hdr & IEEE80211_PPE_THRES_NSS_MASK) >>\n\t\t   IEEE80211_PPE_THRES_NSS_POS));\n\n\t/*\n\t * Each pair is 6 bits, and we need to add the 7 \"header\" bits to the\n\t * total size.\n\t */\n\tn = (n * IEEE80211_PPE_THRES_INFO_PPET_SIZE * 2) + 7;\n\tn = DIV_ROUND_UP(n, 8);\n\n\treturn n;\n}\n\n/* HE Operation defines */\n#define IEEE80211_HE_OPERATION_DFLT_PE_DURATION_MASK\t\t0x00000007\n#define IEEE80211_HE_OPERATION_TWT_REQUIRED\t\t\t0x00000008\n#define IEEE80211_HE_OPERATION_RTS_THRESHOLD_MASK\t\t0x00003ff0\n#define IEEE80211_HE_OPERATION_RTS_THRESHOLD_OFFSET\t\t4\n#define IEEE80211_HE_OPERATION_VHT_OPER_INFO\t\t\t0x00004000\n#define IEEE80211_HE_OPERATION_CO_HOSTED_BSS\t\t\t0x00008000\n#define IEEE80211_HE_OPERATION_ER_SU_DISABLE\t\t\t0x00010000\n#define IEEE80211_HE_OPERATION_6GHZ_OP_INFO\t\t\t0x00020000\n#define IEEE80211_HE_OPERATION_BSS_COLOR_MASK\t\t\t0x3f000000\n#define IEEE80211_HE_OPERATION_BSS_COLOR_OFFSET\t\t\t24\n#define IEEE80211_HE_OPERATION_PARTIAL_BSS_COLOR\t\t0x40000000\n#define IEEE80211_HE_OPERATION_BSS_COLOR_DISABLED\t\t0x80000000\n\n/**\n * ieee80211_he_6ghz_oper - HE 6 GHz operation Information field\n * @primary: primary channel\n * @control: control flags\n * @ccfs0: channel center frequency segment 0\n * @ccfs1: channel center frequency segment 1\n * @minrate: minimum rate (in 1 Mbps units)\n */\nstruct ieee80211_he_6ghz_oper {\n\tu8 primary;\n#define IEEE80211_HE_6GHZ_OPER_CTRL_CHANWIDTH\t0x3\n#define\t\tIEEE80211_HE_6GHZ_OPER_CTRL_CHANWIDTH_20MHZ\t0\n#define\t\tIEEE80211_HE_6GHZ_OPER_CTRL_CHANWIDTH_40MHZ\t1\n#define\t\tIEEE80211_HE_6GHZ_OPER_CTRL_CHANWIDTH_80MHZ\t2\n#define\t\tIEEE80211_HE_6GHZ_OPER_CTRL_CHANWIDTH_160MHZ\t3\n#define IEEE80211_HE_6GHZ_OPER_CTRL_DUP_BEACON\t0x4\n\tu8 control;\n\tu8 ccfs0;\n\tu8 ccfs1;\n\tu8 minrate;\n} __packed;\n\n/*\n * ieee80211_he_oper_size - calculate 802.11ax HE Operations IE size\n * @he_oper_ie: byte data of the He Operations IE, stating from the byte\n *\tafter the ext ID byte. It is assumed that he_oper_ie has at least\n *\tsizeof(struct ieee80211_he_operation) bytes, the caller must have\n *\tvalidated this.\n * @return the actual size of the IE data (not including header), or 0 on error\n */\nstatic inline u8\nieee80211_he_oper_size(const u8 *he_oper_ie)\n{\n\tstruct ieee80211_he_operation *he_oper = (void *)he_oper_ie;\n\tu8 oper_len = sizeof(struct ieee80211_he_operation);\n\tu32 he_oper_params;\n\n\t/* Make sure the input is not NULL */\n\tif (!he_oper_ie)\n\t\treturn 0;\n\n\t/* Calc required length */\n\the_oper_params = le32_to_cpu(he_oper->he_oper_params);\n\tif (he_oper_params & IEEE80211_HE_OPERATION_VHT_OPER_INFO)\n\t\toper_len += 3;\n\tif (he_oper_params & IEEE80211_HE_OPERATION_CO_HOSTED_BSS)\n\t\toper_len++;\n\tif (he_oper_params & IEEE80211_HE_OPERATION_6GHZ_OP_INFO)\n\t\toper_len += sizeof(struct ieee80211_he_6ghz_oper);\n\n\t/* Add the first byte (extension ID) to the total length */\n\toper_len++;\n\n\treturn oper_len;\n}\n\n/**\n * ieee80211_he_6ghz_oper - obtain 6 GHz operation field\n * @he_oper: HE operation element (must be pre-validated for size)\n *\tbut may be %NULL\n *\n * Return: a pointer to the 6 GHz operation field, or %NULL\n */\nstatic inline const struct ieee80211_he_6ghz_oper *\nieee80211_he_6ghz_oper(const struct ieee80211_he_operation *he_oper)\n{\n\tconst u8 *ret = (void *)&he_oper->optional;\n\tu32 he_oper_params;\n\n\tif (!he_oper)\n\t\treturn NULL;\n\n\the_oper_params = le32_to_cpu(he_oper->he_oper_params);\n\n\tif (!(he_oper_params & IEEE80211_HE_OPERATION_6GHZ_OP_INFO))\n\t\treturn NULL;\n\tif (he_oper_params & IEEE80211_HE_OPERATION_VHT_OPER_INFO)\n\t\tret += 3;\n\tif (he_oper_params & IEEE80211_HE_OPERATION_CO_HOSTED_BSS)\n\t\tret++;\n\n\treturn (void *)ret;\n}\n\n/* HE Spatial Reuse defines */\n#define IEEE80211_HE_SPR_PSR_DISALLOWED\t\t\t\tBIT(0)\n#define IEEE80211_HE_SPR_NON_SRG_OBSS_PD_SR_DISALLOWED\t\tBIT(1)\n#define IEEE80211_HE_SPR_NON_SRG_OFFSET_PRESENT\t\t\tBIT(2)\n#define IEEE80211_HE_SPR_SRG_INFORMATION_PRESENT\t\tBIT(3)\n#define IEEE80211_HE_SPR_HESIGA_SR_VAL15_ALLOWED\t\tBIT(4)\n\n/*\n * ieee80211_he_spr_size - calculate 802.11ax HE Spatial Reuse IE size\n * @he_spr_ie: byte data of the He Spatial Reuse IE, stating from the byte\n *\tafter the ext ID byte. It is assumed that he_spr_ie has at least\n *\tsizeof(struct ieee80211_he_spr) bytes, the caller must have validated\n *\tthis\n * @return the actual size of the IE data (not including header), or 0 on error\n */\nstatic inline u8\nieee80211_he_spr_size(const u8 *he_spr_ie)\n{\n\tstruct ieee80211_he_spr *he_spr = (void *)he_spr_ie;\n\tu8 spr_len = sizeof(struct ieee80211_he_spr);\n\tu8 he_spr_params;\n\n\t/* Make sure the input is not NULL */\n\tif (!he_spr_ie)\n\t\treturn 0;\n\n\t/* Calc required length */\n\the_spr_params = he_spr->he_sr_control;\n\tif (he_spr_params & IEEE80211_HE_SPR_NON_SRG_OFFSET_PRESENT)\n\t\tspr_len++;\n\tif (he_spr_params & IEEE80211_HE_SPR_SRG_INFORMATION_PRESENT)\n\t\tspr_len += 18;\n\n\t/* Add the first byte (extension ID) to the total length */\n\tspr_len++;\n\n\treturn spr_len;\n}\n\n/* S1G Capabilities Information field */\n#define IEEE80211_S1G_CAPABILITY_LEN\t15\n\n#define S1G_CAP0_S1G_LONG\tBIT(0)\n#define S1G_CAP0_SGI_1MHZ\tBIT(1)\n#define S1G_CAP0_SGI_2MHZ\tBIT(2)\n#define S1G_CAP0_SGI_4MHZ\tBIT(3)\n#define S1G_CAP0_SGI_8MHZ\tBIT(4)\n#define S1G_CAP0_SGI_16MHZ\tBIT(5)\n#define S1G_CAP0_SUPP_CH_WIDTH\tGENMASK(7, 6)\n\n#define S1G_SUPP_CH_WIDTH_2\t0\n#define S1G_SUPP_CH_WIDTH_4\t1\n#define S1G_SUPP_CH_WIDTH_8\t2\n#define S1G_SUPP_CH_WIDTH_16\t3\n#define S1G_SUPP_CH_WIDTH_MAX(cap) ((1 << FIELD_GET(S1G_CAP0_SUPP_CH_WIDTH, \\\n\t\t\t\t\t\t    cap[0])) << 1)\n\n#define S1G_CAP1_RX_LDPC\tBIT(0)\n#define S1G_CAP1_TX_STBC\tBIT(1)\n#define S1G_CAP1_RX_STBC\tBIT(2)\n#define S1G_CAP1_SU_BFER\tBIT(3)\n#define S1G_CAP1_SU_BFEE\tBIT(4)\n#define S1G_CAP1_BFEE_STS\tGENMASK(7, 5)\n\n#define S1G_CAP2_SOUNDING_DIMENSIONS\tGENMASK(2, 0)\n#define S1G_CAP2_MU_BFER\t\tBIT(3)\n#define S1G_CAP2_MU_BFEE\t\tBIT(4)\n#define S1G_CAP2_PLUS_HTC_VHT\t\tBIT(5)\n#define S1G_CAP2_TRAVELING_PILOT\tGENMASK(7, 6)\n\n#define S1G_CAP3_RD_RESPONDER\t\tBIT(0)\n#define S1G_CAP3_HT_DELAYED_BA\t\tBIT(1)\n#define S1G_CAP3_MAX_MPDU_LEN\t\tBIT(2)\n#define S1G_CAP3_MAX_AMPDU_LEN_EXP\tGENMASK(4, 3)\n#define S1G_CAP3_MIN_MPDU_START\t\tGENMASK(7, 5)\n\n#define S1G_CAP4_UPLINK_SYNC\tBIT(0)\n#define S1G_CAP4_DYNAMIC_AID\tBIT(1)\n#define S1G_CAP4_BAT\t\tBIT(2)\n#define S1G_CAP4_TIME_ADE\tBIT(3)\n#define S1G_CAP4_NON_TIM\tBIT(4)\n#define S1G_CAP4_GROUP_AID\tBIT(5)\n#define S1G_CAP4_STA_TYPE\tGENMASK(7, 6)\n\n#define S1G_CAP5_CENT_AUTH_CONTROL\tBIT(0)\n#define S1G_CAP5_DIST_AUTH_CONTROL\tBIT(1)\n#define S1G_CAP5_AMSDU\t\t\tBIT(2)\n#define S1G_CAP5_AMPDU\t\t\tBIT(3)\n#define S1G_CAP5_ASYMMETRIC_BA\t\tBIT(4)\n#define S1G_CAP5_FLOW_CONTROL\t\tBIT(5)\n#define S1G_CAP5_SECTORIZED_BEAM\tGENMASK(7, 6)\n\n#define S1G_CAP6_OBSS_MITIGATION\tBIT(0)\n#define S1G_CAP6_FRAGMENT_BA\t\tBIT(1)\n#define S1G_CAP6_NDP_PS_POLL\t\tBIT(2)\n#define S1G_CAP6_RAW_OPERATION\t\tBIT(3)\n#define S1G_CAP6_PAGE_SLICING\t\tBIT(4)\n#define S1G_CAP6_TXOP_SHARING_IMP_ACK\tBIT(5)\n#define S1G_CAP6_VHT_LINK_ADAPT\t\tGENMASK(7, 6)\n\n#define S1G_CAP7_TACK_AS_PS_POLL\t\tBIT(0)\n#define S1G_CAP7_DUP_1MHZ\t\t\tBIT(1)\n#define S1G_CAP7_MCS_NEGOTIATION\t\tBIT(2)\n#define S1G_CAP7_1MHZ_CTL_RESPONSE_PREAMBLE\tBIT(3)\n#define S1G_CAP7_NDP_BFING_REPORT_POLL\t\tBIT(4)\n#define S1G_CAP7_UNSOLICITED_DYN_AID\t\tBIT(5)\n#define S1G_CAP7_SECTOR_TRAINING_OPERATION\tBIT(6)\n#define S1G_CAP7_TEMP_PS_MODE_SWITCH\t\tBIT(7)\n\n#define S1G_CAP8_TWT_GROUPING\tBIT(0)\n#define S1G_CAP8_BDT\t\tBIT(1)\n#define S1G_CAP8_COLOR\t\tGENMASK(4, 2)\n#define S1G_CAP8_TWT_REQUEST\tBIT(5)\n#define S1G_CAP8_TWT_RESPOND\tBIT(6)\n#define S1G_CAP8_PV1_FRAME\tBIT(7)\n\n#define S1G_CAP9_LINK_ADAPT_PER_CONTROL_RESPONSE BIT(0)\n\n#define S1G_OPER_CH_WIDTH_PRIMARY_1MHZ\tBIT(0)\n#define S1G_OPER_CH_WIDTH_OPER\t\tGENMASK(4, 1)\n\n\n#define LISTEN_INT_USF\tGENMASK(15, 14)\n#define LISTEN_INT_UI\tGENMASK(13, 0)\n\n#define IEEE80211_MAX_USF\tFIELD_MAX(LISTEN_INT_USF)\n#define IEEE80211_MAX_UI\tFIELD_MAX(LISTEN_INT_UI)\n\n/* Authentication algorithms */\n#define WLAN_AUTH_OPEN 0\n#define WLAN_AUTH_SHARED_KEY 1\n#define WLAN_AUTH_FT 2\n#define WLAN_AUTH_SAE 3\n#define WLAN_AUTH_FILS_SK 4\n#define WLAN_AUTH_FILS_SK_PFS 5\n#define WLAN_AUTH_FILS_PK 6\n#define WLAN_AUTH_LEAP 128\n\n#define WLAN_AUTH_CHALLENGE_LEN 128\n\n#define WLAN_CAPABILITY_ESS\t\t(1<<0)\n#define WLAN_CAPABILITY_IBSS\t\t(1<<1)\n\n/*\n * A mesh STA sets the ESS and IBSS capability bits to zero.\n * however, this holds true for p2p probe responses (in the p2p_find\n * phase) as well.\n */\n#define WLAN_CAPABILITY_IS_STA_BSS(cap)\t\\\n\t(!((cap) & (WLAN_CAPABILITY_ESS | WLAN_CAPABILITY_IBSS)))\n\n#define WLAN_CAPABILITY_CF_POLLABLE\t(1<<2)\n#define WLAN_CAPABILITY_CF_POLL_REQUEST\t(1<<3)\n#define WLAN_CAPABILITY_PRIVACY\t\t(1<<4)\n#define WLAN_CAPABILITY_SHORT_PREAMBLE\t(1<<5)\n#define WLAN_CAPABILITY_PBCC\t\t(1<<6)\n#define WLAN_CAPABILITY_CHANNEL_AGILITY\t(1<<7)\n\n/* 802.11h */\n#define WLAN_CAPABILITY_SPECTRUM_MGMT\t(1<<8)\n#define WLAN_CAPABILITY_QOS\t\t(1<<9)\n#define WLAN_CAPABILITY_SHORT_SLOT_TIME\t(1<<10)\n#define WLAN_CAPABILITY_APSD\t\t(1<<11)\n#define WLAN_CAPABILITY_RADIO_MEASURE\t(1<<12)\n#define WLAN_CAPABILITY_DSSS_OFDM\t(1<<13)\n#define WLAN_CAPABILITY_DEL_BACK\t(1<<14)\n#define WLAN_CAPABILITY_IMM_BACK\t(1<<15)\n\n/* DMG (60gHz) 802.11ad */\n/* type - bits 0..1 */\n#define WLAN_CAPABILITY_DMG_TYPE_MASK\t\t(3<<0)\n#define WLAN_CAPABILITY_DMG_TYPE_IBSS\t\t(1<<0) /* Tx by: STA */\n#define WLAN_CAPABILITY_DMG_TYPE_PBSS\t\t(2<<0) /* Tx by: PCP */\n#define WLAN_CAPABILITY_DMG_TYPE_AP\t\t(3<<0) /* Tx by: AP */\n\n#define WLAN_CAPABILITY_DMG_CBAP_ONLY\t\t(1<<2)\n#define WLAN_CAPABILITY_DMG_CBAP_SOURCE\t\t(1<<3)\n#define WLAN_CAPABILITY_DMG_PRIVACY\t\t(1<<4)\n#define WLAN_CAPABILITY_DMG_ECPAC\t\t(1<<5)\n\n#define WLAN_CAPABILITY_DMG_SPECTRUM_MGMT\t(1<<8)\n#define WLAN_CAPABILITY_DMG_RADIO_MEASURE\t(1<<12)\n\n/* measurement */\n#define IEEE80211_SPCT_MSR_RPRT_MODE_LATE\t(1<<0)\n#define IEEE80211_SPCT_MSR_RPRT_MODE_INCAPABLE\t(1<<1)\n#define IEEE80211_SPCT_MSR_RPRT_MODE_REFUSED\t(1<<2)\n\n#define IEEE80211_SPCT_MSR_RPRT_TYPE_BASIC\t0\n#define IEEE80211_SPCT_MSR_RPRT_TYPE_CCA\t1\n#define IEEE80211_SPCT_MSR_RPRT_TYPE_RPI\t2\n#define IEEE80211_SPCT_MSR_RPRT_TYPE_LCI\t8\n#define IEEE80211_SPCT_MSR_RPRT_TYPE_CIVIC\t11\n\n/* 802.11g ERP information element */\n#define WLAN_ERP_NON_ERP_PRESENT (1<<0)\n#define WLAN_ERP_USE_PROTECTION (1<<1)\n#define WLAN_ERP_BARKER_PREAMBLE (1<<2)\n\n/* WLAN_ERP_BARKER_PREAMBLE values */\nenum {\n\tWLAN_ERP_PREAMBLE_SHORT = 0,\n\tWLAN_ERP_PREAMBLE_LONG = 1,\n};\n\n/* Band ID, 802.11ad #8.4.1.45 */\nenum {\n\tIEEE80211_BANDID_TV_WS = 0, /* TV white spaces */\n\tIEEE80211_BANDID_SUB1  = 1, /* Sub-1 GHz (excluding TV white spaces) */\n\tIEEE80211_BANDID_2G    = 2, /* 2.4 GHz */\n\tIEEE80211_BANDID_3G    = 3, /* 3.6 GHz */\n\tIEEE80211_BANDID_5G    = 4, /* 4.9 and 5 GHz */\n\tIEEE80211_BANDID_60G   = 5, /* 60 GHz */\n};\n\n/* Status codes */\nenum ieee80211_statuscode {\n\tWLAN_STATUS_SUCCESS = 0,\n\tWLAN_STATUS_UNSPECIFIED_FAILURE = 1,\n\tWLAN_STATUS_CAPS_UNSUPPORTED = 10,\n\tWLAN_STATUS_REASSOC_NO_ASSOC = 11,\n\tWLAN_STATUS_ASSOC_DENIED_UNSPEC = 12,\n\tWLAN_STATUS_NOT_SUPPORTED_AUTH_ALG = 13,\n\tWLAN_STATUS_UNKNOWN_AUTH_TRANSACTION = 14,\n\tWLAN_STATUS_CHALLENGE_FAIL = 15,\n\tWLAN_STATUS_AUTH_TIMEOUT = 16,\n\tWLAN_STATUS_AP_UNABLE_TO_HANDLE_NEW_STA = 17,\n\tWLAN_STATUS_ASSOC_DENIED_RATES = 18,\n\t/* 802.11b */\n\tWLAN_STATUS_ASSOC_DENIED_NOSHORTPREAMBLE = 19,\n\tWLAN_STATUS_ASSOC_DENIED_NOPBCC = 20,\n\tWLAN_STATUS_ASSOC_DENIED_NOAGILITY = 21,\n\t/* 802.11h */\n\tWLAN_STATUS_ASSOC_DENIED_NOSPECTRUM = 22,\n\tWLAN_STATUS_ASSOC_REJECTED_BAD_POWER = 23,\n\tWLAN_STATUS_ASSOC_REJECTED_BAD_SUPP_CHAN = 24,\n\t/* 802.11g */\n\tWLAN_STATUS_ASSOC_DENIED_NOSHORTTIME = 25,\n\tWLAN_STATUS_ASSOC_DENIED_NODSSSOFDM = 26,\n\t/* 802.11w */\n\tWLAN_STATUS_ASSOC_REJECTED_TEMPORARILY = 30,\n\tWLAN_STATUS_ROBUST_MGMT_FRAME_POLICY_VIOLATION = 31,\n\t/* 802.11i */\n\tWLAN_STATUS_INVALID_IE = 40,\n\tWLAN_STATUS_INVALID_GROUP_CIPHER = 41,\n\tWLAN_STATUS_INVALID_PAIRWISE_CIPHER = 42,\n\tWLAN_STATUS_INVALID_AKMP = 43,\n\tWLAN_STATUS_UNSUPP_RSN_VERSION = 44,\n\tWLAN_STATUS_INVALID_RSN_IE_CAP = 45,\n\tWLAN_STATUS_CIPHER_SUITE_REJECTED = 46,\n\t/* 802.11e */\n\tWLAN_STATUS_UNSPECIFIED_QOS = 32,\n\tWLAN_STATUS_ASSOC_DENIED_NOBANDWIDTH = 33,\n\tWLAN_STATUS_ASSOC_DENIED_LOWACK = 34,\n\tWLAN_STATUS_ASSOC_DENIED_UNSUPP_QOS = 35,\n\tWLAN_STATUS_REQUEST_DECLINED = 37,\n\tWLAN_STATUS_INVALID_QOS_PARAM = 38,\n\tWLAN_STATUS_CHANGE_TSPEC = 39,\n\tWLAN_STATUS_WAIT_TS_DELAY = 47,\n\tWLAN_STATUS_NO_DIRECT_LINK = 48,\n\tWLAN_STATUS_STA_NOT_PRESENT = 49,\n\tWLAN_STATUS_STA_NOT_QSTA = 50,\n\t/* 802.11s */\n\tWLAN_STATUS_ANTI_CLOG_REQUIRED = 76,\n\tWLAN_STATUS_FCG_NOT_SUPP = 78,\n\tWLAN_STATUS_STA_NO_TBTT = 78,\n\t/* 802.11ad */\n\tWLAN_STATUS_REJECTED_WITH_SUGGESTED_CHANGES = 39,\n\tWLAN_STATUS_REJECTED_FOR_DELAY_PERIOD = 47,\n\tWLAN_STATUS_REJECT_WITH_SCHEDULE = 83,\n\tWLAN_STATUS_PENDING_ADMITTING_FST_SESSION = 86,\n\tWLAN_STATUS_PERFORMING_FST_NOW = 87,\n\tWLAN_STATUS_PENDING_GAP_IN_BA_WINDOW = 88,\n\tWLAN_STATUS_REJECT_U_PID_SETTING = 89,\n\tWLAN_STATUS_REJECT_DSE_BAND = 96,\n\tWLAN_STATUS_DENIED_WITH_SUGGESTED_BAND_AND_CHANNEL = 99,\n\tWLAN_STATUS_DENIED_DUE_TO_SPECTRUM_MANAGEMENT = 103,\n\t/* 802.11ai */\n\tWLAN_STATUS_FILS_AUTHENTICATION_FAILURE = 108,\n\tWLAN_STATUS_UNKNOWN_AUTHENTICATION_SERVER = 109,\n\tWLAN_STATUS_SAE_HASH_TO_ELEMENT = 126,\n\tWLAN_STATUS_SAE_PK = 127,\n};\n\n\n/* Reason codes */\nenum ieee80211_reasoncode {\n\tWLAN_REASON_UNSPECIFIED = 1,\n\tWLAN_REASON_PREV_AUTH_NOT_VALID = 2,\n\tWLAN_REASON_DEAUTH_LEAVING = 3,\n\tWLAN_REASON_DISASSOC_DUE_TO_INACTIVITY = 4,\n\tWLAN_REASON_DISASSOC_AP_BUSY = 5,\n\tWLAN_REASON_CLASS2_FRAME_FROM_NONAUTH_STA = 6,\n\tWLAN_REASON_CLASS3_FRAME_FROM_NONASSOC_STA = 7,\n\tWLAN_REASON_DISASSOC_STA_HAS_LEFT = 8,\n\tWLAN_REASON_STA_REQ_ASSOC_WITHOUT_AUTH = 9,\n\t/* 802.11h */\n\tWLAN_REASON_DISASSOC_BAD_POWER = 10,\n\tWLAN_REASON_DISASSOC_BAD_SUPP_CHAN = 11,\n\t/* 802.11i */\n\tWLAN_REASON_INVALID_IE = 13,\n\tWLAN_REASON_MIC_FAILURE = 14,\n\tWLAN_REASON_4WAY_HANDSHAKE_TIMEOUT = 15,\n\tWLAN_REASON_GROUP_KEY_HANDSHAKE_TIMEOUT = 16,\n\tWLAN_REASON_IE_DIFFERENT = 17,\n\tWLAN_REASON_INVALID_GROUP_CIPHER = 18,\n\tWLAN_REASON_INVALID_PAIRWISE_CIPHER = 19,\n\tWLAN_REASON_INVALID_AKMP = 20,\n\tWLAN_REASON_UNSUPP_RSN_VERSION = 21,\n\tWLAN_REASON_INVALID_RSN_IE_CAP = 22,\n\tWLAN_REASON_IEEE8021X_FAILED = 23,\n\tWLAN_REASON_CIPHER_SUITE_REJECTED = 24,\n\t/* TDLS (802.11z) */\n\tWLAN_REASON_TDLS_TEARDOWN_UNREACHABLE = 25,\n\tWLAN_REASON_TDLS_TEARDOWN_UNSPECIFIED = 26,\n\t/* 802.11e */\n\tWLAN_REASON_DISASSOC_UNSPECIFIED_QOS = 32,\n\tWLAN_REASON_DISASSOC_QAP_NO_BANDWIDTH = 33,\n\tWLAN_REASON_DISASSOC_LOW_ACK = 34,\n\tWLAN_REASON_DISASSOC_QAP_EXCEED_TXOP = 35,\n\tWLAN_REASON_QSTA_LEAVE_QBSS = 36,\n\tWLAN_REASON_QSTA_NOT_USE = 37,\n\tWLAN_REASON_QSTA_REQUIRE_SETUP = 38,\n\tWLAN_REASON_QSTA_TIMEOUT = 39,\n\tWLAN_REASON_QSTA_CIPHER_NOT_SUPP = 45,\n\t/* 802.11s */\n\tWLAN_REASON_MESH_PEER_CANCELED = 52,\n\tWLAN_REASON_MESH_MAX_PEERS = 53,\n\tWLAN_REASON_MESH_CONFIG = 54,\n\tWLAN_REASON_MESH_CLOSE = 55,\n\tWLAN_REASON_MESH_MAX_RETRIES = 56,\n\tWLAN_REASON_MESH_CONFIRM_TIMEOUT = 57,\n\tWLAN_REASON_MESH_INVALID_GTK = 58,\n\tWLAN_REASON_MESH_INCONSISTENT_PARAM = 59,\n\tWLAN_REASON_MESH_INVALID_SECURITY = 60,\n\tWLAN_REASON_MESH_PATH_ERROR = 61,\n\tWLAN_REASON_MESH_PATH_NOFORWARD = 62,\n\tWLAN_REASON_MESH_PATH_DEST_UNREACHABLE = 63,\n\tWLAN_REASON_MAC_EXISTS_IN_MBSS = 64,\n\tWLAN_REASON_MESH_CHAN_REGULATORY = 65,\n\tWLAN_REASON_MESH_CHAN = 66,\n};\n\n\n/* Information Element IDs */\nenum ieee80211_eid {\n\tWLAN_EID_SSID = 0,\n\tWLAN_EID_SUPP_RATES = 1,\n\tWLAN_EID_FH_PARAMS = 2, /* reserved now */\n\tWLAN_EID_DS_PARAMS = 3,\n\tWLAN_EID_CF_PARAMS = 4,\n\tWLAN_EID_TIM = 5,\n\tWLAN_EID_IBSS_PARAMS = 6,\n\tWLAN_EID_COUNTRY = 7,\n\t/* 8, 9 reserved */\n\tWLAN_EID_REQUEST = 10,\n\tWLAN_EID_QBSS_LOAD = 11,\n\tWLAN_EID_EDCA_PARAM_SET = 12,\n\tWLAN_EID_TSPEC = 13,\n\tWLAN_EID_TCLAS = 14,\n\tWLAN_EID_SCHEDULE = 15,\n\tWLAN_EID_CHALLENGE = 16,\n\t/* 17-31 reserved for challenge text extension */\n\tWLAN_EID_PWR_CONSTRAINT = 32,\n\tWLAN_EID_PWR_CAPABILITY = 33,\n\tWLAN_EID_TPC_REQUEST = 34,\n\tWLAN_EID_TPC_REPORT = 35,\n\tWLAN_EID_SUPPORTED_CHANNELS = 36,\n\tWLAN_EID_CHANNEL_SWITCH = 37,\n\tWLAN_EID_MEASURE_REQUEST = 38,\n\tWLAN_EID_MEASURE_REPORT = 39,\n\tWLAN_EID_QUIET = 40,\n\tWLAN_EID_IBSS_DFS = 41,\n\tWLAN_EID_ERP_INFO = 42,\n\tWLAN_EID_TS_DELAY = 43,\n\tWLAN_EID_TCLAS_PROCESSING = 44,\n\tWLAN_EID_HT_CAPABILITY = 45,\n\tWLAN_EID_QOS_CAPA = 46,\n\t/* 47 reserved for Broadcom */\n\tWLAN_EID_RSN = 48,\n\tWLAN_EID_802_15_COEX = 49,\n\tWLAN_EID_EXT_SUPP_RATES = 50,\n\tWLAN_EID_AP_CHAN_REPORT = 51,\n\tWLAN_EID_NEIGHBOR_REPORT = 52,\n\tWLAN_EID_RCPI = 53,\n\tWLAN_EID_MOBILITY_DOMAIN = 54,\n\tWLAN_EID_FAST_BSS_TRANSITION = 55,\n\tWLAN_EID_TIMEOUT_INTERVAL = 56,\n\tWLAN_EID_RIC_DATA = 57,\n\tWLAN_EID_DSE_REGISTERED_LOCATION = 58,\n\tWLAN_EID_SUPPORTED_REGULATORY_CLASSES = 59,\n\tWLAN_EID_EXT_CHANSWITCH_ANN = 60,\n\tWLAN_EID_HT_OPERATION = 61,\n\tWLAN_EID_SECONDARY_CHANNEL_OFFSET = 62,\n\tWLAN_EID_BSS_AVG_ACCESS_DELAY = 63,\n\tWLAN_EID_ANTENNA_INFO = 64,\n\tWLAN_EID_RSNI = 65,\n\tWLAN_EID_MEASUREMENT_PILOT_TX_INFO = 66,\n\tWLAN_EID_BSS_AVAILABLE_CAPACITY = 67,\n\tWLAN_EID_BSS_AC_ACCESS_DELAY = 68,\n\tWLAN_EID_TIME_ADVERTISEMENT = 69,\n\tWLAN_EID_RRM_ENABLED_CAPABILITIES = 70,\n\tWLAN_EID_MULTIPLE_BSSID = 71,\n\tWLAN_EID_BSS_COEX_2040 = 72,\n\tWLAN_EID_BSS_INTOLERANT_CHL_REPORT = 73,\n\tWLAN_EID_OVERLAP_BSS_SCAN_PARAM = 74,\n\tWLAN_EID_RIC_DESCRIPTOR = 75,\n\tWLAN_EID_MMIE = 76,\n\tWLAN_EID_ASSOC_COMEBACK_TIME = 77,\n\tWLAN_EID_EVENT_REQUEST = 78,\n\tWLAN_EID_EVENT_REPORT = 79,\n\tWLAN_EID_DIAGNOSTIC_REQUEST = 80,\n\tWLAN_EID_DIAGNOSTIC_REPORT = 81,\n\tWLAN_EID_LOCATION_PARAMS = 82,\n\tWLAN_EID_NON_TX_BSSID_CAP =  83,\n\tWLAN_EID_SSID_LIST = 84,\n\tWLAN_EID_MULTI_BSSID_IDX = 85,\n\tWLAN_EID_FMS_DESCRIPTOR = 86,\n\tWLAN_EID_FMS_REQUEST = 87,\n\tWLAN_EID_FMS_RESPONSE = 88,\n\tWLAN_EID_QOS_TRAFFIC_CAPA = 89,\n\tWLAN_EID_BSS_MAX_IDLE_PERIOD = 90,\n\tWLAN_EID_TSF_REQUEST = 91,\n\tWLAN_EID_TSF_RESPOSNE = 92,\n\tWLAN_EID_WNM_SLEEP_MODE = 93,\n\tWLAN_EID_TIM_BCAST_REQ = 94,\n\tWLAN_EID_TIM_BCAST_RESP = 95,\n\tWLAN_EID_COLL_IF_REPORT = 96,\n\tWLAN_EID_CHANNEL_USAGE = 97,\n\tWLAN_EID_TIME_ZONE = 98,\n\tWLAN_EID_DMS_REQUEST = 99,\n\tWLAN_EID_DMS_RESPONSE = 100,\n\tWLAN_EID_LINK_ID = 101,\n\tWLAN_EID_WAKEUP_SCHEDUL = 102,\n\t/* 103 reserved */\n\tWLAN_EID_CHAN_SWITCH_TIMING = 104,\n\tWLAN_EID_PTI_CONTROL = 105,\n\tWLAN_EID_PU_BUFFER_STATUS = 106,\n\tWLAN_EID_INTERWORKING = 107,\n\tWLAN_EID_ADVERTISEMENT_PROTOCOL = 108,\n\tWLAN_EID_EXPEDITED_BW_REQ = 109,\n\tWLAN_EID_QOS_MAP_SET = 110,\n\tWLAN_EID_ROAMING_CONSORTIUM = 111,\n\tWLAN_EID_EMERGENCY_ALERT = 112,\n\tWLAN_EID_MESH_CONFIG = 113,\n\tWLAN_EID_MESH_ID = 114,\n\tWLAN_EID_LINK_METRIC_REPORT = 115,\n\tWLAN_EID_CONGESTION_NOTIFICATION = 116,\n\tWLAN_EID_PEER_MGMT = 117,\n\tWLAN_EID_CHAN_SWITCH_PARAM = 118,\n\tWLAN_EID_MESH_AWAKE_WINDOW = 119,\n\tWLAN_EID_BEACON_TIMING = 120,\n\tWLAN_EID_MCCAOP_SETUP_REQ = 121,\n\tWLAN_EID_MCCAOP_SETUP_RESP = 122,\n\tWLAN_EID_MCCAOP_ADVERT = 123,\n\tWLAN_EID_MCCAOP_TEARDOWN = 124,\n\tWLAN_EID_GANN = 125,\n\tWLAN_EID_RANN = 126,\n\tWLAN_EID_EXT_CAPABILITY = 127,\n\t/* 128, 129 reserved for Agere */\n\tWLAN_EID_PREQ = 130,\n\tWLAN_EID_PREP = 131,\n\tWLAN_EID_PERR = 132,\n\t/* 133-136 reserved for Cisco */\n\tWLAN_EID_PXU = 137,\n\tWLAN_EID_PXUC = 138,\n\tWLAN_EID_AUTH_MESH_PEER_EXCH = 139,\n\tWLAN_EID_MIC = 140,\n\tWLAN_EID_DESTINATION_URI = 141,\n\tWLAN_EID_UAPSD_COEX = 142,\n\tWLAN_EID_WAKEUP_SCHEDULE = 143,\n\tWLAN_EID_EXT_SCHEDULE = 144,\n\tWLAN_EID_STA_AVAILABILITY = 145,\n\tWLAN_EID_DMG_TSPEC = 146,\n\tWLAN_EID_DMG_AT = 147,\n\tWLAN_EID_DMG_CAP = 148,\n\t/* 149 reserved for Cisco */\n\tWLAN_EID_CISCO_VENDOR_SPECIFIC = 150,\n\tWLAN_EID_DMG_OPERATION = 151,\n\tWLAN_EID_DMG_BSS_PARAM_CHANGE = 152,\n\tWLAN_EID_DMG_BEAM_REFINEMENT = 153,\n\tWLAN_EID_CHANNEL_MEASURE_FEEDBACK = 154,\n\t/* 155-156 reserved for Cisco */\n\tWLAN_EID_AWAKE_WINDOW = 157,\n\tWLAN_EID_MULTI_BAND = 158,\n\tWLAN_EID_ADDBA_EXT = 159,\n\tWLAN_EID_NEXT_PCP_LIST = 160,\n\tWLAN_EID_PCP_HANDOVER = 161,\n\tWLAN_EID_DMG_LINK_MARGIN = 162,\n\tWLAN_EID_SWITCHING_STREAM = 163,\n\tWLAN_EID_SESSION_TRANSITION = 164,\n\tWLAN_EID_DYN_TONE_PAIRING_REPORT = 165,\n\tWLAN_EID_CLUSTER_REPORT = 166,\n\tWLAN_EID_RELAY_CAP = 167,\n\tWLAN_EID_RELAY_XFER_PARAM_SET = 168,\n\tWLAN_EID_BEAM_LINK_MAINT = 169,\n\tWLAN_EID_MULTIPLE_MAC_ADDR = 170,\n\tWLAN_EID_U_PID = 171,\n\tWLAN_EID_DMG_LINK_ADAPT_ACK = 172,\n\t/* 173 reserved for Symbol */\n\tWLAN_EID_MCCAOP_ADV_OVERVIEW = 174,\n\tWLAN_EID_QUIET_PERIOD_REQ = 175,\n\t/* 176 reserved for Symbol */\n\tWLAN_EID_QUIET_PERIOD_RESP = 177,\n\t/* 178-179 reserved for Symbol */\n\t/* 180 reserved for ISO/IEC 20011 */\n\tWLAN_EID_EPAC_POLICY = 182,\n\tWLAN_EID_CLISTER_TIME_OFF = 183,\n\tWLAN_EID_INTER_AC_PRIO = 184,\n\tWLAN_EID_SCS_DESCRIPTOR = 185,\n\tWLAN_EID_QLOAD_REPORT = 186,\n\tWLAN_EID_HCCA_TXOP_UPDATE_COUNT = 187,\n\tWLAN_EID_HL_STREAM_ID = 188,\n\tWLAN_EID_GCR_GROUP_ADDR = 189,\n\tWLAN_EID_ANTENNA_SECTOR_ID_PATTERN = 190,\n\tWLAN_EID_VHT_CAPABILITY = 191,\n\tWLAN_EID_VHT_OPERATION = 192,\n\tWLAN_EID_EXTENDED_BSS_LOAD = 193,\n\tWLAN_EID_WIDE_BW_CHANNEL_SWITCH = 194,\n\tWLAN_EID_VHT_TX_POWER_ENVELOPE = 195,\n\tWLAN_EID_CHANNEL_SWITCH_WRAPPER = 196,\n\tWLAN_EID_AID = 197,\n\tWLAN_EID_QUIET_CHANNEL = 198,\n\tWLAN_EID_OPMODE_NOTIF = 199,\n\n\tWLAN_EID_REDUCED_NEIGHBOR_REPORT = 201,\n\n\tWLAN_EID_AID_REQUEST = 210,\n\tWLAN_EID_AID_RESPONSE = 211,\n\tWLAN_EID_S1G_BCN_COMPAT = 213,\n\tWLAN_EID_S1G_SHORT_BCN_INTERVAL = 214,\n\tWLAN_EID_S1G_CAPABILITIES = 217,\n\tWLAN_EID_VENDOR_SPECIFIC = 221,\n\tWLAN_EID_QOS_PARAMETER = 222,\n\tWLAN_EID_S1G_OPERATION = 232,\n\tWLAN_EID_CAG_NUMBER = 237,\n\tWLAN_EID_AP_CSN = 239,\n\tWLAN_EID_FILS_INDICATION = 240,\n\tWLAN_EID_DILS = 241,\n\tWLAN_EID_FRAGMENT = 242,\n\tWLAN_EID_RSNX = 244,\n\tWLAN_EID_EXTENSION = 255\n};\n\n/* Element ID Extensions for Element ID 255 */\nenum ieee80211_eid_ext {\n\tWLAN_EID_EXT_ASSOC_DELAY_INFO = 1,\n\tWLAN_EID_EXT_FILS_REQ_PARAMS = 2,\n\tWLAN_EID_EXT_FILS_KEY_CONFIRM = 3,\n\tWLAN_EID_EXT_FILS_SESSION = 4,\n\tWLAN_EID_EXT_FILS_HLP_CONTAINER = 5,\n\tWLAN_EID_EXT_FILS_IP_ADDR_ASSIGN = 6,\n\tWLAN_EID_EXT_KEY_DELIVERY = 7,\n\tWLAN_EID_EXT_FILS_WRAPPED_DATA = 8,\n\tWLAN_EID_EXT_FILS_PUBLIC_KEY = 12,\n\tWLAN_EID_EXT_FILS_NONCE = 13,\n\tWLAN_EID_EXT_FUTURE_CHAN_GUIDANCE = 14,\n\tWLAN_EID_EXT_HE_CAPABILITY = 35,\n\tWLAN_EID_EXT_HE_OPERATION = 36,\n\tWLAN_EID_EXT_UORA = 37,\n\tWLAN_EID_EXT_HE_MU_EDCA = 38,\n\tWLAN_EID_EXT_HE_SPR = 39,\n\tWLAN_EID_EXT_NDP_FEEDBACK_REPORT_PARAMSET = 41,\n\tWLAN_EID_EXT_BSS_COLOR_CHG_ANN = 42,\n\tWLAN_EID_EXT_QUIET_TIME_PERIOD_SETUP = 43,\n\tWLAN_EID_EXT_ESS_REPORT = 45,\n\tWLAN_EID_EXT_OPS = 46,\n\tWLAN_EID_EXT_HE_BSS_LOAD = 47,\n\tWLAN_EID_EXT_MAX_CHANNEL_SWITCH_TIME = 52,\n\tWLAN_EID_EXT_MULTIPLE_BSSID_CONFIGURATION = 55,\n\tWLAN_EID_EXT_NON_INHERITANCE = 56,\n\tWLAN_EID_EXT_KNOWN_BSSID = 57,\n\tWLAN_EID_EXT_SHORT_SSID_LIST = 58,\n\tWLAN_EID_EXT_HE_6GHZ_CAPA = 59,\n\tWLAN_EID_EXT_UL_MU_POWER_CAPA = 60,\n};\n\n/* Action category code */\nenum ieee80211_category {\n\tWLAN_CATEGORY_SPECTRUM_MGMT = 0,\n\tWLAN_CATEGORY_QOS = 1,\n\tWLAN_CATEGORY_DLS = 2,\n\tWLAN_CATEGORY_BACK = 3,\n\tWLAN_CATEGORY_PUBLIC = 4,\n\tWLAN_CATEGORY_RADIO_MEASUREMENT = 5,\n\tWLAN_CATEGORY_HT = 7,\n\tWLAN_CATEGORY_SA_QUERY = 8,\n\tWLAN_CATEGORY_PROTECTED_DUAL_OF_ACTION = 9,\n\tWLAN_CATEGORY_WNM = 10,\n\tWLAN_CATEGORY_WNM_UNPROTECTED = 11,\n\tWLAN_CATEGORY_TDLS = 12,\n\tWLAN_CATEGORY_MESH_ACTION = 13,\n\tWLAN_CATEGORY_MULTIHOP_ACTION = 14,\n\tWLAN_CATEGORY_SELF_PROTECTED = 15,\n\tWLAN_CATEGORY_DMG = 16,\n\tWLAN_CATEGORY_WMM = 17,\n\tWLAN_CATEGORY_FST = 18,\n\tWLAN_CATEGORY_UNPROT_DMG = 20,\n\tWLAN_CATEGORY_VHT = 21,\n\tWLAN_CATEGORY_VENDOR_SPECIFIC_PROTECTED = 126,\n\tWLAN_CATEGORY_VENDOR_SPECIFIC = 127,\n};\n\n/* SPECTRUM_MGMT action code */\nenum ieee80211_spectrum_mgmt_actioncode {\n\tWLAN_ACTION_SPCT_MSR_REQ = 0,\n\tWLAN_ACTION_SPCT_MSR_RPRT = 1,\n\tWLAN_ACTION_SPCT_TPC_REQ = 2,\n\tWLAN_ACTION_SPCT_TPC_RPRT = 3,\n\tWLAN_ACTION_SPCT_CHL_SWITCH = 4,\n};\n\n/* HT action codes */\nenum ieee80211_ht_actioncode {\n\tWLAN_HT_ACTION_NOTIFY_CHANWIDTH = 0,\n\tWLAN_HT_ACTION_SMPS = 1,\n\tWLAN_HT_ACTION_PSMP = 2,\n\tWLAN_HT_ACTION_PCO_PHASE = 3,\n\tWLAN_HT_ACTION_CSI = 4,\n\tWLAN_HT_ACTION_NONCOMPRESSED_BF = 5,\n\tWLAN_HT_ACTION_COMPRESSED_BF = 6,\n\tWLAN_HT_ACTION_ASEL_IDX_FEEDBACK = 7,\n};\n\n/* VHT action codes */\nenum ieee80211_vht_actioncode {\n\tWLAN_VHT_ACTION_COMPRESSED_BF = 0,\n\tWLAN_VHT_ACTION_GROUPID_MGMT = 1,\n\tWLAN_VHT_ACTION_OPMODE_NOTIF = 2,\n};\n\n/* Self Protected Action codes */\nenum ieee80211_self_protected_actioncode {\n\tWLAN_SP_RESERVED = 0,\n\tWLAN_SP_MESH_PEERING_OPEN = 1,\n\tWLAN_SP_MESH_PEERING_CONFIRM = 2,\n\tWLAN_SP_MESH_PEERING_CLOSE = 3,\n\tWLAN_SP_MGK_INFORM = 4,\n\tWLAN_SP_MGK_ACK = 5,\n};\n\n/* Mesh action codes */\nenum ieee80211_mesh_actioncode {\n\tWLAN_MESH_ACTION_LINK_METRIC_REPORT,\n\tWLAN_MESH_ACTION_HWMP_PATH_SELECTION,\n\tWLAN_MESH_ACTION_GATE_ANNOUNCEMENT,\n\tWLAN_MESH_ACTION_CONGESTION_CONTROL_NOTIFICATION,\n\tWLAN_MESH_ACTION_MCCA_SETUP_REQUEST,\n\tWLAN_MESH_ACTION_MCCA_SETUP_REPLY,\n\tWLAN_MESH_ACTION_MCCA_ADVERTISEMENT_REQUEST,\n\tWLAN_MESH_ACTION_MCCA_ADVERTISEMENT,\n\tWLAN_MESH_ACTION_MCCA_TEARDOWN,\n\tWLAN_MESH_ACTION_TBTT_ADJUSTMENT_REQUEST,\n\tWLAN_MESH_ACTION_TBTT_ADJUSTMENT_RESPONSE,\n};\n\n/* Security key length */\nenum ieee80211_key_len {\n\tWLAN_KEY_LEN_WEP40 = 5,\n\tWLAN_KEY_LEN_WEP104 = 13,\n\tWLAN_KEY_LEN_CCMP = 16,\n\tWLAN_KEY_LEN_CCMP_256 = 32,\n\tWLAN_KEY_LEN_TKIP = 32,\n\tWLAN_KEY_LEN_AES_CMAC = 16,\n\tWLAN_KEY_LEN_SMS4 = 32,\n\tWLAN_KEY_LEN_GCMP = 16,\n\tWLAN_KEY_LEN_GCMP_256 = 32,\n\tWLAN_KEY_LEN_BIP_CMAC_256 = 32,\n\tWLAN_KEY_LEN_BIP_GMAC_128 = 16,\n\tWLAN_KEY_LEN_BIP_GMAC_256 = 32,\n};\n\n#define IEEE80211_WEP_IV_LEN\t\t4\n#define IEEE80211_WEP_ICV_LEN\t\t4\n#define IEEE80211_CCMP_HDR_LEN\t\t8\n#define IEEE80211_CCMP_MIC_LEN\t\t8\n#define IEEE80211_CCMP_PN_LEN\t\t6\n#define IEEE80211_CCMP_256_HDR_LEN\t8\n#define IEEE80211_CCMP_256_MIC_LEN\t16\n#define IEEE80211_CCMP_256_PN_LEN\t6\n#define IEEE80211_TKIP_IV_LEN\t\t8\n#define IEEE80211_TKIP_ICV_LEN\t\t4\n#define IEEE80211_CMAC_PN_LEN\t\t6\n#define IEEE80211_GMAC_PN_LEN\t\t6\n#define IEEE80211_GCMP_HDR_LEN\t\t8\n#define IEEE80211_GCMP_MIC_LEN\t\t16\n#define IEEE80211_GCMP_PN_LEN\t\t6\n\n#define FILS_NONCE_LEN\t\t\t16\n#define FILS_MAX_KEK_LEN\t\t64\n\n#define FILS_ERP_MAX_USERNAME_LEN\t16\n#define FILS_ERP_MAX_REALM_LEN\t\t253\n#define FILS_ERP_MAX_RRK_LEN\t\t64\n\n#define PMK_MAX_LEN\t\t\t64\n#define SAE_PASSWORD_MAX_LEN\t\t128\n\n/* Public action codes (IEEE Std 802.11-2016, 9.6.8.1, Table 9-307) */\nenum ieee80211_pub_actioncode {\n\tWLAN_PUB_ACTION_20_40_BSS_COEX = 0,\n\tWLAN_PUB_ACTION_DSE_ENABLEMENT = 1,\n\tWLAN_PUB_ACTION_DSE_DEENABLEMENT = 2,\n\tWLAN_PUB_ACTION_DSE_REG_LOC_ANN = 3,\n\tWLAN_PUB_ACTION_EXT_CHANSW_ANN = 4,\n\tWLAN_PUB_ACTION_DSE_MSMT_REQ = 5,\n\tWLAN_PUB_ACTION_DSE_MSMT_RESP = 6,\n\tWLAN_PUB_ACTION_MSMT_PILOT = 7,\n\tWLAN_PUB_ACTION_DSE_PC = 8,\n\tWLAN_PUB_ACTION_VENDOR_SPECIFIC = 9,\n\tWLAN_PUB_ACTION_GAS_INITIAL_REQ = 10,\n\tWLAN_PUB_ACTION_GAS_INITIAL_RESP = 11,\n\tWLAN_PUB_ACTION_GAS_COMEBACK_REQ = 12,\n\tWLAN_PUB_ACTION_GAS_COMEBACK_RESP = 13,\n\tWLAN_PUB_ACTION_TDLS_DISCOVER_RES = 14,\n\tWLAN_PUB_ACTION_LOC_TRACK_NOTI = 15,\n\tWLAN_PUB_ACTION_QAB_REQUEST_FRAME = 16,\n\tWLAN_PUB_ACTION_QAB_RESPONSE_FRAME = 17,\n\tWLAN_PUB_ACTION_QMF_POLICY = 18,\n\tWLAN_PUB_ACTION_QMF_POLICY_CHANGE = 19,\n\tWLAN_PUB_ACTION_QLOAD_REQUEST = 20,\n\tWLAN_PUB_ACTION_QLOAD_REPORT = 21,\n\tWLAN_PUB_ACTION_HCCA_TXOP_ADVERT = 22,\n\tWLAN_PUB_ACTION_HCCA_TXOP_RESPONSE = 23,\n\tWLAN_PUB_ACTION_PUBLIC_KEY = 24,\n\tWLAN_PUB_ACTION_CHANNEL_AVAIL_QUERY = 25,\n\tWLAN_PUB_ACTION_CHANNEL_SCHEDULE_MGMT = 26,\n\tWLAN_PUB_ACTION_CONTACT_VERI_SIGNAL = 27,\n\tWLAN_PUB_ACTION_GDD_ENABLEMENT_REQ = 28,\n\tWLAN_PUB_ACTION_GDD_ENABLEMENT_RESP = 29,\n\tWLAN_PUB_ACTION_NETWORK_CHANNEL_CONTROL = 30,\n\tWLAN_PUB_ACTION_WHITE_SPACE_MAP_ANN = 31,\n\tWLAN_PUB_ACTION_FTM_REQUEST = 32,\n\tWLAN_PUB_ACTION_FTM = 33,\n\tWLAN_PUB_ACTION_FILS_DISCOVERY = 34,\n};\n\n/* TDLS action codes */\nenum ieee80211_tdls_actioncode {\n\tWLAN_TDLS_SETUP_REQUEST = 0,\n\tWLAN_TDLS_SETUP_RESPONSE = 1,\n\tWLAN_TDLS_SETUP_CONFIRM = 2,\n\tWLAN_TDLS_TEARDOWN = 3,\n\tWLAN_TDLS_PEER_TRAFFIC_INDICATION = 4,\n\tWLAN_TDLS_CHANNEL_SWITCH_REQUEST = 5,\n\tWLAN_TDLS_CHANNEL_SWITCH_RESPONSE = 6,\n\tWLAN_TDLS_PEER_PSM_REQUEST = 7,\n\tWLAN_TDLS_PEER_PSM_RESPONSE = 8,\n\tWLAN_TDLS_PEER_TRAFFIC_RESPONSE = 9,\n\tWLAN_TDLS_DISCOVERY_REQUEST = 10,\n};\n\n/* Extended Channel Switching capability to be set in the 1st byte of\n * the @WLAN_EID_EXT_CAPABILITY information element\n */\n#define WLAN_EXT_CAPA1_EXT_CHANNEL_SWITCHING\tBIT(2)\n\n/* Multiple BSSID capability is set in the 6th bit of 3rd byte of the\n * @WLAN_EID_EXT_CAPABILITY information element\n */\n#define WLAN_EXT_CAPA3_MULTI_BSSID_SUPPORT\tBIT(6)\n\n/* TDLS capabilities in the 4th byte of @WLAN_EID_EXT_CAPABILITY */\n#define WLAN_EXT_CAPA4_TDLS_BUFFER_STA\t\tBIT(4)\n#define WLAN_EXT_CAPA4_TDLS_PEER_PSM\t\tBIT(5)\n#define WLAN_EXT_CAPA4_TDLS_CHAN_SWITCH\t\tBIT(6)\n\n/* Interworking capabilities are set in 7th bit of 4th byte of the\n * @WLAN_EID_EXT_CAPABILITY information element\n */\n#define WLAN_EXT_CAPA4_INTERWORKING_ENABLED\tBIT(7)\n\n/*\n * TDLS capabililites to be enabled in the 5th byte of the\n * @WLAN_EID_EXT_CAPABILITY information element\n */\n#define WLAN_EXT_CAPA5_TDLS_ENABLED\tBIT(5)\n#define WLAN_EXT_CAPA5_TDLS_PROHIBITED\tBIT(6)\n#define WLAN_EXT_CAPA5_TDLS_CH_SW_PROHIBITED\tBIT(7)\n\n#define WLAN_EXT_CAPA8_TDLS_WIDE_BW_ENABLED\tBIT(5)\n#define WLAN_EXT_CAPA8_OPMODE_NOTIF\tBIT(6)\n\n/* Defines the maximal number of MSDUs in an A-MSDU. */\n#define WLAN_EXT_CAPA8_MAX_MSDU_IN_AMSDU_LSB\tBIT(7)\n#define WLAN_EXT_CAPA9_MAX_MSDU_IN_AMSDU_MSB\tBIT(0)\n\n/*\n * Fine Timing Measurement Initiator - bit 71 of @WLAN_EID_EXT_CAPABILITY\n * information element\n */\n#define WLAN_EXT_CAPA9_FTM_INITIATOR\tBIT(7)\n\n/* Defines support for TWT Requester and TWT Responder */\n#define WLAN_EXT_CAPA10_TWT_REQUESTER_SUPPORT\tBIT(5)\n#define WLAN_EXT_CAPA10_TWT_RESPONDER_SUPPORT\tBIT(6)\n\n/*\n * When set, indicates that the AP is able to tolerate 26-tone RU UL\n * OFDMA transmissions using HE TB PPDU from OBSS (not falsely classify the\n * 26-tone RU UL OFDMA transmissions as radar pulses).\n */\n#define WLAN_EXT_CAPA10_OBSS_NARROW_BW_RU_TOLERANCE_SUPPORT BIT(7)\n\n/* Defines support for enhanced multi-bssid advertisement*/\n#define WLAN_EXT_CAPA11_EMA_SUPPORT\tBIT(3)\n\n/* TDLS specific payload type in the LLC/SNAP header */\n#define WLAN_TDLS_SNAP_RFTYPE\t0x2\n\n/* BSS Coex IE information field bits */\n#define WLAN_BSS_COEX_INFORMATION_REQUEST\tBIT(0)\n\n/**\n * enum ieee80211_mesh_sync_method - mesh synchronization method identifier\n *\n * @IEEE80211_SYNC_METHOD_NEIGHBOR_OFFSET: the default synchronization method\n * @IEEE80211_SYNC_METHOD_VENDOR: a vendor specific synchronization method\n *\tthat will be specified in a vendor specific information element\n */\nenum ieee80211_mesh_sync_method {\n\tIEEE80211_SYNC_METHOD_NEIGHBOR_OFFSET = 1,\n\tIEEE80211_SYNC_METHOD_VENDOR = 255,\n};\n\n/**\n * enum ieee80211_mesh_path_protocol - mesh path selection protocol identifier\n *\n * @IEEE80211_PATH_PROTOCOL_HWMP: the default path selection protocol\n * @IEEE80211_PATH_PROTOCOL_VENDOR: a vendor specific protocol that will\n *\tbe specified in a vendor specific information element\n */\nenum ieee80211_mesh_path_protocol {\n\tIEEE80211_PATH_PROTOCOL_HWMP = 1,\n\tIEEE80211_PATH_PROTOCOL_VENDOR = 255,\n};\n\n/**\n * enum ieee80211_mesh_path_metric - mesh path selection metric identifier\n *\n * @IEEE80211_PATH_METRIC_AIRTIME: the default path selection metric\n * @IEEE80211_PATH_METRIC_VENDOR: a vendor specific metric that will be\n *\tspecified in a vendor specific information element\n */\nenum ieee80211_mesh_path_metric {\n\tIEEE80211_PATH_METRIC_AIRTIME = 1,\n\tIEEE80211_PATH_METRIC_VENDOR = 255,\n};\n\n/**\n * enum ieee80211_root_mode_identifier - root mesh STA mode identifier\n *\n * These attribute are used by dot11MeshHWMPRootMode to set root mesh STA mode\n *\n * @IEEE80211_ROOTMODE_NO_ROOT: the mesh STA is not a root mesh STA (default)\n * @IEEE80211_ROOTMODE_ROOT: the mesh STA is a root mesh STA if greater than\n *\tthis value\n * @IEEE80211_PROACTIVE_PREQ_NO_PREP: the mesh STA is a root mesh STA supports\n *\tthe proactive PREQ with proactive PREP subfield set to 0\n * @IEEE80211_PROACTIVE_PREQ_WITH_PREP: the mesh STA is a root mesh STA\n *\tsupports the proactive PREQ with proactive PREP subfield set to 1\n * @IEEE80211_PROACTIVE_RANN: the mesh STA is a root mesh STA supports\n *\tthe proactive RANN\n */\nenum ieee80211_root_mode_identifier {\n\tIEEE80211_ROOTMODE_NO_ROOT = 0,\n\tIEEE80211_ROOTMODE_ROOT = 1,\n\tIEEE80211_PROACTIVE_PREQ_NO_PREP = 2,\n\tIEEE80211_PROACTIVE_PREQ_WITH_PREP = 3,\n\tIEEE80211_PROACTIVE_RANN = 4,\n};\n\n/*\n * IEEE 802.11-2007 7.3.2.9 Country information element\n *\n * Minimum length is 8 octets, ie len must be evenly\n * divisible by 2\n */\n\n/* Although the spec says 8 I'm seeing 6 in practice */\n#define IEEE80211_COUNTRY_IE_MIN_LEN\t6\n\n/* The Country String field of the element shall be 3 octets in length */\n#define IEEE80211_COUNTRY_STRING_LEN\t3\n\n/*\n * For regulatory extension stuff see IEEE 802.11-2007\n * Annex I (page 1141) and Annex J (page 1147). Also\n * review 7.3.2.9.\n *\n * When dot11RegulatoryClassesRequired is true and the\n * first_channel/reg_extension_id is >= 201 then the IE\n * compromises of the 'ext' struct represented below:\n *\n *  - Regulatory extension ID - when generating IE this just needs\n *    to be monotonically increasing for each triplet passed in\n *    the IE\n *  - Regulatory class - index into set of rules\n *  - Coverage class - index into air propagation time (Table 7-27),\n *    in microseconds, you can compute the air propagation time from\n *    the index by multiplying by 3, so index 10 yields a propagation\n *    of 10 us. Valid values are 0-31, values 32-255 are not defined\n *    yet. A value of 0 inicates air propagation of <= 1 us.\n *\n *  See also Table I.2 for Emission limit sets and table\n *  I.3 for Behavior limit sets. Table J.1 indicates how to map\n *  a reg_class to an emission limit set and behavior limit set.\n */\n#define IEEE80211_COUNTRY_EXTENSION_ID 201\n\n/*\n *  Channels numbers in the IE must be monotonically increasing\n *  if dot11RegulatoryClassesRequired is not true.\n *\n *  If dot11RegulatoryClassesRequired is true consecutive\n *  subband triplets following a regulatory triplet shall\n *  have monotonically increasing first_channel number fields.\n *\n *  Channel numbers shall not overlap.\n *\n *  Note that max_power is signed.\n */\nstruct ieee80211_country_ie_triplet {\n\tunion {\n\t\tstruct {\n\t\t\tu8 first_channel;\n\t\t\tu8 num_channels;\n\t\t\ts8 max_power;\n\t\t} __packed chans;\n\t\tstruct {\n\t\t\tu8 reg_extension_id;\n\t\t\tu8 reg_class;\n\t\t\tu8 coverage_class;\n\t\t} __packed ext;\n\t};\n} __packed;\n\nenum ieee80211_timeout_interval_type {\n\tWLAN_TIMEOUT_REASSOC_DEADLINE = 1 /* 802.11r */,\n\tWLAN_TIMEOUT_KEY_LIFETIME = 2 /* 802.11r */,\n\tWLAN_TIMEOUT_ASSOC_COMEBACK = 3 /* 802.11w */,\n};\n\n/**\n * struct ieee80211_timeout_interval_ie - Timeout Interval element\n * @type: type, see &enum ieee80211_timeout_interval_type\n * @value: timeout interval value\n */\nstruct ieee80211_timeout_interval_ie {\n\tu8 type;\n\t__le32 value;\n} __packed;\n\n/**\n * enum ieee80211_idle_options - BSS idle options\n * @WLAN_IDLE_OPTIONS_PROTECTED_KEEP_ALIVE: the station should send an RSN\n *\tprotected frame to the AP to reset the idle timer at the AP for\n *\tthe station.\n */\nenum ieee80211_idle_options {\n\tWLAN_IDLE_OPTIONS_PROTECTED_KEEP_ALIVE = BIT(0),\n};\n\n/**\n * struct ieee80211_bss_max_idle_period_ie\n *\n * This structure refers to \"BSS Max idle period element\"\n *\n * @max_idle_period: indicates the time period during which a station can\n *\trefrain from transmitting frames to its associated AP without being\n *\tdisassociated. In units of 1000 TUs.\n * @idle_options: indicates the options associated with the BSS idle capability\n *\tas specified in &enum ieee80211_idle_options.\n */\nstruct ieee80211_bss_max_idle_period_ie {\n\t__le16 max_idle_period;\n\tu8 idle_options;\n} __packed;\n\n/* BACK action code */\nenum ieee80211_back_actioncode {\n\tWLAN_ACTION_ADDBA_REQ = 0,\n\tWLAN_ACTION_ADDBA_RESP = 1,\n\tWLAN_ACTION_DELBA = 2,\n};\n\n/* BACK (block-ack) parties */\nenum ieee80211_back_parties {\n\tWLAN_BACK_RECIPIENT = 0,\n\tWLAN_BACK_INITIATOR = 1,\n};\n\n/* SA Query action */\nenum ieee80211_sa_query_action {\n\tWLAN_ACTION_SA_QUERY_REQUEST = 0,\n\tWLAN_ACTION_SA_QUERY_RESPONSE = 1,\n};\n\n/**\n * struct ieee80211_bssid_index\n *\n * This structure refers to \"Multiple BSSID-index element\"\n *\n * @bssid_index: BSSID index\n * @dtim_period: optional, overrides transmitted BSS dtim period\n * @dtim_count: optional, overrides transmitted BSS dtim count\n */\nstruct ieee80211_bssid_index {\n\tu8 bssid_index;\n\tu8 dtim_period;\n\tu8 dtim_count;\n};\n\n/**\n * struct ieee80211_multiple_bssid_configuration\n *\n * This structure refers to \"Multiple BSSID Configuration element\"\n *\n * @bssid_count: total number of active BSSIDs in the set\n * @profile_periodicity: the least number of beacon frames need to be received\n *\tin order to discover all the nontransmitted BSSIDs in the set.\n */\nstruct ieee80211_multiple_bssid_configuration {\n\tu8 bssid_count;\n\tu8 profile_periodicity;\n};\n\n#define SUITE(oui, id)\t(((oui) << 8) | (id))\n\n/* cipher suite selectors */\n#define WLAN_CIPHER_SUITE_USE_GROUP\tSUITE(0x000FAC, 0)\n#define WLAN_CIPHER_SUITE_WEP40\t\tSUITE(0x000FAC, 1)\n#define WLAN_CIPHER_SUITE_TKIP\t\tSUITE(0x000FAC, 2)\n/* reserved: \t\t\t\tSUITE(0x000FAC, 3) */\n#define WLAN_CIPHER_SUITE_CCMP\t\tSUITE(0x000FAC, 4)\n#define WLAN_CIPHER_SUITE_WEP104\tSUITE(0x000FAC, 5)\n#define WLAN_CIPHER_SUITE_AES_CMAC\tSUITE(0x000FAC, 6)\n#define WLAN_CIPHER_SUITE_GCMP\t\tSUITE(0x000FAC, 8)\n#define WLAN_CIPHER_SUITE_GCMP_256\tSUITE(0x000FAC, 9)\n#define WLAN_CIPHER_SUITE_CCMP_256\tSUITE(0x000FAC, 10)\n#define WLAN_CIPHER_SUITE_BIP_GMAC_128\tSUITE(0x000FAC, 11)\n#define WLAN_CIPHER_SUITE_BIP_GMAC_256\tSUITE(0x000FAC, 12)\n#define WLAN_CIPHER_SUITE_BIP_CMAC_256\tSUITE(0x000FAC, 13)\n\n#define WLAN_CIPHER_SUITE_SMS4\t\tSUITE(0x001472, 1)\n\n/* AKM suite selectors */\n#define WLAN_AKM_SUITE_8021X\t\t\tSUITE(0x000FAC, 1)\n#define WLAN_AKM_SUITE_PSK\t\t\tSUITE(0x000FAC, 2)\n#define WLAN_AKM_SUITE_FT_8021X\t\t\tSUITE(0x000FAC, 3)\n#define WLAN_AKM_SUITE_FT_PSK\t\t\tSUITE(0x000FAC, 4)\n#define WLAN_AKM_SUITE_8021X_SHA256\t\tSUITE(0x000FAC, 5)\n#define WLAN_AKM_SUITE_PSK_SHA256\t\tSUITE(0x000FAC, 6)\n#define WLAN_AKM_SUITE_TDLS\t\t\tSUITE(0x000FAC, 7)\n#define WLAN_AKM_SUITE_SAE\t\t\tSUITE(0x000FAC, 8)\n#define WLAN_AKM_SUITE_FT_OVER_SAE\t\tSUITE(0x000FAC, 9)\n#define WLAN_AKM_SUITE_AP_PEER_KEY\t\tSUITE(0x000FAC, 10)\n#define WLAN_AKM_SUITE_8021X_SUITE_B\t\tSUITE(0x000FAC, 11)\n#define WLAN_AKM_SUITE_8021X_SUITE_B_192\tSUITE(0x000FAC, 12)\n#define WLAN_AKM_SUITE_FT_8021X_SHA384\t\tSUITE(0x000FAC, 13)\n#define WLAN_AKM_SUITE_FILS_SHA256\t\tSUITE(0x000FAC, 14)\n#define WLAN_AKM_SUITE_FILS_SHA384\t\tSUITE(0x000FAC, 15)\n#define WLAN_AKM_SUITE_FT_FILS_SHA256\t\tSUITE(0x000FAC, 16)\n#define WLAN_AKM_SUITE_FT_FILS_SHA384\t\tSUITE(0x000FAC, 17)\n#define WLAN_AKM_SUITE_OWE\t\t\tSUITE(0x000FAC, 18)\n#define WLAN_AKM_SUITE_FT_PSK_SHA384\t\tSUITE(0x000FAC, 19)\n#define WLAN_AKM_SUITE_PSK_SHA384\t\tSUITE(0x000FAC, 20)\n\n#define WLAN_MAX_KEY_LEN\t\t32\n\n#define WLAN_PMK_NAME_LEN\t\t16\n#define WLAN_PMKID_LEN\t\t\t16\n#define WLAN_PMK_LEN_EAP_LEAP\t\t16\n#define WLAN_PMK_LEN\t\t\t32\n#define WLAN_PMK_LEN_SUITE_B_192\t48\n\n#define WLAN_OUI_WFA\t\t\t0x506f9a\n#define WLAN_OUI_TYPE_WFA_P2P\t\t9\n#define WLAN_OUI_MICROSOFT\t\t0x0050f2\n#define WLAN_OUI_TYPE_MICROSOFT_WPA\t1\n#define WLAN_OUI_TYPE_MICROSOFT_WMM\t2\n#define WLAN_OUI_TYPE_MICROSOFT_WPS\t4\n#define WLAN_OUI_TYPE_MICROSOFT_TPC\t8\n\n/*\n * WMM/802.11e Tspec Element\n */\n#define IEEE80211_WMM_IE_TSPEC_TID_MASK\t\t0x0F\n#define IEEE80211_WMM_IE_TSPEC_TID_SHIFT\t1\n\nenum ieee80211_tspec_status_code {\n\tIEEE80211_TSPEC_STATUS_ADMISS_ACCEPTED = 0,\n\tIEEE80211_TSPEC_STATUS_ADDTS_INVAL_PARAMS = 0x1,\n};\n\nstruct ieee80211_tspec_ie {\n\tu8 element_id;\n\tu8 len;\n\tu8 oui[3];\n\tu8 oui_type;\n\tu8 oui_subtype;\n\tu8 version;\n\t__le16 tsinfo;\n\tu8 tsinfo_resvd;\n\t__le16 nominal_msdu;\n\t__le16 max_msdu;\n\t__le32 min_service_int;\n\t__le32 max_service_int;\n\t__le32 inactivity_int;\n\t__le32 suspension_int;\n\t__le32 service_start_time;\n\t__le32 min_data_rate;\n\t__le32 mean_data_rate;\n\t__le32 peak_data_rate;\n\t__le32 max_burst_size;\n\t__le32 delay_bound;\n\t__le32 min_phy_rate;\n\t__le16 sba;\n\t__le16 medium_time;\n} __packed;\n\nstruct ieee80211_he_6ghz_capa {\n\t/* uses IEEE80211_HE_6GHZ_CAP_* below */\n\t__le16 capa;\n} __packed;\n\n/* HE 6 GHz band capabilities */\n/* uses enum ieee80211_min_mpdu_spacing values */\n#define IEEE80211_HE_6GHZ_CAP_MIN_MPDU_START\t0x0007\n/* uses enum ieee80211_vht_max_ampdu_length_exp values */\n#define IEEE80211_HE_6GHZ_CAP_MAX_AMPDU_LEN_EXP\t0x0038\n/* uses IEEE80211_VHT_CAP_MAX_MPDU_LENGTH_* values */\n#define IEEE80211_HE_6GHZ_CAP_MAX_MPDU_LEN\t0x00c0\n/* WLAN_HT_CAP_SM_PS_* values */\n#define IEEE80211_HE_6GHZ_CAP_SM_PS\t\t0x0600\n#define IEEE80211_HE_6GHZ_CAP_RD_RESPONDER\t0x0800\n#define IEEE80211_HE_6GHZ_CAP_RX_ANTPAT_CONS\t0x1000\n#define IEEE80211_HE_6GHZ_CAP_TX_ANTPAT_CONS\t0x2000\n\n/**\n * ieee80211_get_qos_ctl - get pointer to qos control bytes\n * @hdr: the frame\n *\n * The qos ctrl bytes come after the frame_control, duration, seq_num\n * and 3 or 4 addresses of length ETH_ALEN.\n * 3 addr: 2 + 2 + 2 + 3*6 = 24\n * 4 addr: 2 + 2 + 2 + 4*6 = 30\n */\nstatic inline u8 *ieee80211_get_qos_ctl(struct ieee80211_hdr *hdr)\n{\n\tif (ieee80211_has_a4(hdr->frame_control))\n\t\treturn (u8 *)hdr + 30;\n\telse\n\t\treturn (u8 *)hdr + 24;\n}\n\n/**\n * ieee80211_get_tid - get qos TID\n * @hdr: the frame\n */\nstatic inline u8 ieee80211_get_tid(struct ieee80211_hdr *hdr)\n{\n\tu8 *qc = ieee80211_get_qos_ctl(hdr);\n\n\treturn qc[0] & IEEE80211_QOS_CTL_TID_MASK;\n}\n\n/**\n * ieee80211_get_SA - get pointer to SA\n * @hdr: the frame\n *\n * Given an 802.11 frame, this function returns the offset\n * to the source address (SA). It does not verify that the\n * header is long enough to contain the address, and the\n * header must be long enough to contain the frame control\n * field.\n */\nstatic inline u8 *ieee80211_get_SA(struct ieee80211_hdr *hdr)\n{\n\tif (ieee80211_has_a4(hdr->frame_control))\n\t\treturn hdr->addr4;\n\tif (ieee80211_has_fromds(hdr->frame_control))\n\t\treturn hdr->addr3;\n\treturn hdr->addr2;\n}\n\n/**\n * ieee80211_get_DA - get pointer to DA\n * @hdr: the frame\n *\n * Given an 802.11 frame, this function returns the offset\n * to the destination address (DA). It does not verify that\n * the header is long enough to contain the address, and the\n * header must be long enough to contain the frame control\n * field.\n */\nstatic inline u8 *ieee80211_get_DA(struct ieee80211_hdr *hdr)\n{\n\tif (ieee80211_has_tods(hdr->frame_control))\n\t\treturn hdr->addr3;\n\telse\n\t\treturn hdr->addr1;\n}\n\n/**\n * _ieee80211_is_robust_mgmt_frame - check if frame is a robust management frame\n * @hdr: the frame (buffer must include at least the first octet of payload)\n */\nstatic inline bool _ieee80211_is_robust_mgmt_frame(struct ieee80211_hdr *hdr)\n{\n\tif (ieee80211_is_disassoc(hdr->frame_control) ||\n\t    ieee80211_is_deauth(hdr->frame_control))\n\t\treturn true;\n\n\tif (ieee80211_is_action(hdr->frame_control)) {\n\t\tu8 *category;\n\n\t\t/*\n\t\t * Action frames, excluding Public Action frames, are Robust\n\t\t * Management Frames. However, if we are looking at a Protected\n\t\t * frame, skip the check since the data may be encrypted and\n\t\t * the frame has already been found to be a Robust Management\n\t\t * Frame (by the other end).\n\t\t */\n\t\tif (ieee80211_has_protected(hdr->frame_control))\n\t\t\treturn true;\n\t\tcategory = ((u8 *) hdr) + 24;\n\t\treturn *category != WLAN_CATEGORY_PUBLIC &&\n\t\t\t*category != WLAN_CATEGORY_HT &&\n\t\t\t*category != WLAN_CATEGORY_WNM_UNPROTECTED &&\n\t\t\t*category != WLAN_CATEGORY_SELF_PROTECTED &&\n\t\t\t*category != WLAN_CATEGORY_UNPROT_DMG &&\n\t\t\t*category != WLAN_CATEGORY_VHT &&\n\t\t\t*category != WLAN_CATEGORY_VENDOR_SPECIFIC;\n\t}\n\n\treturn false;\n}\n\n/**\n * ieee80211_is_robust_mgmt_frame - check if skb contains a robust mgmt frame\n * @skb: the skb containing the frame, length will be checked\n */\nstatic inline bool ieee80211_is_robust_mgmt_frame(struct sk_buff *skb)\n{\n\tif (skb->len < IEEE80211_MIN_ACTION_SIZE)\n\t\treturn false;\n\treturn _ieee80211_is_robust_mgmt_frame((void *)skb->data);\n}\n\n/**\n * ieee80211_is_public_action - check if frame is a public action frame\n * @hdr: the frame\n * @len: length of the frame\n */\nstatic inline bool ieee80211_is_public_action(struct ieee80211_hdr *hdr,\n\t\t\t\t\t      size_t len)\n{\n\tstruct ieee80211_mgmt *mgmt = (void *)hdr;\n\n\tif (len < IEEE80211_MIN_ACTION_SIZE)\n\t\treturn false;\n\tif (!ieee80211_is_action(hdr->frame_control))\n\t\treturn false;\n\treturn mgmt->u.action.category == WLAN_CATEGORY_PUBLIC;\n}\n\n/**\n * _ieee80211_is_group_privacy_action - check if frame is a group addressed\n * privacy action frame\n * @hdr: the frame\n */\nstatic inline bool _ieee80211_is_group_privacy_action(struct ieee80211_hdr *hdr)\n{\n\tstruct ieee80211_mgmt *mgmt = (void *)hdr;\n\n\tif (!ieee80211_is_action(hdr->frame_control) ||\n\t    !is_multicast_ether_addr(hdr->addr1))\n\t\treturn false;\n\n\treturn mgmt->u.action.category == WLAN_CATEGORY_MESH_ACTION ||\n\t       mgmt->u.action.category == WLAN_CATEGORY_MULTIHOP_ACTION;\n}\n\n/**\n * ieee80211_is_group_privacy_action - check if frame is a group addressed\n * privacy action frame\n * @skb: the skb containing the frame, length will be checked\n */\nstatic inline bool ieee80211_is_group_privacy_action(struct sk_buff *skb)\n{\n\tif (skb->len < IEEE80211_MIN_ACTION_SIZE)\n\t\treturn false;\n\treturn _ieee80211_is_group_privacy_action((void *)skb->data);\n}\n\n/**\n * ieee80211_tu_to_usec - convert time units (TU) to microseconds\n * @tu: the TUs\n */\nstatic inline unsigned long ieee80211_tu_to_usec(unsigned long tu)\n{\n\treturn 1024 * tu;\n}\n\n/**\n * ieee80211_check_tim - check if AID bit is set in TIM\n * @tim: the TIM IE\n * @tim_len: length of the TIM IE\n * @aid: the AID to look for\n */\nstatic inline bool ieee80211_check_tim(const struct ieee80211_tim_ie *tim,\n\t\t\t\t       u8 tim_len, u16 aid)\n{\n\tu8 mask;\n\tu8 index, indexn1, indexn2;\n\n\tif (unlikely(!tim || tim_len < sizeof(*tim)))\n\t\treturn false;\n\n\taid &= 0x3fff;\n\tindex = aid / 8;\n\tmask  = 1 << (aid & 7);\n\n\tindexn1 = tim->bitmap_ctrl & 0xfe;\n\tindexn2 = tim_len + indexn1 - 4;\n\n\tif (index < indexn1 || index > indexn2)\n\t\treturn false;\n\n\tindex -= indexn1;\n\n\treturn !!(tim->virtual_map[index] & mask);\n}\n\n/**\n * ieee80211_get_tdls_action - get tdls packet action (or -1, if not tdls packet)\n * @skb: the skb containing the frame, length will not be checked\n * @hdr_size: the size of the ieee80211_hdr that starts at skb->data\n *\n * This function assumes the frame is a data frame, and that the network header\n * is in the correct place.\n */\nstatic inline int ieee80211_get_tdls_action(struct sk_buff *skb, u32 hdr_size)\n{\n\tif (!skb_is_nonlinear(skb) &&\n\t    skb->len > (skb_network_offset(skb) + 2)) {\n\t\t/* Point to where the indication of TDLS should start */\n\t\tconst u8 *tdls_data = skb_network_header(skb) - 2;\n\n\t\tif (get_unaligned_be16(tdls_data) == ETH_P_TDLS &&\n\t\t    tdls_data[2] == WLAN_TDLS_SNAP_RFTYPE &&\n\t\t    tdls_data[3] == WLAN_CATEGORY_TDLS)\n\t\t\treturn tdls_data[4];\n\t}\n\n\treturn -1;\n}\n\n/* convert time units */\n#define TU_TO_JIFFIES(x)\t(usecs_to_jiffies((x) * 1024))\n#define TU_TO_EXP_TIME(x)\t(jiffies + TU_TO_JIFFIES(x))\n\n/* convert frequencies */\n#define MHZ_TO_KHZ(freq) ((freq) * 1000)\n#define KHZ_TO_MHZ(freq) ((freq) / 1000)\n#define PR_KHZ(f) KHZ_TO_MHZ(f), f % 1000\n#define KHZ_F \"%d.%03d\"\n\n/* convert powers */\n#define DBI_TO_MBI(gain) ((gain) * 100)\n#define MBI_TO_DBI(gain) ((gain) / 100)\n#define DBM_TO_MBM(gain) ((gain) * 100)\n#define MBM_TO_DBM(gain) ((gain) / 100)\n\n/**\n * ieee80211_action_contains_tpc - checks if the frame contains TPC element\n * @skb: the skb containing the frame, length will be checked\n *\n * This function checks if it's either TPC report action frame or Link\n * Measurement report action frame as defined in IEEE Std. 802.11-2012 8.5.2.5\n * and 8.5.7.5 accordingly.\n */\nstatic inline bool ieee80211_action_contains_tpc(struct sk_buff *skb)\n{\n\tstruct ieee80211_mgmt *mgmt = (void *)skb->data;\n\n\tif (!ieee80211_is_action(mgmt->frame_control))\n\t\treturn false;\n\n\tif (skb->len < IEEE80211_MIN_ACTION_SIZE +\n\t\t       sizeof(mgmt->u.action.u.tpc_report))\n\t\treturn false;\n\n\t/*\n\t * TPC report - check that:\n\t * category = 0 (Spectrum Management) or 5 (Radio Measurement)\n\t * spectrum management action = 3 (TPC/Link Measurement report)\n\t * TPC report EID = 35\n\t * TPC report element length = 2\n\t *\n\t * The spectrum management's tpc_report struct is used here both for\n\t * parsing tpc_report and radio measurement's link measurement report\n\t * frame, since the relevant part is identical in both frames.\n\t */\n\tif (mgmt->u.action.category != WLAN_CATEGORY_SPECTRUM_MGMT &&\n\t    mgmt->u.action.category != WLAN_CATEGORY_RADIO_MEASUREMENT)\n\t\treturn false;\n\n\t/* both spectrum mgmt and link measurement have same action code */\n\tif (mgmt->u.action.u.tpc_report.action_code !=\n\t    WLAN_ACTION_SPCT_TPC_RPRT)\n\t\treturn false;\n\n\tif (mgmt->u.action.u.tpc_report.tpc_elem_id != WLAN_EID_TPC_REPORT ||\n\t    mgmt->u.action.u.tpc_report.tpc_elem_length !=\n\t    sizeof(struct ieee80211_tpc_report_ie))\n\t\treturn false;\n\n\treturn true;\n}\n\nstruct element {\n\tu8 id;\n\tu8 datalen;\n\tu8 data[];\n} __packed;\n\n/* element iteration helpers */\n#define for_each_element(_elem, _data, _datalen)\t\t\t\\\n\tfor (_elem = (const struct element *)(_data);\t\t\t\\\n\t     (const u8 *)(_data) + (_datalen) - (const u8 *)_elem >=\t\\\n\t\t(int)sizeof(*_elem) &&\t\t\t\t\t\\\n\t     (const u8 *)(_data) + (_datalen) - (const u8 *)_elem >=\t\\\n\t\t(int)sizeof(*_elem) + _elem->datalen;\t\t\t\\\n\t     _elem = (const struct element *)(_elem->data + _elem->datalen))\n\n#define for_each_element_id(element, _id, data, datalen)\t\t\\\n\tfor_each_element(element, data, datalen)\t\t\t\\\n\t\tif (element->id == (_id))\n\n#define for_each_element_extid(element, extid, _data, _datalen)\t\t\\\n\tfor_each_element(element, _data, _datalen)\t\t\t\\\n\t\tif (element->id == WLAN_EID_EXTENSION &&\t\t\\\n\t\t    element->datalen > 0 &&\t\t\t\t\\\n\t\t    element->data[0] == (extid))\n\n#define for_each_subelement(sub, element)\t\t\t\t\\\n\tfor_each_element(sub, (element)->data, (element)->datalen)\n\n#define for_each_subelement_id(sub, id, element)\t\t\t\\\n\tfor_each_element_id(sub, id, (element)->data, (element)->datalen)\n\n#define for_each_subelement_extid(sub, extid, element)\t\t\t\\\n\tfor_each_element_extid(sub, extid, (element)->data, (element)->datalen)\n\n/**\n * for_each_element_completed - determine if element parsing consumed all data\n * @element: element pointer after for_each_element() or friends\n * @data: same data pointer as passed to for_each_element() or friends\n * @datalen: same data length as passed to for_each_element() or friends\n *\n * This function returns %true if all the data was parsed or considered\n * while walking the elements. Only use this if your for_each_element()\n * loop cannot be broken out of, otherwise it always returns %false.\n *\n * If some data was malformed, this returns %false since the last parsed\n * element will not fill the whole remaining data.\n */\nstatic inline bool for_each_element_completed(const struct element *element,\n\t\t\t\t\t      const void *data, size_t datalen)\n{\n\treturn (const u8 *)element == (const u8 *)data + datalen;\n}\n\n/**\n * RSNX Capabilities:\n * bits 0-3: Field length (n-1)\n */\n#define WLAN_RSNX_CAPA_PROTECTED_TWT BIT(4)\n#define WLAN_RSNX_CAPA_SAE_H2E BIT(5)\n\n/*\n * reduced neighbor report, based on Draft P802.11ax_D5.0,\n * section 9.4.2.170\n */\n#define IEEE80211_AP_INFO_TBTT_HDR_TYPE\t\t\t\t0x03\n#define IEEE80211_AP_INFO_TBTT_HDR_FILTERED\t\t\t0x04\n#define IEEE80211_AP_INFO_TBTT_HDR_COLOC\t\t\t0x08\n#define IEEE80211_AP_INFO_TBTT_HDR_COUNT\t\t\t0xF0\n#define IEEE80211_TBTT_INFO_OFFSET_BSSID_BSS_PARAM\t\t8\n#define IEEE80211_TBTT_INFO_OFFSET_BSSID_SSSID_BSS_PARAM\t12\n\n#define IEEE80211_RNR_TBTT_PARAMS_OCT_RECOMMENDED\t\t0x01\n#define IEEE80211_RNR_TBTT_PARAMS_SAME_SSID\t\t\t0x02\n#define IEEE80211_RNR_TBTT_PARAMS_MULTI_BSSID\t\t\t0x04\n#define IEEE80211_RNR_TBTT_PARAMS_TRANSMITTED_BSSID\t\t0x08\n#define IEEE80211_RNR_TBTT_PARAMS_COLOC_ESS\t\t\t0x10\n#define IEEE80211_RNR_TBTT_PARAMS_PROBE_ACTIVE\t\t\t0x20\n#define IEEE80211_RNR_TBTT_PARAMS_COLOC_AP\t\t\t0x40\n\nstruct ieee80211_neighbor_ap_info {\n       u8 tbtt_info_hdr;\n       u8 tbtt_info_len;\n       u8 op_class;\n       u8 channel;\n} __packed;\n\n#endif /* LINUX_IEEE80211_H */\n"}}, "reports": [{"events": [{"location": {"col": 4, "file": 0, "line": 894}, "message": "WARNING use flexible-array member instead (https://www.kernel.org/doc/html/latest/process/deprecated.html#zero-length-and-one-element-arrays)"}], "macros": [], "notes": [], "path": "/src/include/linux/ieee80211.h", "reportHash": "366c478386b5a7cedbbd840ede19e907", "checkerName": "coccinelle", "reviewStatus": null, "severity": "UNSPECIFIED"}]};
      window.onload = function() {
        if (!browserCompatible) {
          setNonCompatibleBrowserMessage();
        } else {
          BugViewer.init(data.files, data.reports);
          BugViewer.create();
          BugViewer.initByUrl();
        }
      };
    </script>
  </head>
  <body>
  <div class="container">
    <div id="content">
      <div id="side-bar">
        <div class="header">
          <a href="index.html" class="button">&#8249; Return to List</a>
        </div>
        <div id="report-nav">
          <div class="header">Reports</div>
        </div>
      </div>
      <div id="editor-wrapper">
        <div class="header">
          <div id="file">
            <span class="label">File:</span>
            <span id="file-path"></span>
          </div>
          <div id="checker">
            <span class="label">Checker name:</span>
            <span id="checker-name"></span>
          </div>
          <div id="review-status-wrapper">
            <span class="label">Review status:</span>
            <span id="review-status"></span>
          </div>
        </div>
        <div id="editor"></div>
      </div>
    </div>
  </div>
  </body>
</html>
